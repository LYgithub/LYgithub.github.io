<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>MyBatis-æ•°æ®ç¼“å­˜</title>
    <url>/kawyang/579a3ded.html</url>
    <content><![CDATA[<blockquote>
<p>å°†æŸ¥è¯¢è¿‡çš„æ•°æ®è¿›è¡Œç¼“å­˜ï¼Œå¯ä»¥å‡å°‘æ•°æ®åº“è®¿é—®çš„æ¬¡æ•°ï¼Œå‡è½»è´Ÿæ‹…æœåŠ¡å™¨çš„ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æé«˜æ•°æ®è®¿é—®æ—¶é—´ã€‚</p>
</blockquote>
<a id="more"></a>

<h2 id="ä¸€çº§ç¼“å­˜"><a href="#ä¸€çº§ç¼“å­˜" class="headerlink" title="ä¸€çº§ç¼“å­˜"></a>ä¸€çº§ç¼“å­˜</h2><blockquote>
<p>ä¸€çº§ç¼“å­˜æ˜¯ SqlSession çº§åˆ«çš„ç¼“å­˜ï¼Œåªè¦ SqlSession æ²¡æœ‰è¢« close æˆ– flush ï¼Œå°±ä¼šå­˜åœ¨ã€‚</p>
</blockquote>
<ul>
<li><p>å½“æ‰§è¡Œä¸¤æ¬¡ç›¸åŒçš„æŸ¥è¯¢æ—¶ï¼ŒMyBatis ä¼šå°†ç¬¬ä¸€æ¬¡æŸ¥è¯¢çš„ç»“æœä¿å­˜åˆ°ç¼“å­˜ä¸­ï¼Œå†æ¬¡è¿è¡ŒæŸ¥è¯¢ä»£ç ï¼Œå°±ä¸éœ€è¦æ‰§è¡ŒSQL è¯­å¥ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è·å–æ•°æ®ã€‚</p>
</li>
<li><p>å½“è°ƒç”¨ SqlSession å¯¹æ•°æ®è¿›è¡Œ ä¿®æ”¹ã€æ’å…¥ã€åˆ é™¤ã€commit()ã€close() ç­‰å°±ä¼šæ¸…ç©ºä¸€çº§ç¼“å­˜ã€‚ä»¥ä¿è¯ç¼“å­˜ä¸­æ•°æ®ä¸ºæœ€æ–°æ•°æ®ï¼Œé¿å…è„è¯»ã€‚</p>
</li>
<li><p>ä¸€çº§ç¼“å­˜æ¸…ç©ºï¼š</p>
<ul>
<li>è°ƒç”¨ SqlSessionå¯¹è±¡çš„ <code>clearCache()</code> æ–¹æ³•</li>
<li>close()</li>
<li>commit()</li>
</ul>
</li>
</ul>
<h2 id="äºŒçº§ç¼“å­˜"><a href="#äºŒçº§ç¼“å­˜" class="headerlink" title="äºŒçº§ç¼“å­˜"></a>äºŒçº§ç¼“å­˜</h2><blockquote>
<p>äºŒçº§ç¼“å­˜æ˜¯ <code>Mapper</code> æ˜ å°„çº§åˆ«çš„ç¼“å­˜ï¼Œå¤šä¸ª SqlSession å¯¹è±¡ï¼Œæ“ä½œåŒä¸€ä¸ª Mapper æ˜ å°„çš„ SQL ï¼Œå…¬ç”¨ä¸€ä¸ªç¼“å­˜å¯¹è±¡ã€‚</p>
</blockquote>
<h3 id="ä½¿ç”¨æ­¥éª¤"><a href="#ä½¿ç”¨æ­¥éª¤" class="headerlink" title="ä½¿ç”¨æ­¥éª¤"></a>ä½¿ç”¨æ­¥éª¤</h3><h4 id="å¼•å…¥åæ ‡"><a href="#å¼•å…¥åæ ‡" class="headerlink" title="å¼•å…¥åæ ‡"></a>å¼•å…¥åæ ‡</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ehchache ç¼“å­˜  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>net.sf.ehcache<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h4 id="å¼€å¯ç¼“å­˜"><a href="#å¼€å¯ç¼“å­˜" class="headerlink" title="å¼€å¯ç¼“å­˜"></a>å¼€å¯ç¼“å­˜</h4><p>åœ¨ MyBatisçš„é…ç½®æ–‡ä»¶ä¸­(config.xml)ï¼Œä½¿ç”¨ settings æ ‡ç­¾ä¸‹ çš„ setting æ ‡ç­¾ å¼€å¯ç¼“å­˜ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--  æ‰“å°SQL  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"logImpl"</span> <span class="attr">value</span>=<span class="string">"STDOUT_LOGGING"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--  å¼€å¯å»¶è¿ŸåŠ è½½  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"lazyLoadingEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--  å¼€å¯äºŒçº§ç¼“å­˜  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"cacheEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h4 id="é…ç½®Mapper"><a href="#é…ç½®Mapper" class="headerlink" title="é…ç½®Mapper"></a>é…ç½®Mapper</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"..."</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">cache</span>&gt;</span><span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">cache</span> <span class="attr">type</span>=<span class="string">"org.mybatis.caches.ehcache.LoggingEhcache"</span> &gt;</span></span><br><span class="line">		<span class="comment">&lt;!--   åˆ›å»ºç¼“å­˜ä¹‹åï¼Œå¯¹å¼ä¸€æ¬¡è®¿é—®ç¼“å­˜çš„æ—¶é—´å€¼ç¼“å­˜å¤±æ•ˆçš„æ—¶é—´é—´éš”  --&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"timeToIdleSeconds"</span> <span class="attr">value</span>=<span class="string">"3600"</span>/&gt;</span><span class="comment">&lt;!--1 hour--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--   ç¼“å­˜è‡ªåˆ›å»ºæ—¶é—´èµ·è‡³å¤±æ•ˆçš„æ—¶é—´é—´éš”  --&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"timeToLiveSeconds"</span> <span class="attr">value</span>=<span class="string">"3600"</span>/&gt;</span><span class="comment">&lt;!--1 hour--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--        --&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxEntriesLocalHeap"</span> <span class="attr">value</span>=<span class="string">"1000"</span>/&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxEntriesLocalDisk"</span> <span class="attr">value</span>=<span class="string">"10000000"</span>/&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--   ç¼“å­˜å›æ”¶ç­–ç•¥ï¼Œç§»é™¤-è¿‘æœŸä½¿ç”¨æœ€å°‘çš„å¯¹è±¡ --&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"memoryStoreEvictionPolicy"</span> <span class="attr">value</span>=<span class="string">"LRU"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div>


<h4 id="é…ç½®-useCache-å±æ€§"><a href="#é…ç½®-useCache-å±æ€§" class="headerlink" title="é…ç½® useCache å±æ€§"></a>é…ç½® useCache å±æ€§</h4><blockquote>
<p>å¦‚æœæ¯æ¬¡æŸ¥è¯¢éƒ½éœ€è¦æœ€æ–°çš„æ•°æ®ï¼Œéœ€è¦å°† selectğŸ·ï¸ ä¸­çš„ <code>useCache</code> å±æ€§è®¾ç½®ä¸º <code>false</code>, ç¦ç”¨äºŒçº§ç¼“å­˜ã€‚</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultType</span>=<span class="string">"com.item.entity.Student"</span> <span class="attr">useCache</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">    select id,name from student </span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><blockquote>
<p>æ­¥éª¤</p>
</blockquote>
<p>ä½¿ç”¨<code>åŒä¸€ä¸ª</code>Mapperæ˜ å°„ï¼Œåˆ›å»ºä¸¤ä¸ª<code>ä¸åŒ</code>çš„ SqlSession å¯¹è±¡ï¼Œåˆ†åˆ«æ‰§è¡Œ<code>ç›¸åŒ</code> çš„SQLæ“ä½œ</p>
<p>if : æ‰§è¡Œä¸€æ¬¡ SQL è¯­å¥<br>    äºŒçº§ç¼“å­˜æˆåŠŸï¼<br>else :<br>    äºŒçº§ç¼“å­˜å¤±è´¥ï¼</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FindCache</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        InputStream resourceAsStream = FindCache.class.getClassLoader().getResourceAsStream("config.xml");</span><br><span class="line">        SqlSessionFactoryBuilder builder = <span class="keyword">new</span> SqlSessionFactoryBuilder();</span><br><span class="line">        SqlSessionFactory build = builder.build(resourceAsStream);</span><br><span class="line">        SqlSession sqlSession = build.openSession();</span><br><span class="line">        IGoodRepository mapper = sqlSession.getMapper(IGoodRepository<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        Good goodById = mapper.findGoodById(<span class="number">2</span>);</span><br><span class="line">        System.out.println(goodById.toString());</span><br><span class="line">        <span class="comment">//å…³é—­ä¸€çº§ç¼“å­˜</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line"></span><br><span class="line">        SqlSession sqlSession1 = build.openSession();</span><br><span class="line">        IGoodRepository mapper1 = sqlSession1.getMapper(IGoodRepository<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        Good goodById1 = mapper1.findGoodById(<span class="number">2</span>);</span><br><span class="line">        System.out.println(goodById1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ç»“æœ:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SHELL"><figure class="iseeu highlight /shell"><table><tr><td class="code"><pre><span class="line">Cache Hit Ratio [com.kawyang.repository.IGoodRepository]: 0.0</span><br><span class="line">Opening JDBC Connection</span><br><span class="line">Created connection 392918519.</span><br><span class="line">Setting autocommit to false on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@176b75f7]</span><br><span class="line">==&gt;  Preparing: select * from good where id=?</span><br><span class="line">==&gt; Parameters: 2(Integer)</span><br><span class="line">&lt;==    Columns: id, name</span><br><span class="line">&lt;==        Row: 2, ç”µå†°ç®±</span><br><span class="line">&lt;==      Total: 1</span><br><span class="line">Good(id=2, name=ç”µå†°ç®±, consumers=null)</span><br><span class="line">Resetting autocommit to true on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@176b75f7]</span><br><span class="line">Closing JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@176b75f7]</span><br><span class="line">Returned connection 392918519 to pool.</span><br><span class="line">Cache Hit Ratio [com.kawyang.repository.IGoodRepository]: 0.5</span><br><span class="line">Good(id=2, name=ç”µå†°ç®±, consumers=null)</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>ä¸€ä¸‹å…·ä½“å†…å®¹åŠåŸå› ï¼Œæœ‰å¾…è¿›ä¸€æ­¥äº†è§£å­¦ä¹ ã€‚</p>
</blockquote>
<p>âš ï¸ : å¦‚æœä½¿ç”¨ sqlSession.clearCache(); æ¸…é™¤ç¼“å­˜ï¼Œä½†ä¾ç„¶ç¼“å­˜ç€å…¶ä»– SqlSession å¯¹è±¡çš„ç¼“å­˜æ•°æ®ã€‚</p>
<p>å¦‚ä¸‹æµ‹è¯•ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FindCache</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        InputStream resourceAsStream = FindCache.class.getClassLoader().getResourceAsStream("config.xml");</span><br><span class="line">        SqlSessionFactoryBuilder builder = <span class="keyword">new</span> SqlSessionFactoryBuilder();</span><br><span class="line">        SqlSessionFactory build = builder.build(resourceAsStream);</span><br><span class="line">        SqlSession sqlSession = build.openSession();</span><br><span class="line">        IGoodRepository mapper = sqlSession.getMapper(IGoodRepository<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        Good goodById = mapper.findGoodById(<span class="number">2</span>);</span><br><span class="line">        System.out.println(goodById.toString());</span><br><span class="line"></span><br><span class="line">        SqlSession sqlSession1 = build.openSession();</span><br><span class="line">        IGoodRepository mapper1 = sqlSession1.getMapper(IGoodRepository<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        Good goodById1 = mapper1.findGoodById(<span class="number">2</span>);</span><br><span class="line">        System.out.println(goodById1.toString());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…³é—­ä¸€çº§ç¼“å­˜</span></span><br><span class="line">        sqlSession.clearCache();</span><br><span class="line">        System.out.println(<span class="string">"====    ğŸ†‘ sqlSessionç¼“å­˜    ===="</span>);</span><br><span class="line">        System.out.println(sqlSession1.getMapper(IGoodRepository<span class="class">.<span class="keyword">class</span>).<span class="title">findGoodById</span>(2))</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ç»“æœ:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="code"><pre><span class="line">Opening JDBC Connection</span><br><span class="line">Created connection 392918519.</span><br><span class="line">Setting autocommit to false on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@176b75f7]</span><br><span class="line">&#x3D;&#x3D;&gt;  Preparing: select * from good where id&#x3D;?</span><br><span class="line">&#x3D;&#x3D;&gt; Parameters: 2(Integer)</span><br><span class="line">&lt;&#x3D;&#x3D;    Columns: id, name</span><br><span class="line">&lt;&#x3D;&#x3D;        Row: 2, ç”µå†°ç®±</span><br><span class="line">&lt;&#x3D;&#x3D;      Total: 1</span><br><span class="line">Good(id&#x3D;2, name&#x3D;ç”µå†°ç®±, consumers&#x3D;null)</span><br><span class="line">Cache Hit Ratio [com.kawyang.repository.IGoodRepository]: 0.0</span><br><span class="line">Opening JDBC Connection</span><br><span class="line">Created connection 1804126860.</span><br><span class="line">Setting autocommit to false on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@6b88ca8c]</span><br><span class="line">&#x3D;&#x3D;&gt;  Preparing: select * from good where id&#x3D;?</span><br><span class="line">&#x3D;&#x3D;&gt; Parameters: 2(Integer)</span><br><span class="line">&lt;&#x3D;&#x3D;    Columns: id, name</span><br><span class="line">&lt;&#x3D;&#x3D;        Row: 2, ç”µå†°ç®±</span><br><span class="line">&lt;&#x3D;&#x3D;      Total: 1</span><br><span class="line">Good(id&#x3D;2, name&#x3D;ç”µå†°ç®±, consumers&#x3D;null)</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;    ğŸ†‘ sqlSessionç¼“å­˜    &#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">Cache Hit Ratio [com.kawyang.repository.IGoodRepository]: 0.0</span><br><span class="line">Good(id&#x3D;2, name&#x3D;ç”µå†°ç®±, consumers&#x3D;null)</span><br></pre></td></tr></table></figure></div>
]]></content>
      <categories>
        <category>æ¡†æ¶</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
        <tag>ç¼“å­˜</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatis-åŸºæœ¬æ“ä½œ</title>
    <url>/kawyang/8661f06f.html</url>
    <content><![CDATA[<blockquote>
<p>MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„åŠè‡ªåŠ¨çš„è½»é‡çº§çš„æŒä¹…å±‚æ¡†æ¶ã€‚æœ¬æ–‡ä»‹ç»äº† <code>MyBatis</code> çš„åŸºæœ¬é¡¹ç›®çš„åˆ›å»ºå’Œä½¿ç”¨ã€‚</p>
</blockquote>
<a id="more"></a>

<h2 id="åˆ›å»ºMavené¡¹ç›®"><a href="#åˆ›å»ºMavené¡¹ç›®" class="headerlink" title="åˆ›å»ºMavené¡¹ç›®"></a>åˆ›å»ºMavené¡¹ç›®</h2><h2 id="pom-xml-å¯¼å…¥ç›¸å…³ä¾èµ–"><a href="#pom-xml-å¯¼å…¥ç›¸å…³ä¾èµ–" class="headerlink" title="pom.xml å¯¼å…¥ç›¸å…³ä¾èµ–"></a>pom.xml å¯¼å…¥ç›¸å…³ä¾èµ–</h2><ul>
<li>org.mybatis -&gt; mybatis</li>
<li>mysql-connection-java -&gt; mysql</li>
<li>org.projectlombok -&gt; lombok</li>
<li>log4j -&gt; log4j</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>MyBatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li><strong>é…ç½® <code>mapper</code> è¯»å–ä½ç½®</strong> ï¼Œè§£å†³Mapperé…ç½®æ–‡ä»¶è¯»å–ä¸åˆ°çš„å…³é”®<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure></div>


</li>
</ul>
<blockquote>
<p>resources/config.xml</p>
</blockquote>
<p>é€šè¿‡ <code>config.xml</code> è¿›è¡Œæ•°æ®åº“çš„é…ç½®å’Œç›¸å…³Mapperçš„å¯¼å…¥ã€‚</p>
<ul>
<li>çº¦æŸ</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    	<span class="comment">&lt;!-- SQLé…ç½® --&gt;</span></span><br><span class="line">    	<span class="comment">&lt;!-- è¿æ¥é…ç½® --&gt;</span></span><br><span class="line">    	<span class="comment">&lt;!-- æ³¨å†ŒMapper --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<ul>
<li>SQL çš„ç›¸å…³é…ç½®</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- æ‰“å°SQLè¯­å¥ --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"logImpl"</span> <span class="attr">value</span>=<span class="string">"STDOUT_LOGGING"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>è¿æ¥é…ç½®</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"mysql"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"mysql"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.cj.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/JavaWeb?userSSL=false<span class="symbol">&amp;amp;</span>allowPublicKeyRetrieval=true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li><p>æ³¨å†ŒMapper</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ³¨è§£å½¢å¼æ³¨å†Œ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">"com.kawyang.repository.IClass"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®æ–‡ä»¶æ–¹å¼æ³¨å†Œ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"com/kawyang/mapper/IClassesMapper.xml"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"com/kawyang/mapper/IStudentMapper.xml"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

</li>
</ul>
<h2 id="entity"><a href="#entity" class="headerlink" title="entity"></a>entity</h2><p>åˆ›å»ºå®ä½“ç±»å¯¹è±¡ã€‚</p>
<p>lombok ä¼šé€šè¿‡ä»¥ä¸‹æ³¨è§£å¿«é€ŸğŸ”œå®Œæˆè®¾ç½®<br>            <code>@Data</code> : è‡ªåŠ¨æ·»åŠ  Get/Set æ–¹æ³•ã€‚<br>            <code>@AllArgsConstructor</code> : æœ‰å‚æ„é€ <br>            <code>@NoArgsConstructor</code> : æ— å‚æ„é€   </p>
<ul>
<li>é…ç½®æ–‡ä»¶å½¢å¼</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Classes</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>


<h2 id="repository"><a href="#repository" class="headerlink" title="repository"></a>repository</h2><blockquote>
<p>ç¼–å†™æ•°æ®åº“æ“ä½œæ¥å£</p>
</blockquote>
<ul>
<li><p>é…ç½®æ–‡ä»¶å½¢å¼</p>
<p>é€šè¿‡é…ç½®æ–‡ä»¶å½¢å¼ï¼Œéœ€è¦ç¼–å†™ç›¸åº”çš„ <code>Mapper</code> é…ç½®æ–‡ä»¶ï¼Œå°†æ¥å£ä¸­çš„æ–¹æ³•ä¸ æ•°æ®åº“çš„æ“ä½œè¿›è¡Œæ˜ å°„ã€‚<br>å¹¶ä¸”åœ¨ <code>config.xml</code> ä¸­å¯¹é…ç½®æ–‡ä»¶ é€šè¿‡ mapper ğŸ·ï¸çš„ <code>resource</code> å±æ€§ï¼Œå®Œæˆæ³¨å†Œã€‚</p>
</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IClasses</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">Classes <span class="title">findById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;Classes&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">insertClass</span><span class="params">(Classes classes)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">deleteById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">updateClass</span><span class="params">(Classes classes)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">ClassesStudents <span class="title">findClassAndStudentById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;ClassesStudents&gt; <span class="title">findAllClassAndStudent</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>æ³¨è§£å½¢å¼</li>
</ul>
<p>é€šè¿‡ä¸€ä¸‹æ³¨è§£ï¼Œç¼–å†™ç›¸åº”çš„SQLè¯­å¥ï¼Œå®Œæˆæ¥å£æ–¹æ³•ä¸æ•°æ®åº“æ“ä½œçš„æ˜ å°„ï¼Œä¸éœ€è¦é…ç½®æ–‡ä»¶ï¼Œåœ¨ <code>config.xml</code> ä¸­ï¼Œä½¿ç”¨ mapperğŸ·ï¸ çš„  <code>class</code> å±æ€§å®Œæˆæ³¨å†Œã€‚</p>
<ul>
<li>@Insert(String sql) : å¢</li>
<li>@Delete(String sql) : åˆ </li>
<li>@Update(String sql) : æ”¹</li>
<li>@Select(String sql) : æŸ¥</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IClasses</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Select</span>(<span class="string">"select * from classes where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function">Classes <span class="title">findById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from classes"</span>)</span><br><span class="line">    <span class="function">List&lt;Classes&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert</span>(<span class="string">"insert into classes (id,name) values (#&#123;id&#125;,#&#123;name&#125;)"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">insertClass</span><span class="params">(Classes classes)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Delete</span>(<span class="string">"delete from classes where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">deleteById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update</span>(<span class="string">"update from classes set name=#&#123;name&#125; where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">updateClass</span><span class="params">(Classes classes)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h2 id="mapper"><a href="#mapper" class="headerlink" title="mapper"></a>mapper</h2><p>com.mapper.IClassesMapper</p>
<p>ç¼–å†™æ•°æ®åº“æ“ä½œçš„Mapperæ–‡ä»¶ï¼Œå®Œæˆæ–¹æ³•ä¸æŸ¥è¯¢è¯­å¥çš„æ˜ å°„ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> &gt;</span>..<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">delete</span> &gt;</span>..<span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">update</span> &gt;</span>..<span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">insert</span> &gt;</span>..<span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>MapperğŸ·ï¸ é€šè¿‡å±æ€§ <code>namespace</code> : æ•°æ®åº“æ“ä½œæ¥å£çš„å…¨è·¯å¾„<br>æ•°æ®åº“æ“ä½œğŸ·ï¸ :</p>
<ul>
<li><p>select</p>
<ul>
<li>id : æ˜ å°„æ¥å£çš„æ–¹æ³•å</li>
<li>parameterType : æ–¹æ³•å‚æ•°çš„ç±»å‹</li>
<li>resultType : è¿”å›å€¼ç±»å‹çš„å…¨è·¯å¾„</li>
</ul>
</li>
<li><p>delete</p>
<ul>
<li>id : æ˜ å°„æ¥å£çš„æ–¹æ³•å</li>
<li>parameterType : æ–¹æ³•å‚æ•°çš„ç±»å‹</li>
<li>æ— è¿”å›å€¼å±æ€§ï¼Œè¿”å›å€¼ä¸º <code>int</code> ç±»å‹</li>
</ul>
</li>
<li><p>update</p>
<ul>
<li>id : æ˜ å°„æ¥å£çš„æ–¹æ³•å</li>
<li>parameterType : æ–¹æ³•å‚æ•°çš„ç±»å‹</li>
<li>æ— è¿”å›å€¼å±æ€§ï¼Œè¿”å›å€¼ä¸º <code>int</code> ç±»å‹</li>
</ul>
</li>
<li><p>insert</p>
<ul>
<li>id : æ˜ å°„æ¥å£çš„æ–¹æ³•å</li>
<li>parameterType : æ–¹æ³•å‚æ•°çš„ç±»å‹</li>
</ul>
</li>
<li><p>resultMap:</p>
</li>
</ul>
<p>é€šè¿‡ <code>resultMap</code> è¿›è¡Œå«æœ‰å†…åµŒå¯¹è±¡ç±»çš„é…ç½®ã€‚  </p>
<p>å¦‚ï¼šStudentClas ç±»ï¼Œé™¤äº†åŒ…å«studentçš„åŸºæœ¬ä¿¡æ¯å¤–ï¼Œå«æœ‰å†…åµŒå¯¹è±¡ classesï¼Œéœ€è¦é€šè¿‡ resultMap æ¥å®Œæˆæ•°æ®çš„é…ç½®ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"StudentCla"</span> <span class="attr">type</span>=<span class="string">"com.kawyang.entity.StudentCla"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"sid"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"sname"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"students"</span> <span class="attr">ofType</span>=<span class="string">"com.kawyang.model.Classes"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"cid"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"cname"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectStudentClaById"</span> <span class="attr">resultMap</span>=<span class="string">"StudentCla"</span> <span class="attr">parameterType</span>=<span class="string">"ind"</span>&gt;</span></span><br><span class="line">	select s.id as sid, s.name as sname, c.id as cid, c.name as cname</span><br><span class="line">	from student s,classes c </span><br><span class="line">	where s.cid=c.id and s.id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<ul>
<li>resultMapğŸ·ï¸ :   <ul>
<li>id -&gt; resultMap çš„ id  </li>
<li>type -&gt; å®ä½“ç±»ç±»å‹  </li>
</ul>
</li>
<li>id å’Œ resultğŸ·ï¸ : <ul>
<li>id : æŒ‡å®šä¸»é”®ä¿¡æ¯ </li>
<li>result : æŒ‡å®šéä¸»é”®ä¿¡æ¯</li>
<li>property -&gt; ç±»çš„å±æ€§åç§°  </li>
<li>column -&gt; æŸ¥è¯¢ç»“æœçš„åˆ—å  </li>
</ul>
</li>
<li>collectionğŸ·ï¸ï¼šå®Œæˆå¯¹è±¡æ³¨å…¥  <ul>
<li>property -&gt; ç±»çš„æ³¨å…¥å¯¹è±¡çš„åç§°  </li>
<li>ofType -&gt; æ³¨å…¥å¯¹è±¡çš„ç±»å‹  </li>
</ul>
</li>
</ul>
<h2 id="Main"><a href="#Main" class="headerlink" title="Main"></a>Main</h2><ol>
<li>è¯»å–é…ç½®æ–‡ä»¶</li>
<li>åˆ›å»ºSQLSessionå¯¹è±¡</li>
<li>ä½¿ç”¨SQLSessionå¯¹è±¡ï¼Œåˆ›å»º ç›¸åº”æ“ä½œçš„ mapper å¯¹è±¡</li>
<li>ä½¿ç”¨ mapper å¯¹è±¡å®Œæˆ æ•°æ®åº“çš„æ“ä½œ</li>
</ol>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 1. è¯»å–é…ç½®æ–‡ä»¶</span></span><br><span class="line">		InputStream in = Main.class.getClassLoader().getResourceAsStream("config.xml");</span><br><span class="line">		<span class="comment">// 2. åˆ›å»ºSQLSessionå¯¹è±¡</span></span><br><span class="line">		<span class="comment">// 2.1 åˆ›å»º SqlSession å·¥å‚ğŸ­ç±»</span></span><br><span class="line">		SqlSessionFactoryBuilder bulider = <span class="keyword">new</span> SqlSessionFactoryBuilder();</span><br><span class="line">		<span class="comment">// 2.2 ä½¿ç”¨é…ç½®æ–‡ä»¶ å®ŒæˆğŸ­åˆ›å»º</span></span><br><span class="line">		SqlSessionFactory bulid = bulider.build(in);</span><br><span class="line">		<span class="comment">// 2.3 ä½¿ç”¨ğŸ­åˆ›å»º SqlSession</span></span><br><span class="line">		SqlSession session = build.openSession();</span><br><span class="line">		<span class="comment">// 3. ä½¿ç”¨SQLSessionå¯¹è±¡ï¼Œåˆ›å»º ç›¸åº”æ“ä½œçš„ mapper å¯¹è±¡</span></span><br><span class="line">		IStudentCla mapper = session.getMapper(IStudentCla<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">		<span class="comment">// 4. ä½¿ç”¨ mapper å¯¹è±¡å®Œæˆ æ•°æ®åº“çš„æ“ä½œ</span></span><br><span class="line">		StudentCla student = mapper.findById(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 5. æäº¤äº‹åŠ¡  æ·»åŠ æ•°æ®æ—¶ä½¿ç”¨</span></span><br><span class="line">		session.commit();</span><br><span class="line">        </span><br><span class="line">		<span class="comment">// 5. å…³é—­ SqlSession</span></span><br><span class="line">		session.close();</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>




















]]></content>
      <categories>
        <category>æ¡†æ¶</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatis-å»¶è¿ŸåŠ è½½</title>
    <url>/kawyang/70e7f4d8.html</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡ä¸»è¦æ€»ç»“äº† <code>Mybatis</code> çš„æ•°æ®åº“å»¶è¿ŸåŠ è½½é—®é¢˜ï¼Œå°†å¤šè¡¨æŸ¥è¯¢çš„ SQL è¯­å¥è¿›è¡Œæ‹†åˆ†ï¼Œæ ¹æ®éœ€è¦è¿›è¡Œç›¸åº”çš„æŸ¥è¯¢æ“ä½œã€‚</p>
</blockquote>
<a id="more"></a>

<h3 id="assocation-å»¶è¿ŸåŠ è½½"><a href="#assocation-å»¶è¿ŸåŠ è½½" class="headerlink" title="assocation å»¶è¿ŸåŠ è½½"></a>assocation å»¶è¿ŸåŠ è½½</h3><blockquote>
<p>assocationå®ç°ä¸€å¯¹ä¸€å»¶è¿ŸåŠ è½½</p>
</blockquote>
<p>å°†çº§è”æ“ä½œ è½¬æ¢ä¸ºä¸¤æ¡SQLè¯­å¥ï¼Œé€šè¿‡ä¸¤æ¬¡æŸ¥è¯¢æ–¹å¼è¿›è¡Œè·å–æ•°æ®ã€‚</p>
<p>å«æœ‰ æ³¨å…¥å¯¹è±¡çš„å¯¹è±¡æŸ¥è¯¢ï¼Œå½“æŸ¥è¯¢ç»“æœä¸æ¶‰åŠæ³¨å…¥å¯¹è±¡ä¿¡æ¯æ—¶ï¼Œä¸è¿›è¡Œå†…åµŒå¯¹è±¡çš„æŸ¥è¯¢ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--  å»¶è¿ŸåŠ è½½  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"resultStuLazy"</span> <span class="attr">type</span>=<span class="string">"com.item.entity.Student"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"name"</span> <span class="attr">property</span>=<span class="string">"name"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ select å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"classes"</span> <span class="attr">javaType</span>=<span class="string">"com.item.entity.Classes_"</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">select</span>=<span class="string">"com.item.repository.IClasses.findById"</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">column</span>=<span class="string">"cid"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findById"</span> <span class="attr">resultMap</span>=<span class="string">"resultStuLazy"</span>&gt;</span></span><br><span class="line">    select id,name,cid from student where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></div>


<blockquote>
<p>åœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­å¼€å¯å»¶è¿ŸåŠ è½½</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"lazyLoadingEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"aggressiveLazyLoading"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<p><a href="https://www.jianshu.com/p/6f5b42d52d38" target="_blank" rel="noopener">name å‚æ•°å‚è€ƒ</a></p>
<h3 id="Collection-å»¶è¿ŸåŠ è½½"><a href="#Collection-å»¶è¿ŸåŠ è½½" class="headerlink" title="Collection å»¶è¿ŸåŠ è½½"></a>Collection å»¶è¿ŸåŠ è½½</h3><blockquote>
<p>Collection å®ç°ä¸€å¯¹å¤šå»¶è¿ŸåŠ è½½ã€‚</p>
</blockquote>
<p>åœ¨æŸ¥è¯¢ç­çº§ä¿¡æ¯æ—¶ï¼Œå¦‚æœéœ€è¦æŸ¥è¯¢ç­çº§å†…æ‰€æœ‰ğŸ‘¨â€ğŸ“ä¿¡æ¯ï¼Œéœ€è¦è¿›è¡Œçº§è”æ“ä½œã€‚<br>å¯ä»¥å°†è¯¥æ“ä½œåˆ†ä¸ºä¸¤æ­¥ï¼š</p>
<ul>
<li>å…ˆæ ¹æ®ğŸ†”æŸ¥è¯¢å‡ºç­çº§ä¿¡æ¯ =&gt; select * from classes where id=?</li>
<li>å†æ ¹æ®ğŸ‘©â€ğŸ“çš„ç­çº§ğŸ†”ï¼ŒæŸ¥è¯¢å‡ºç­çº§å†…æ‰€æœ‰ğŸ‘¨â€ğŸ“ =&gt; select * from student where cid=?</li>
</ul>
<blockquote>
<p>æŸ¥è¯¢ç­çº§ä¿¡æ¯</p>
</blockquote>
<p>é‡‡ç”¨é…ç½®æ–‡ä»¶çš„æ–¹å¼ï¼Œç”¨ <code>collection</code> é…ç½®ç¬¬äºŒæ­¥çš„æ“ä½œï¼Œä½¿ç”¨ <code>ofType</code> å±æ€§ï¼Œå®Œæˆæ•°æ®ç±»å‹çš„æŒ‡å®šã€‚<br>å¦‚ä¸‹ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--  å»¶è¿ŸåŠ è½½start  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"classLazy"</span> <span class="attr">type</span>=<span class="string">"com.kawyang.entity.ClassesStu"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"name"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"students"</span> <span class="attr">ofType</span>=<span class="string">"com.kawyang.entity.Student"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">select</span>=<span class="string">"com.kawyang.repository.IStudentRepository.findByCid"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">column</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findByIdLazy"</span> <span class="attr">resultMap</span>=<span class="string">"classLazy"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span>&gt;</span></span><br><span class="line">    select * from classes where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  å»¶è¿ŸåŠ è½½end  --&gt;</span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>æ ¹æ®ç­çº§ ğŸ†” æŸ¥è¯¢æ‰€æœ‰ğŸ‘©â€ğŸ“ğŸ‘¨â€ğŸ“ï¼Œä½¿ç”¨æ³¨è§£æ–¹å¼å¦‚ä¸‹ï¼š</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Select</span>(<span class="string">"select * from student where cid=#&#123;id&#125;"</span>)</span><br><span class="line"><span class="function">List&lt;Student&gt; <span class="title">findByCid</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br></pre></td></tr></table></figure></div>

<h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line">IStudentRepository mapper = MapperUtil.getMapper(<span class="string">"config.xml"</span>, IStudentRepository<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">Student byIdLazy = mapper.findByIdLazy(<span class="number">2</span>);</span><br><span class="line"><span class="comment">//é€šè¿‡ ğŸ†” æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯ï¼Œåªéœ€è¦è·å– name å±æ€§ï¼Œä¸éœ€è¦è¿›è¡Œç¬¬äºŒæ­¥æ“ä½œã€‚</span></span><br><span class="line">System.out.println(byIdLazy.getName());</span><br><span class="line">System.out.println(<span class="string">"------------"</span>);</span><br><span class="line"><span class="comment">//éœ€è¦è·å–ç­çº§çš„åç§°ï¼Œéœ€è¦è¿›è¡Œä¸¤æ¬¡æŸ¥è¯¢æ“ä½œã€‚</span></span><br><span class="line">System.out.println(byIdLazy.getClasses().getName());</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">"============"</span>);</span><br><span class="line"></span><br><span class="line">IClassRepository mapper1 = MapperUtil.getMapper(<span class="string">"config.xml"</span>, IClassRepository<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">ClassesStu byIdLazy1 = mapper1.findByIdLazy(<span class="number">2</span>);</span><br><span class="line"><span class="comment">//é€šè¿‡ ğŸ†” æŸ¥è¯¢æœ¬å­£ä¿¡æ¯ï¼Œåªéœ€è¦è·å– name å±æ€§ï¼Œä¸éœ€è¦è¿›è¡Œç¬¬äºŒæ­¥æ“ä½œã€‚</span></span><br><span class="line">System.out.println(byIdLazy1.getName());</span><br><span class="line">System.out.println(<span class="string">"------------"</span>);</span><br><span class="line"><span class="comment">//éœ€è¦è·å–ç­çº§æ‰€æœ‰ğŸ‘©â€ğŸ“ğŸ‘¨â€ğŸ“ä¿¡æ¯ï¼Œéœ€è¦è¿›è¡Œä¸¤æ¬¡æŸ¥è¯¢æ“ä½œã€‚</span></span><br><span class="line">System.out.println(byIdLazy1.getStudents());</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>è¿è¡Œç»“æœ</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SHELL"><figure class="iseeu highlight /shell"><table><tr><td class="code"><pre><span class="line">Opening JDBC Connection</span><br><span class="line">Created connection 1267149311.</span><br><span class="line">Setting autocommit to false on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@4b8729ff]</span><br><span class="line">==&gt;  Preparing: select * from student where id=?</span><br><span class="line">==&gt; Parameters: 2(Integer)</span><br><span class="line">&lt;==    Columns: id, name, cid</span><br><span class="line">&lt;==        Row: 2, KawYang, 2</span><br><span class="line">&lt;==      Total: 1</span><br><span class="line">KawYang</span><br><span class="line">------------</span><br><span class="line">==&gt;  Preparing: select * from classes where id=?</span><br><span class="line">==&gt; Parameters: 2(Integer)</span><br><span class="line">&lt;==    Columns: id, name</span><br><span class="line">&lt;==        Row: 2, äºŒç­</span><br><span class="line">&lt;==      Total: 1</span><br><span class="line">äºŒç­</span><br><span class="line"></span><br><span class="line">============</span><br><span class="line"></span><br><span class="line">Opening JDBC Connection</span><br><span class="line">Created connection 1414549197.</span><br><span class="line">Setting autocommit to false on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54504ecd]</span><br><span class="line">==&gt;  Preparing: select * from classes where id=?</span><br><span class="line">==&gt; Parameters: 2(Integer)</span><br><span class="line">&lt;==    Columns: id, name</span><br><span class="line">&lt;==        Row: 2, äºŒç­</span><br><span class="line">&lt;==      Total: 1</span><br><span class="line">äºŒç­</span><br><span class="line">------------</span><br><span class="line">==&gt;  Preparing: select * from student where cid=?</span><br><span class="line">==&gt; Parameters: 2(Integer)</span><br><span class="line">&lt;==    Columns: id, name, cid</span><br><span class="line">&lt;==        Row: 2, KawYang, 2</span><br><span class="line">&lt;==        Row: 3, å¼ ä¸‰, 2</span><br><span class="line">&lt;==      Total: 2</span><br><span class="line">[Student(id=2, name=KawYang, classes=null), Student(id=3, name=å¼ ä¸‰, classes=null)]</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure></div>

<p>âš ï¸ : ç”±äº MyBatis é»˜è®¤å¼€å¯ä¸€çº§ç¼“å­˜ï¼Œæ‰€ä»¥åœ¨ç¬¬äºŒæ­¥æŸ¥è¯¢æ—¶ï¼Œåªæ‰§è¡Œäº†ç¬¬äºŒæ¡SQLè¯­å¥ã€‚</p>
]]></content>
      <categories>
        <category>æ¡†æ¶</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
        <tag>SQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatis-æ¨¡ç³ŠæŸ¥è¯¢&amp;åŠ¨æ€SQL</title>
    <url>/kawyang/5882fb3c.html</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡è®²è¿°äº†æ¨¡ç³ŠæŸ¥è¯¢çš„æ“ä½œæ–¹æ³•ï¼Œé…ç½®å®ä½“ç±»å…¨å±€è·¯å¾„æ–¹æ³•ç­‰å†…å®¹ï¼Œä¸»è¦å¯¹ <code>MyBatis</code> çš„åŠ¨æ€SQLæŸ¥è¯¢æ–¹å¼è¿›è¡Œäº†ç›¸å…³æ€»ç»“ã€‚</p>
</blockquote>
<a id="more"></a>

<h2 id="æ¨¡ç³ŠæŸ¥è¯¢"><a href="#æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="æ¨¡ç³ŠæŸ¥è¯¢"></a>æ¨¡ç³ŠæŸ¥è¯¢</h2><ul>
<li>#{} sqlè¯­å¥å ä½ç¬¦</li>
<li>${} sqlè¯­å¥æ‹¼æ¥</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">name</span> <span class="keyword">like</span> <span class="comment">#&#123;data&#125;;</span></span><br><span class="line"><span class="comment">-- =&gt; select * from student where name like ?;</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">name</span> <span class="keyword">like</span> <span class="string">'%$&#123;data&#125;%'</span>; </span><br><span class="line"><span class="comment">-- =&gt; select * from student where name like '%data%';</span></span><br></pre></td></tr></table></figure></div>

<h2 id="é…ç½®å®ä½“ç±»è·¯å¾„-åˆ«å"><a href="#é…ç½®å®ä½“ç±»è·¯å¾„-åˆ«å" class="headerlink" title="é…ç½®å®ä½“ç±»è·¯å¾„ (åˆ«å)"></a>é…ç½®å®ä½“ç±»è·¯å¾„ (åˆ«å)</h2><p>åœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--  åˆ«åè®¾ç½®ï¼Œæ”¾åœ¨settingsæ ‡ç­¾ä¹‹ä¸‹ï¼Œenvironment æ ‡ç­¾ä¹‹å‰  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- å•ä¸ªåˆ«åé…ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">"student"</span> <span class="attr">type</span>=<span class="string">"com.kawyang.entity.Student"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--   æ‰¹é‡åˆ«åï¼Œæ‰«æåŒ…å†…æ‰€æœ‰å†…å®¹ï¼Œåˆ«åä¸ºç±»å(é¦–å­—æ¯å¤§å°å†™éƒ½å¯ä»¥)     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.kawyang.entity"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<blockquote>
<p>é…ç½®æ–‡ä»¶ä¹¦å†™é¡ºåº<br>properties?,settings?,typeAliases?,typeHandlers?,objectFactory?,<br>objectWrapperFactory?,plugins?,environments?,databaseIdProvider?,mappers?</p>
</blockquote>
<h2 id="åŠ¨æ€SQL"><a href="#åŠ¨æ€SQL" class="headerlink" title="åŠ¨æ€SQL"></a>åŠ¨æ€SQL</h2><h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><blockquote>
<p>é€šè¿‡ if æ ‡ç­¾å¯ä»¥åˆ¤æ–­æ˜¯å¦åŒ…å«æŸ¥è¯¢çš„å­—æ®µ</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findByStudent"</span> <span class="attr">parameterType</span>=<span class="string">"student"</span> <span class="attr">resultType</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">        select * from student where 1=1</span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"name != null and name != ''"</span>&gt;</span></span><br><span class="line">            and name like #&#123;name&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"age != -1"</span>&gt;</span></span><br><span class="line">            and age=#&#123;age&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h3 id="where"><a href="#where" class="headerlink" title="where"></a>where</h3><blockquote>
<p>é€šè¿‡ where æ ‡ç­¾å¯ä»¥è§£å†³ä»¥ä¸Š 1=1 çš„å¤šä½™å†…å®¹  </p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findByStudent"</span> <span class="attr">parameterType</span>=<span class="string">"student"</span> <span class="attr">resultType</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">        select * from student</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"name != null and name != ''"</span>&gt;</span></span><br><span class="line">	            and name like #&#123;name&#125;</span><br><span class="line">	        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"age != -1"</span>&gt;</span></span><br><span class="line">	            and age=#&#123;age&#125;</span><br><span class="line">	        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<p>where ä¼šè‡ªåŠ¨åˆ¤æ–­ç¬¬ä¸€æ¡åˆ¤æ–­æ¡ä»¶ï¼Œå¹¶å°† and åˆ é™¤</p>
<h3 id="foreach"><a href="#foreach" class="headerlink" title="foreach"></a>foreach</h3><p>select * from student where id in (1,2,3);</p>
<p>åç«¯ä¼ é€’çš„å‚æ•°ä¸º Integer çš„ é›†åˆ<br>éœ€è¦å¯¹è¯¥é›†åˆè¿›è¡Œå°è£…</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListIds</span> <span class="keyword">extends</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> List&lt;Integer&gt; listIds;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·åœ¨ id çš„é›†åˆä¹‹ä¸­ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findInIds"</span> <span class="attr">resultType</span>=<span class="string">"student"</span> <span class="attr">parameterType</span>=<span class="string">"ListIds"</span>&gt;</span> </span><br><span class="line"><span class="comment">&lt;!--select * from student where id in (1,2,3);--&gt;</span></span><br><span class="line">	select * from student</span><br><span class="line">	<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"ids != null and ids.size() &gt; 0"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"student"</span> <span class="attr">open</span>=<span class="string">"id in ( "</span> <span class="attr">close</span>=<span class="string">")"</span> <span class="attr">separator</span>=<span class="string">","</span> <span class="attr">item</span>=<span class="string">"id"</span> &gt;</span></span><br><span class="line">				#&#123;id&#125;</span><br><span class="line">			<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findByIds"</span> <span class="attr">resultType</span>=<span class="string">"com.kawyang.entity.Student"</span> <span class="attr">parameterType</span>=<span class="string">"com.kawyang.entity.ListIds"</span>&gt;</span></span><br><span class="line">        select * from student</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">			foreach </span></span><br><span class="line"><span class="comment">			collection="éœ€è¦éå†çš„å…ƒç´ " </span></span><br><span class="line"><span class="comment">			open="å…ƒç´ ä¹‹å‰çš„éƒ¨åˆ†"</span></span><br><span class="line"><span class="comment">			close="ä¹‹åéƒ¨åˆ†" </span></span><br><span class="line"><span class="comment">			separator="åˆ†å‰²æ–¹å¼" </span></span><br><span class="line"><span class="comment">			item="å±æ€§å" &lt;/foreach&gt;  --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"ids"</span>  <span class="attr">open</span>=<span class="string">"id in ( "</span> <span class="attr">close</span>=<span class="string">")"</span> <span class="attr">separator</span>=<span class="string">","</span> <span class="attr">item</span>=<span class="string">"id"</span> &gt;</span></span><br><span class="line">                #&#123;id&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></div>


<h3 id="choose"><a href="#choose" class="headerlink" title="choose"></a>choose</h3><p>choose æ ‡ç­¾ï¼Œç±»ä¼¼ java ä¸­çš„ <code>switch-case-default</code> ç»“æ„ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findByStu"</span> <span class="attr">parameterType</span>=<span class="string">"com.item.entity.Student"</span> &gt;</span></span><br><span class="line">    select * from student</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"id != 0"</span>&gt;</span></span><br><span class="line">                id = #&#123;id&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"name != null"</span>&gt;</span></span><br><span class="line">                name=#&#123;name&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h3 id="sql"><a href="#sql" class="headerlink" title="sql"></a>sql</h3><p>ä½¿ç”¨ sql æ ‡ç­¾ å°† ä½¿ç”¨æ¬¡æ•°è¾ƒå¤šçš„sqlè¯­å¥ç”¨sqlğŸ·ï¸è¿›è¡Œå®šä¹‰ï¼Œä½¿ç”¨ includeğŸ·ï¸å¼•å…¥åˆ°çœŸæ­£çš„æŸ¥è¯¢è¯­å¥ä¸­ï¼Œä½¿ç”¨æ–¹ä¾¿ã€‚<br>ä¾‹å­ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"selectAll"</span> &gt;</span></span><br><span class="line">    select * from student</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findByStudent"</span> <span class="attr">parameterType</span>=<span class="string">"com.kawyang.entity.Student"</span> <span class="attr">resultType</span>=<span class="string">"com.kawyang.entity.Student"</span> &gt;</span></span><br><span class="line">--         select * from student</span><br><span class="line"><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"selectAll"</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"id != 0"</span>&gt;</span></span><br><span class="line">            id=#&#123;id&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"name != null"</span>&gt;</span></span><br><span class="line">            name=#&#123;name&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h3 id="æ³¨è§£å½¢å¼ä½¿ç”¨åŠ¨æ€SQL-å¾…è¡¥å……"><a href="#æ³¨è§£å½¢å¼ä½¿ç”¨åŠ¨æ€SQL-å¾…è¡¥å……" class="headerlink" title="æ³¨è§£å½¢å¼ä½¿ç”¨åŠ¨æ€SQL(å¾…è¡¥å……)"></a>æ³¨è§£å½¢å¼ä½¿ç”¨åŠ¨æ€SQL(å¾…è¡¥å……)</h3><p>æ·»åŠ   <code>&lt;script&gt;</code> æ ‡ç­¾ï¼Œå³å¯ä½¿ç”¨ xml ä¸­å½¢å¼è¿›è¡Œé…ç½®ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Select</span>(<span class="string">"&lt;script&gt;"</span> +</span><br><span class="line">        <span class="string">"select * from student"</span> +</span><br><span class="line">        <span class="string">"        &lt;where&gt;"</span> +</span><br><span class="line">        <span class="string">"            &lt;if test=\"ids != null and ids.size&gt;0\"&gt;"</span> +</span><br><span class="line">        <span class="string">"                &lt;foreach collection=\"ids\"  open=\"id in ( \" close=\")\" separator=\",\" item=\"id\" &gt;"</span> +</span><br><span class="line">        <span class="string">"                    #&#123;id&#125;"</span> +</span><br><span class="line">        <span class="string">"                &lt;/foreach&gt;"</span> +</span><br><span class="line">        <span class="string">"            &lt;/if&gt;"</span> +</span><br><span class="line">        <span class="string">"        &lt;/where&gt; "</span> +</span><br><span class="line">        <span class="string">"&lt;/script&gt;"</span>)</span><br><span class="line"><span class="function">List&lt;Student&gt; <span class="title">findByIds</span><span class="params">(ListIds listIds)</span></span>;</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>æ¡†æ¶</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
        <tag>SQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatis-çº§è”æ“ä½œ</title>
    <url>/kawyang/fb315360.html</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡ä»‹ç»äº†<code>MyBatis</code>çš„çº§è”æ“ä½œï¼Œé€šè¿‡æŸ¥è¯¢å¤šå¼ è¡¨å®Œæˆæ•°æ®çš„è·å–ï¼Œå…³é”®åœ¨äºç»ƒä¹  <code>resultMap</code>ã€<code>association</code>ã€<code>collection</code> æ ‡ç­¾ã€‚</p>
</blockquote>
<a id="more"></a>


<h1 id="MyBatis-çº§è”æ“ä½œ"><a href="#MyBatis-çº§è”æ“ä½œ" class="headerlink" title="MyBatis çº§è”æ“ä½œ"></a>MyBatis çº§è”æ“ä½œ</h1><p><a href="http://c.biancheng.net/view/4367.html" target="_blank" rel="noopener">è¯¦ç»†æ•™ç¨‹ç½‘ç»œèµ„æº</a></p>
<p><a href="https://github.com/LYgithub/IDEAProjects/tree/master/MyBatisNodeDemo2" target="_blank" rel="noopener">é¡¹ç›®</a></p>
<h2 id="ä¸€å¯¹ä¸€-student-gt-class"><a href="#ä¸€å¯¹ä¸€-student-gt-class" class="headerlink" title="ä¸€å¯¹ä¸€ (student -&gt; class)"></a>ä¸€å¯¹ä¸€ (student -&gt; class)</h2><p>student åŒ…å«ä¸ªäººåŸºæœ¬ä¿¡æ¯å’Œå†…åµŒå¯¹è±¡ classesã€‚<br>åœ¨æŸ¥è¯¢studentæ—¶ï¼Œéœ€è¦è”åˆ studentè¡¨å’Œclassesè¡¨è¿›è¡ŒæŸ¥è¯¢ã€‚</p>
<h3 id="æ•°æ®è¡¨"><a href="#æ•°æ®è¡¨" class="headerlink" title="æ•°æ®è¡¨"></a>æ•°æ®è¡¨</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> classes(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> primary <span class="keyword">key</span>,</span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes (<span class="keyword">id</span>,<span class="keyword">name</span>) <span class="keyword">values</span> (<span class="number">1</span>,<span class="string">"ä¸€ç­"</span>),(<span class="number">2</span>,<span class="string">"äºŒç­"</span>),(<span class="number">3</span>,<span class="string">"ä¸‰ç­"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">10</span>),</span><br><span class="line">    cid <span class="built_in">int</span>,</span><br><span class="line">    <span class="keyword">foreign</span> <span class="keyword">key</span> (cid) <span class="keyword">references</span> classes(<span class="keyword">id</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student (<span class="keyword">id</span>, <span class="keyword">name</span>, cid) </span><br><span class="line">	<span class="keyword">values</span> (<span class="number">1</span>,<span class="string">"KawYang"</span>,<span class="number">1</span>),(<span class="number">2</span>,<span class="string">"KawYang"</span>,<span class="number">2</span>),(<span class="number">3</span>,<span class="string">"å¼ ä¸‰"</span>,<span class="number">2</span>),(<span class="number">4</span>,<span class="string">"æå››"</span>,<span class="number">3</span>),(<span class="number">5</span>,<span class="string">"Tom"</span>,<span class="number">3</span>),(<span class="number">6</span>,<span class="string">"Jary"</span>,<span class="number">3</span>);</span><br></pre></td></tr></table></figure></div>

<h3 id="å®ä½“ç±»"><a href="#å®ä½“ç±»" class="headerlink" title="å®ä½“ç±»"></a>å®ä½“ç±»</h3><ul>
<li>Classesç±»å¯¹è±¡</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Classes</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>Studentç±»å¯¹è±¡</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> Classes classes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="Repository"><a href="#Repository" class="headerlink" title="Repository"></a>Repository</h3><p>ç¼–å†™æ•°æ®åº“æ“ä½œçš„æ¥å£</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IStudentRepository</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * find by id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> student</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">Student <span class="title">findById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * find all</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> student list</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;Student&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="Mapper"><a href="#Mapper" class="headerlink" title="Mapper"></a>Mapper</h3><p>mapperğŸ·ï¸ : <code>namespace</code> å±æ€§æ˜ å°„åˆ° <code>student</code> çš„æ“ä½œæ¥å£ã€‚<br>resultMapğŸ·ï¸ : é…ç½®ç±»å¯¹è±¡ â€“&gt; åœ¨ <code>select</code> æ ‡ç­¾ä¸­ï¼Œä½¿ç”¨ <code>resultMap</code> å±æ€§è¿›è¡Œæ˜ å°„ã€‚<br>associationğŸ·ï¸ : æ³¨å…¥å†…åµŒå¯¹è±¡ï¼Œ<code>javaType</code> å°†å†…åµŒå¯¹è±¡æ˜ å°„åˆ°å®ä½“ç±»ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.kawyang.repository.IStudentRepository"</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"student"</span> <span class="attr">type</span>=<span class="string">"com.kawyang.entity.Student"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"sid"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"sname"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"classes"</span> <span class="attr">ofType</span>=<span class="string">"com.kawyang.entity.Classes"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"cid"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"cname"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findById"</span> <span class="attr">resultMap</span>=<span class="string">"student"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span>&gt;</span></span><br><span class="line">        select s.id as sid,s.name as sname, c.id as cid, c.name as cname</span><br><span class="line">        from student s,classes c</span><br><span class="line">        where s.cid=c.id and s.id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">        select s.id as sid,s.name as sname, c.id as cid, c.name as cname</span><br><span class="line">        from student s,classes c</span><br><span class="line">        where s.cid=c.id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div>


<h2 id="ä¸€å¯¹å¤š-class-gt-studentes"><a href="#ä¸€å¯¹å¤š-class-gt-studentes" class="headerlink" title="ä¸€å¯¹å¤š (class -&gt; studentes)"></a>ä¸€å¯¹å¤š (class -&gt; studentes)</h2><p>ä¸€ä¸ªç­çº§å«æœ‰å¤šä¸ªğŸ‘¨â€ğŸ“ï¼Œé€šè¿‡æŸ¥è¯¢ç­çº§ä¿¡æ¯ï¼Œèƒ½å¤Ÿå°†ç­çº§ä¸­çš„æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯æŸ¥è¯¢å‡ºæ¥<br>éœ€è¦è”åˆ classesç±»å’Œstudentè¿›è¡ŒæŸ¥è¯¢ã€‚</p>
<h3 id="æ•°æ®è¡¨-1"><a href="#æ•°æ®è¡¨-1" class="headerlink" title="æ•°æ®è¡¨"></a>æ•°æ®è¡¨</h3><p>åŒä¸Š</p>
<h3 id="å®ä½“ç±»-1"><a href="#å®ä½“ç±»-1" class="headerlink" title="å®ä½“ç±»"></a>å®ä½“ç±»</h3><ul>
<li>ClassesStu<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassesStu</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line">	String name;</span><br><span class="line">	List&lt;Student&gt; students;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

</li>
</ul>
<h3 id="Repository-1"><a href="#Repository-1" class="headerlink" title="Repository"></a>Repository</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IClassesStuRepository</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * find classesStu by id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> classesStu</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">ClassesStu <span class="title">findById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * find all classesStu</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> classesStu list</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;ClassesStu&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="Mapper-1"><a href="#Mapper-1" class="headerlink" title="Mapper"></a>Mapper</h3><p>é…ç½®æ–‡ä»¶resultMap</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"classesStu"</span> <span class="attr">type</span>=<span class="string">"com.kawyang.entity.ClassesStu"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"cid"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"cname"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"students"</span> <span class="attr">ofType</span>=<span class="string">"com.kawyang.entity.Student"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"sid"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"sname"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>collectionğŸ·ï¸ : å°†æŸ¥è¯¢çš„ <code>cid &amp; cname</code> ç›¸åŒçš„ç»“æœï¼Œå°† sid å’Œ sname å°è£…æˆ <code>ofType</code> æŒ‡å®šç±»å‹çš„å¯¹è±¡ï¼Œå¹¶å°†å¤šä¸ªå¯¹è±¡ä»¥é›†åˆçš„æ–¹å¼è¿”å›ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SHELL"><figure class="iseeu highlight /shell"><table><tr><td class="code"><pre><span class="line">==&gt;  Preparing: select c.id as cid, c.name as cname, s.id as sid, s.name as sname from student s, classes c where c.id=s.cid</span><br><span class="line">==&gt; Parameters: </span><br><span class="line">&lt;==    Columns: cid, cname, sid, sname</span><br><span class="line">&lt;==        Row: 1, ä¸€ç­, 1, KawYang</span><br><span class="line">&lt;==        Row: 2, äºŒç­, 2, KawYang</span><br><span class="line">&lt;==        Row: 2, äºŒç­, 3, å¼ ä¸‰</span><br><span class="line">&lt;==        Row: 3, ä¸‰ç­, 4, æå››</span><br><span class="line">&lt;==        Row: 3, ä¸‰ç­, 5, Tom</span><br><span class="line">&lt;==        Row: 3, ä¸‰ç­, 6, Jary</span><br><span class="line">&lt;==      Total: 6</span><br></pre></td></tr></table></figure></div>

<h2 id="å¤šå¯¹å¤š-goods-lt-gt-consumers"><a href="#å¤šå¯¹å¤š-goods-lt-gt-consumers" class="headerlink" title="å¤šå¯¹å¤š (goods &lt;-&gt; consumers)"></a>å¤šå¯¹å¤š (goods &lt;-&gt; consumers)</h2><pre><code>ä¸€ç§å•†å“å¯ä»¥è¢«å¤šä¸ªæ¶ˆè´¹è€…è´­ä¹°
ä¸€ä¸ªæ¶ˆè´¹è€…å¯ä»¥è´­ä¹°å¤šä¸ªå•†å“
å•†å“ä¸æ¶ˆè´¹è€…äº‹å¤šå¯¹å¤šçš„å…³ç³»ã€‚</code></pre><h3 id="æ•°æ®è¡¨-2"><a href="#æ•°æ®è¡¨-2" class="headerlink" title="æ•°æ®è¡¨"></a>æ•°æ®è¡¨</h3><p>good : å•†å“ä¿¡æ¯è¡¨<br>consumer : æ¶ˆè´¹è€…ä¿¡æ¯è¡¨<br>con_good : ä¸­é—´è¡¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> good(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> <span class="keyword">not</span> <span class="literal">null</span> ,</span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">30</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> good (<span class="keyword">id</span>, <span class="keyword">name</span>) <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="string">"ç”µè§†"</span>),(<span class="number">2</span>, <span class="string">"ç”µå†°ç®±"</span>),(<span class="number">3</span>, <span class="string">"æ´—è¡£æœº"</span>),(<span class="number">4</span>,<span class="string">"ç¬”è®°æœ¬"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> consumer(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">30</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> consumer (<span class="keyword">id</span>, <span class="keyword">name</span>) <span class="keyword">VALUES</span>  (<span class="number">1</span>,<span class="string">"KawYang"</span>),(<span class="number">2</span>,<span class="string">"æå››"</span>),(<span class="number">3</span>,<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> con_good(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> <span class="keyword">not</span> <span class="literal">null</span> ,</span><br><span class="line">    gid <span class="built_in">int</span>,</span><br><span class="line">    cid <span class="built_in">int</span>,</span><br><span class="line">    <span class="keyword">foreign</span> <span class="keyword">key</span> (gid) <span class="keyword">references</span> good(<span class="keyword">id</span>),</span><br><span class="line">    <span class="keyword">foreign</span> <span class="keyword">key</span> (cid) <span class="keyword">references</span> consumer(<span class="keyword">id</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> con_good (<span class="keyword">id</span>, gid, cid) <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>),(<span class="number">2</span>,<span class="number">3</span>,<span class="number">2</span>),(<span class="number">3</span>,<span class="number">1</span>,<span class="number">3</span>),(<span class="number">4</span>,<span class="number">2</span>,<span class="number">1</span>),(<span class="number">5</span>,<span class="number">4</span>,<span class="number">2</span>),(<span class="number">6</span>,<span class="number">3</span>,<span class="number">3</span>);</span><br></pre></td></tr></table></figure></div>

<h3 id="Mapper-2"><a href="#Mapper-2" class="headerlink" title="Mapper"></a>Mapper</h3><pre><code>å¤šå¯¹å¤šç›¸å½“äºä¸¤ä¸ªä¸€å¯¹å¤šçš„å…³ç³»ï¼Œéœ€è¦é…ç½®ä¸¤ä¸ªxmlæ–‡ä»¶</code></pre><ul>
<li><p>IGoodMapper</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.kawyang.repository.IGoodRepository"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"good"</span> <span class="attr">type</span>=<span class="string">"com.kawyang.entity.Good"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"gid"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"gname"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"consumers"</span> <span class="attr">ofType</span>=<span class="string">"com.kawyang.entity.Consumer"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"cid"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"cname"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"good"</span> &gt;</span></span><br><span class="line">        select g.id as gid,g.name as gname, c.id as cid, c.name as cname</span><br><span class="line">        from good g,consumer c,con_good m</span><br><span class="line">        where g.id=m.gid and m.cid=c.id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findById"</span> <span class="attr">resultMap</span>=<span class="string">"good"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span>&gt;</span></span><br><span class="line">        select c.id as cid,c.name as cname,g.id as gid,g.name as gname</span><br><span class="line">        from Good as g,Consumer as c, Con_good m</span><br><span class="line">        where c.id = m.cid and g.id=m.gid and g.id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>IConsumerMapper</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.kawyang.repository.IConsumerRepository"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"consumer"</span> <span class="attr">type</span>=<span class="string">"com.kawyang.entity.Consumer"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"name"</span> <span class="attr">property</span>=<span class="string">"name"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"goods"</span> <span class="attr">ofType</span>=<span class="string">"com.kawyang.entity.Good"</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"gid"</span> <span class="attr">property</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"gname"</span> <span class="attr">property</span>=<span class="string">"name"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"consumer"</span> &gt;</span></span><br><span class="line">        select c.id as id,c.name as name,g.id as gid,g.name as gname</span><br><span class="line">        from Good as g,Consumer as c, Con_good m</span><br><span class="line">        where c.id = m.cid and g.id=m.gid;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findById"</span> <span class="attr">resultMap</span>=<span class="string">"consumer"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span>&gt;</span></span><br><span class="line">        select c.id as id,c.name as name,g.id as gid,g.name as gname</span><br><span class="line">        from Good as g,Consumer as c, Con_good m</span><br><span class="line">        where c.id = m.cid and g.id=m.gid and g.id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div>






</li>
</ul>
]]></content>
      <categories>
        <category>æ¡†æ¶</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
        <tag>SQL</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo-abbrlink-undefined</title>
    <url>/kawyang/b3b09752.html</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡è§£å†³çš„é—®é¢˜ï¼š å®‰è£… <code>hexo-abbrlink</code> åï¼Œå¹¶é…ç½® <code>abbrlink</code> è¿æ¥ï¼Œå‡ºç° <code>undefined</code>é—®é¢˜ï¼Œæ‰€æœ‰æ–‡ç« æ ‡é¢˜éƒ½æŒ‡å‘åŒä¸€ç¯‡æ–‡ç« ï¼Œå¹¶ä¸”æ— æ³•é‡æ–°å¯åŠ¨ hexo æœåŠ¡ã€‚</p>
</blockquote>
<a id="more"></a>

<h2 id="é”™è¯¯ä¿¡æ¯Error"><a href="#é”™è¯¯ä¿¡æ¯Error" class="headerlink" title="é”™è¯¯ä¿¡æ¯Error"></a>é”™è¯¯ä¿¡æ¯Error</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line">&gt; hexo s</span><br><span class="line">INFO  Start processing</span><br><span class="line">FATAL Something's wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html</span><br><span class="line">TypeError: Cannot read property 'enable' of undefined</span><br><span class="line">    at Hexo.logic (/Users/mac/blog/node_modules/hexo-abbrlink/lib/logic.js:59:44)</span><br><span class="line">    at Hexo.tryCatcher (/Users/mac/blog/node_modules/bluebird/js/release/util.js:16:23)</span><br><span class="line">    at Hexo.<span class="tag">&lt;<span class="name">anonymous</span>&gt;</span> (/Users/mac/blog/node_modules/bluebird/js/release/method.js:15:34)</span><br><span class="line">    at /Users/mac/blog/node_modules/hexo/lib/extend/filter.js:62:52</span><br><span class="line">    at tryCatcher (/Users/mac/blog/node_modules/bluebird/js/release/util.js:16:23)</span><br><span class="line">    at Object.gotValue (/Users/mac/blog/node_modules/bluebird/js/release/reduce.js:166:18)</span><br><span class="line">    at Object.gotAccum (/Users/mac/blog/node_modules/bluebird/js/release/reduce.js:155:25)</span><br><span class="line">    at Object.tryCatcher (/Users/mac/blog/node_modules/bluebird/js/release/util.js:16:23)</span><br><span class="line">    at Promise._settlePromiseFromHandler (/Users/mac/blog/node_modules/bluebird/js/release/promise.js:547:31)</span><br><span class="line">    at Promise._settlePromise (/Users/mac/blog/node_modules/bluebird/js/release/promise.js:604:18)</span><br><span class="line">    at Promise._settlePromise0 (/Users/mac/blog/node_modules/bluebird/js/release/promise.js:649:10)</span><br><span class="line">    at Promise._settlePromises (/Users/mac/blog/node_modules/bluebird/js/release/promise.js:729:18)</span><br><span class="line">    at _drainQueueStep (/Users/mac/blog/node_modules/bluebird/js/release/async.js:93:12)</span><br><span class="line">    at _drainQueue (/Users/mac/blog/node_modules/bluebird/js/release/async.js:86:9)</span><br><span class="line">    at Async._drainQueues (/Users/mac/blog/node_modules/bluebird/js/release/async.js:102:5)</span><br><span class="line">    at Immediate.Async.drainQueues [as _onImmediate] (/Users/mac/blog/node_modules/bluebird/js/release/async.js:15:14)</span><br><span class="line">    at processImmediate (internal/timers.js:456:21)</span><br></pre></td></tr></table></figure></div>

<h2 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h2><p>æ ¹æ®é”™è¯¯æç¤ºï¼Œæ‰¾åˆ°<code>/Users/mac/blog/node_modules/hexo-abbrlink/lib/logic.js:59:44</code> 59 è¡Œï¼Œå¦‚å›¾<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vS2F3WWFuZy9pbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDcwNzAwMDYxNy5wbmc?x-oss-process=image/format,png" alt=""><br>å‘ç°æç¤º <code>abbrlink.auto_category.enable</code> æœªå®šä¹‰ï¼Œå› æ­¤åœ¨æ ¹ç›®å½•é…ç½®æ–‡ä»¶å†…æ·»åŠ è¯¥å±æ€§å³å¯è§£å†³ã€‚<br>æœ€ç»ˆ <code>abbrlink</code> é…ç½®å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>ä¿®æ”¹ abbrlink é…ç½®ï¼š</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line">#permalink: :year/:month/:day/:title/</span><br><span class="line">permalink: kawyang/:abbrlink.html</span><br><span class="line">abbrlink: </span><br><span class="line">  auto_category: </span><br><span class="line">    enable: false</span><br><span class="line">  alg: crc32</span><br><span class="line">  rep: hex</span><br></pre></td></tr></table></figure></div>

<h2 id="enable-å·®åˆ«"><a href="#enable-å·®åˆ«" class="headerlink" title="enable å·®åˆ«"></a>enable å·®åˆ«</h2><ul>
<li><p>true : å«æœ‰æç¤º, å¦‚å›¾æ‰€ç¤º<br><img src="https://gitee.com/KawYang/image/raw/master/img/20200707001755.png" alt=""></p>
</li>
<li><p>false : æ²¡æœ‰æç¤ºï¼Œå¦‚å›¾æ‰€ç¤º</p>
</li>
</ul>
<p><img src="https://gitee.com/KawYang/image/raw/master/img/20200707001913.png" alt=""></p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>Error</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring-IoC(æ§åˆ¶åè½¬)&amp;DI(ä¾èµ–æ³¨å…¥)</title>
    <url>/kawyang/6c92115f.html</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡ä¸»è¦è®°å½•äº† <code>Spring</code> æ¡†æ¶çš„ <code>IoC &amp; ID</code> åŸºæœ¬å†…å®¹ã€‚</p>
</blockquote>
<a id="more"></a>

<h2 id="Springæ¡†æ¶ä¸¤å¤§æ ¸å¿ƒæœºåˆ¶"><a href="#Springæ¡†æ¶ä¸¤å¤§æ ¸å¿ƒæœºåˆ¶" class="headerlink" title="Springæ¡†æ¶ä¸¤å¤§æ ¸å¿ƒæœºåˆ¶"></a>Springæ¡†æ¶ä¸¤å¤§æ ¸å¿ƒæœºåˆ¶</h2><ul>
<li>IoC ï¼ˆæ§åˆ¶ç¿»è½¬) / DI ï¼ˆä¾èµ–æ³¨å…¥)</li>
<li>AOP  (é¢å‘åˆ‡é¢ç¼–ç¨‹)</li>
</ul>
<p>ä¼ä¸šçº§å¼€å‘æ¡†æ¶ï¼Œæ˜¯è½¯ä»¶è®¾è®¡å±‚é¢çš„æ¡†æ¶ï¼Œä¼˜åŠ¿åœ¨äºå¯ä»¥å°†åº”ç”¨ç¨‹åºè¿›è¡Œåˆ†å±‚</p>
<p>MVC ï¼šStruts2 ã€Spring MVC</p>
<p>ORMapping ï¼š Hibernateã€MyBatisã€Spring Data</p>
<p><img src="https://gitee.com/KawYang/image/raw/master/img/image-20200615165841634.png" alt="image-20200615165841634"></p>
<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>å®¹æ˜“ä¸ç¬¬ä¸‰æ–¹æ¡†æ¶æ•´åˆ</li>
<li>é›†ä¸­ç®¡ç†</li>
</ol>
<h2 id="IoC"><a href="#IoC" class="headerlink" title="IoC"></a>IoC</h2><blockquote>
<p>IoC (æ§åˆ¶åè½¬) : å°†å¯¹è±¡ä½¿ç”¨äº¤ç»™ Spring è¿›è¡Œç®¡ç†ã€‚å³åˆ›å»ºå¯¹è±¡ç”±IoCå®¹å™¨åˆ›å»ºã€‚</p>
</blockquote>
<h3 id="å…¥é—¨"><a href="#å…¥é—¨" class="headerlink" title="å…¥é—¨"></a>å…¥é—¨</h3><p>æ­¥éª¤ï¼š</p>
<ul>
<li>åˆ›å»ºmavené¡¹ç›®ï¼Œæ·»åŠ pomä¾èµ–</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.3.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- ç®€åŒ–å®ä½“ç±»ä»£ç å¼€å‘ @Data è‡ªåŠ¨ç”Ÿæˆ getã€setæ–¹æ³•  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>åˆ›å»ºå®ä½“ç±»</li>
</ul>
<p>ä¼ ç»Ÿæ–¹å¼ï¼šæ‰‹åŠ¨ new æ–¹å¼åˆ›å»ºå¯¹è±¡</p>
<p>IoCæ–¹å¼ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ç®¡ç†å¯¹è±¡ï¼Œxmlæ ¼å¼è‡ªå®šä¹‰æ–‡ä»¶åï¼Œ<code>resources</code> ä¸‹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"student"</span> <span class="attr">class</span>=<span class="string">"com.item.Student"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"å¼ ä¸‰"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"12"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>ä½¿ç”¨æ–¹æ³•</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åŠ è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line">ApplicationContext applicationContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"iocconfig.xml"</span>);</span><br><span class="line">Object student = applicationContext.getBean(<span class="string">"student"</span>);</span><br><span class="line">System.out.println(student);</span><br></pre></td></tr></table></figure></div>

<h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><p>é€šè¿‡é…ç½®Beanæ ‡ç­¾è¿›è¡Œç®¡ç†</p>
<ul>
<li><code>id</code>:  å¯¹è±¡å, <code>getBean</code> çš„ æŸ¥æ‰¾å‚æ•°ã€‚</li>
<li><code>class</code> ï¼š å¯¹è±¡æ¨¡ç‰ˆç±» <code>å¿…é¡»æœ‰æ— å‚æ„é€ </code> ï¼Œé€šè¿‡åå°„æœºåˆ¶åˆ›å»ºå¯¹è±¡ï¼Œ åå°„æœºåˆ¶æ˜¯è°ƒç”¨æ— å‚æ„é€ åˆ›å»º</li>
<li><code>property</code> ï¼šå®Œæˆå±æ€§èµ‹å€¼<ul>
<li><code>name</code> ï¼š å±æ€§å</li>
<li><code>value</code> ï¼š å±æ€§å€¼ String ç›´æ¥èµ‹å€¼ï¼Œå…¶ä»–çš„å¼•ç”¨ç±»å‹ï¼Œä¸èƒ½é€šè¿‡valueèµ‹å€¼ï¼Œ</li>
<li><code>ref</code>  : å°†IoCä¸­çš„å¦å¤–ä¸€ä¸ªBeanæ·»åŠ ï¼Œ<code>ä¾èµ–æ³¨å…¥</code></li>
</ul>
</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"student"</span> <span class="attr">class</span>=<span class="string">"com.item.Student"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"å¼ ä¸‰"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"12"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"classes"</span> <span class="attr">ref</span>=<span class="string">"classes"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"classes"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"ä¸€ç­"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="IoCåº•å±‚åŸç†"><a href="#IoCåº•å±‚åŸç†" class="headerlink" title="IoCåº•å±‚åŸç†"></a>IoCåº•å±‚åŸç†</h2><blockquote>
<p>è¯»å–é…ç½®æ–‡ä»¶ -&gt; è·å–å¯¹è±¡åˆ›å»ºä¿¡æ¯ -&gt; åå°„åˆ›å»ºå¯¹è±¡å¹¶å­˜å‚¨ -&gt; è·å–å¯¹è±¡</p>
</blockquote>
<ul>
<li>è¯»å–xmlï¼Œè§£æ</li>
<li>é€šè¿‡åå°„æœºåˆ¶å®ä¾‹åŒ–é…ç½®æ–‡ä»¶ä¸­æ‰€æœ‰çš„Bean</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.item.ioc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.dom4j.Document;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.Element;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.io.SAXReader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassPathXmlApplicationContext</span> <span class="keyword">implements</span> <span class="title">ApplicationContext</span></span>&#123;</span><br><span class="line">    <span class="comment">//å­˜å‚¨åˆ›å»ºçš„å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; ioc = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ClassPathXmlApplicationContext</span><span class="params">(String path)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        SAXReader reader = <span class="keyword">new</span> SAXReader();</span><br><span class="line">        Document read = reader.read(<span class="string">"./src/main/resources/"</span> + path);</span><br><span class="line">        <span class="comment">// è§£æ xml è·å–é…ç½®ä¿¡æ¯</span></span><br><span class="line">        Element rootElement = read.getRootElement();</span><br><span class="line">        Iterator iterator = rootElement.elementIterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext())&#123;</span><br><span class="line">        	<span class="comment">/** å¾ªç¯æ¯ä¸€ä¸ªç±»é…ç½®ä¿¡æ¯ */</span></span><br><span class="line">            Element element = (Element) iterator.next();</span><br><span class="line">            String id = element.attributeValue(<span class="string">"id"</span>);</span><br><span class="line">            String className = element.attributeValue(<span class="string">"class"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">            Class aClass = Class.forName(className);</span><br><span class="line">            Constructor constructor = aClass.getConstructor();</span><br><span class="line">            Object o = constructor.newInstance();</span><br><span class="line"></span><br><span class="line">            Iterator iterator1 = element.elementIterator();</span><br><span class="line">            <span class="keyword">while</span> (iterator1.hasNext())&#123;</span><br><span class="line">                Element next =(Element) iterator1.next();</span><br><span class="line">                System.out.println(<span class="string">"---------------"</span>);</span><br><span class="line">                String name = next.attributeValue(<span class="string">"name"</span>);</span><br><span class="line">                String value = next.attributeValue(<span class="string">"value"</span>);</span><br><span class="line"></span><br><span class="line">                String ref = next.attributeValue(<span class="string">"ref"</span>);</span><br><span class="line">                System.out.println(ref);</span><br><span class="line">                <span class="comment">//åŸºæœ¬å˜é‡èµ‹å€¼</span></span><br><span class="line">                <span class="keyword">if</span>(ref == <span class="keyword">null</span>)&#123;</span><br><span class="line">                    String mothedName = <span class="string">"set"</span> + name.substring(<span class="number">0</span>, <span class="number">1</span>).toUpperCase() + name.substring(<span class="number">1</span>);</span><br><span class="line">                    System.out.print(name+ <span class="string">"\t"</span> + value + <span class="string">"\t"</span>);</span><br><span class="line">                    Field field = aClass.getDeclaredField(name);</span><br><span class="line">                    System.out.println(field.getType().getName());</span><br><span class="line">                    Method method = aClass.getDeclaredMethod(mothedName, field.getType());</span><br><span class="line">                    Object v = <span class="keyword">null</span>;</span><br><span class="line">                    <span class="keyword">if</span>(field.getType().getName() == <span class="string">"int"</span>)&#123;</span><br><span class="line">                        v = Integer.parseInt(value);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(field.getType().getName() == <span class="string">"String"</span>)&#123;</span><br><span class="line">                        v = value;</span><br><span class="line">                    &#125;</span><br><span class="line">                    ....</span><br><span class="line">                    method.invoke(o, v);</span><br><span class="line"></span><br><span class="line">                &#125;<span class="keyword">else</span>&#123; <span class="comment">//æ³¨å…¥</span></span><br><span class="line">                    <span class="comment">//ç›´æ¥èµ‹å€¼Bean</span></span><br><span class="line"></span><br><span class="line">                    Object obj1 = ioc.get(<span class="string">"Classes"</span>);</span><br><span class="line">                    System.out.println(obj1);</span><br><span class="line"></span><br><span class="line">                    </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            ioc.put(id, o);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"============="</span>);</span><br><span class="line">        System.out.println(ioc);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getBean</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ioc.get(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="è¿è¡Œæ—¶ç±»è¿›è¡Œè·å–Bean"><a href="#è¿è¡Œæ—¶ç±»è¿›è¡Œè·å–Bean" class="headerlink" title="è¿è¡Œæ—¶ç±»è¿›è¡Œè·å–Bean"></a>è¿è¡Œæ—¶ç±»è¿›è¡Œè·å–Bean</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é€šè¿‡é…ç½®æ–‡ä»¶ ğŸ†” è¿›è¡Œè·å–</span></span><br><span class="line">Object student = applicationContext.getBean(<span class="string">"student"</span>);</span><br><span class="line"><span class="comment">//é€šè¿‡ è¿è¡Œæ—¶ç±» è·å–</span></span><br><span class="line">Student bean = applicationContext.getBean(Student<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">System.out.println(bean);</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>é…ç½®æ–‡ä»¶ä¸­åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ ,å¦‚ä¸‹æŠ›å¼‚å¸¸</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"classes"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"ä¸€ç­"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"classes2"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"ä¸€ç­"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="æœ‰å‚æ„é€ åˆ›å»º"><a href="#æœ‰å‚æ„é€ åˆ›å»º" class="headerlink" title="æœ‰å‚æ„é€ åˆ›å»º"></a>æœ‰å‚æ„é€ åˆ›å»º</h2><ul>
<li>åœ¨å®ä¾‹ä¸­åˆ›å»ºæœ‰å‚æ„é€ </li>
<li>åœ¨xmlä¸­é…ç½®</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"classes3"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  ä¸¤ç§è®¾ç½®å‚æ•°æ–¹å¼ã€‚--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"ä¸‰ç­"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"0"</span> <span class="attr">value</span>=<span class="string">"2"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="é›†åˆæ³¨å…¥"><a href="#é›†åˆæ³¨å…¥" class="headerlink" title="é›†åˆæ³¨å…¥"></a>é›†åˆæ³¨å…¥</h2><blockquote>
<p>ä½¿ç”¨ <code>list</code> æ ‡ç­¾ æ³¨å…¥ç±»å‹çš„é›†åˆå¯¹è±¡ã€‚</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"student"</span> <span class="attr">class</span>=<span class="string">"com.item.Student"</span> &gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"å¼ ä¸‰"</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"12"</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"classes_List"</span> &gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"classes"</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"classes2"</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"classes"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span> &gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"ä¸€ç­"</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"classes2"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span> &gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"ä¸€ç­"</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="Scope-ä½œç”¨åŸŸ"><a href="#Scope-ä½œç”¨åŸŸ" class="headerlink" title="Scope ä½œç”¨åŸŸ"></a>Scope ä½œç”¨åŸŸ</h2><p>Spring ç®¡ç†çš„beanæ˜¯æ ¹æ® <code>scope</code> æ¥ç”Ÿæˆçš„ï¼Œè¡¨ç¤ºbeançš„ä½œç”¨åŸŸ</p>
<ul>
<li>singletonï¼šå•ä¾‹æ¨¡å¼ï¼Œåœ¨åŠ è½½æ–‡ä»¶æ—¶åˆ›å»ºbeanï¼Œé€šè¿‡IoCå®¹å™¨è·å–çš„beanæ˜¯ <code>å”¯ä¸€</code> çš„ã€‚</li>
<li>prototypeï¼šåŸå‹æ¨¡å¼ï¼Œåœ¨è°ƒç”¨getBeanæ—¶åˆ›å»ºbeanå¯¹è±¡ï¼Œé€šè¿‡IoCå®¹å™¨è·å–çš„beanæ˜¯ <code>ä¸åŒ</code> çš„ã€‚</li>
<li>requestï¼šè¯·æ±‚ï¼Œè¡¨ç¤ºåœ¨ä¸€æ¬¡HTTPè¯·æ±‚å†…æœ‰æ•ˆã€‚</li>
<li>sessionï¼šä¼šè¯ï¼Œè¡¨ç¤ºåœ¨ä¸€ä¸ªç”¨æˆ·ä¼šè¯å†…æœ‰æ•ˆã€‚</li>
</ul>
<p>requestå’Œsessionåªæ˜¯ç”¨äºwebé¡¹ç›®ï¼Œå¤§å¤šæƒ…å†µä¸‹ç”¨å•ä¾‹å’ŒåŸå‹è¾ƒå¤š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"classes"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span> <span class="attr">scope</span>=<span class="string">"singleton"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"ä¸€ç­"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="Spring-çš„ç»§æ‰¿"><a href="#Spring-çš„ç»§æ‰¿" class="headerlink" title="Spring çš„ç»§æ‰¿"></a>Spring çš„ç»§æ‰¿</h2><blockquote>
<p>Java æ˜¯ç±»å±‚é¢çš„ç»§æ‰¿ï¼Œå­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„å†…éƒ¨ç»“æ„ä¿¡æ¯ã€‚<br>Spring æ˜¯å¯¹è±¡å±‚é¢çš„ç»§æ‰¿ï¼Œå­å¯¹è±¡å¯ä»¥ç»§æ‰¿çˆ¶å¯¹è±¡çš„å±æ€§å€¼ã€‚(ä¸€ç§èµ‹å€¼æ–¹å¼)</p>
</blockquote>
<ul>
<li>å¯¹è±¡å±‚é¢çš„ç»§æ‰¿</li>
<li>å¯ä»¥ä½¿ä¸åŒç±»ä¹‹é—´ç»§æ‰¿ï¼Œå­ç±»ä¸­å¿…é¡»åŒ…å«çˆ¶ç±»æ‰€æœ‰å±æ€§</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"classes"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span> <span class="attr">scope</span>=<span class="string">"singleton"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"ä¸€ç­"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"cla"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span> <span class="attr">parent</span>=<span class="string">"classes"</span> &gt;</span></span><br><span class="line">	<span class="comment">&lt;!--å¯¹å±æ€§è¿›è¡Œé‡å†™ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"3"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>


<h2 id="Spring-çš„ä¾èµ–"><a href="#Spring-çš„ä¾èµ–" class="headerlink" title="Spring çš„ä¾èµ–"></a>Spring çš„ä¾èµ–</h2><p>æè¿°beanå’Œbeanä¹‹é—´çš„<code>å…³ç³»</code>ï¼Œé…ç½®ä¾èµ–ä¹‹åï¼Œè¢«ä¾èµ–å¯¹è±¡ä¸€å®š<code>å…ˆåˆ›å»º</code>ï¼Œå†åˆ›å»ºä¾èµ–bean</p>
<blockquote>
<p>ä¿®æ”¹åˆ›å»ºé¡ºåº</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"cla"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span> <span class="attr">parent</span>=<span class="string">"classes"</span> <span class="attr">depends-on</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"3"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p><img src="https://gitee.com/KawYang/image/raw/master/img/image-20200620174623885.png" alt="image-20200620174623885"></p>
<h2 id="Spring-çš„-P-å‘½åç©ºé—´"><a href="#Spring-çš„-P-å‘½åç©ºé—´" class="headerlink" title="Spring çš„ P å‘½åç©ºé—´"></a>Spring çš„ P å‘½åç©ºé—´</h2><p>p å‘½åç©ºé—´æ˜¯å¯¹ IoC/ DI çš„ç®€åŒ–</p>
<blockquote>
<p>å¼•å…¥çº¦æŸ</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>ä½¿ç”¨æ–¹æ³•</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--på‘½åç©ºé—´--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"classes_p"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span> <span class="attr">p:id</span>=<span class="string">"1"</span> <span class="attr">p:name</span>=<span class="string">"adad"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"student_p"</span> <span class="attr">class</span>=<span class="string">"com.item.Student"</span> <span class="attr">p:id</span>=<span class="string">"1"</span> <span class="attr">p:name</span>=<span class="string">"æå››"</span> <span class="attr">p:age</span>=<span class="string">"12"</span> <span class="attr">p:classes-ref</span>=<span class="string">"classes_p"</span> /&gt;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="IoCè‡ªåŠ¨è£…è½½ï¼ˆAutowireï¼‰"><a href="#IoCè‡ªåŠ¨è£…è½½ï¼ˆAutowireï¼‰" class="headerlink" title="IoCè‡ªåŠ¨è£…è½½ï¼ˆAutowireï¼‰"></a>IoCè‡ªåŠ¨è£…è½½ï¼ˆAutowireï¼‰</h2><p>IoCè´Ÿè´£åˆ›å»ºå¯¹è±¡ï¼Œ<code>DI</code> å®Œæˆå¯¹è±¡çš„ä¾èµ–æ³¨å…¥ï¼Œé…ç½® <code>property</code> æ ‡ç­¾çš„ <code>ref</code>å±æ€§ã€‚</p>
<p>IoCè‡ªåŠ¨é€‰æ‹©bean è¿›è¡Œæ³¨å…¥</p>
<ul>
<li><p>byName ï¼šé€šè¿‡åç§°è£…è½½</p>
<blockquote>
<p>æŒ‰ç…§åå­—è¿›è¡Œè£…è½½ï¼Œæ²¡æœ‰ä¸ºnull</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ä¼ ç»Ÿè£…è½½--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"student"</span> <span class="attr">class</span>=<span class="string">"com.item.Student"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"å¼ ä¸‰"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"12"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"classes"</span> <span class="attr">ref</span>=<span class="string">"classes"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--è‡ªåŠ¨è£…è½½--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"student2"</span> <span class="attr">class</span>=<span class="string">"com.item.Student"</span> <span class="attr">autowire</span>=<span class="string">"byName"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"å¼ ä¸‰"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"12"</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>byType ï¼š é€šè¿‡ç±»å‹è£…è½½</p>
</li>
</ul>
<blockquote>
<p>å¤šä¸ªåŒç±»å‹ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œä¸çŸ¥è£…è½½é‚£ä¸ª.</p>
</blockquote>
]]></content>
      <categories>
        <category>æ¡†æ¶</category>
      </categories>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>å•ä¾‹è®¾è®¡æ¨¡å¼</title>
    <url>/kawyang/cd333c07.html</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡æ€»ç»“äº†å•ä¾‹è®¾è®¡æ¨¡å¼çš„åŸºæœ¬å†…å®¹ï¼Œå¹¶ğŸ“Enumã€åºåˆ—åŒ–ç­‰å†…å®¹ã€‚</p>
</blockquote>
<a id="more"></a>

<h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä¸”æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹</p>
<h3 id="æ‡’æ±‰å¼"><a href="#æ‡’æ±‰å¼" class="headerlink" title="æ‡’æ±‰å¼"></a>æ‡’æ±‰å¼</h3><p>1ï¼‰çº¿ç¨‹å®‰å…¨<br>2ï¼‰åŠ é”ä¼˜åŒ–=&gt; double check<br>3ï¼‰ç¼–è¯‘å™¨ï¼ˆJITï¼‰ï¼ŒCPU æœ‰å¯èƒ½å¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºï¼Œå¯¼è‡´ä½¿ç”¨åˆ°å°šæœªåˆå§‹åŒ–çš„å®ä¾‹ã€‚</p>
<ul>
<li>å¯¹è±¡åˆ›å»ºçš„æ­¥éª¤: åˆ†é…ç©ºé—´ =&gt; åˆå§‹åŒ– =&gt; å¼•ç”¨èµ‹å€¼ åœ¨ç¼–è¯‘æ—¶ ç¬¬2ã€3æ­¥æ˜¯å¯ä»¥äº’æ¢çš„</li>
<li>å½“æ­¥éª¤äº’æ¢ï¼Œå…ˆè¿›è¡Œå¼•ç”¨èµ‹å€¼ï¼Œå½“å¦ä¸€ä¸ªéœ€è¦è·å–æ—¶ï¼Œç”±äºè¿˜æœªè¿›è¡Œåˆå§‹åŒ–ï¼Œæ‰€ä»¥ä¼šäº§ç”Ÿ<code>ç©ºæŒ‡é’ˆå¼‚å¸¸</code>ã€‚</li>
<li>æ‰€ä»¥éœ€è¦ é€šè¿‡æ·»åŠ  <code>volatile</code>å…³é”®å­—è¿›è¡Œä¿®é¥°ï¼Œé˜²æ­¢æŒ‡ä»¤é‡æ’ã€‚</li>
</ul>
<h4 id="ä¼˜åŒ–è¿‡ç¨‹"><a href="#ä¼˜åŒ–è¿‡ç¨‹" class="headerlink" title="ä¼˜åŒ–è¿‡ç¨‹"></a>ä¼˜åŒ–è¿‡ç¨‹</h4><ul>
<li>åŸºæœ¬</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LazySingleton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> LazySingleton instance;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»ºç§æœ‰æ„é€ å‡½æ•°ï¼Œé˜²æ­¢ä½¿ç”¨ new åˆ›å»º</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">LazySingleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LazySingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">20</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            instance = <span class="keyword">new</span> LazySingleton();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<ul>
<li>é—®é¢˜</li>
</ul>
<p>å½“ä¸¤ä¸ªçº¿ç¨‹å‡ ä¹åŒæ—¶è¿›å…¥ if ï¼Œå°±ä¼šåˆ›å»ºä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ã€‚</p>
<ul>
<li><p>è§£å†³ï¼šæ·»åŠ ç¨‹åºğŸ”’</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> LazySingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">20</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            instance = <span class="keyword">new</span> LazySingleton();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>é—®é¢˜ : å½“åˆ›å»ºå®ä¾‹å¯¹è±¡åï¼Œä¸æ–­è·å–ä¼šé™ä½è·å–æ•ˆç‡(ä¸æ–­åŠ é”)ã€‚</p>
</li>
<li><p>è§£å†³ : åªéœ€è¦åœ¨ if å†…éƒ¨æ·»åŠ ç¨‹åºğŸ”’ï¼Œä»¥æé«˜ç¨‹åºçš„æ•ˆç‡</p>
</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LazySingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (LazySingleton<span class="class">.<span class="keyword">class</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">                    instance = <span class="keyword">new</span> LazySingleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>

<h4 id="æœ€ç»ˆä»£ç "><a href="#æœ€ç»ˆä»£ç " class="headerlink" title="æœ€ç»ˆä»£ç "></a>æœ€ç»ˆä»£ç </h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LazySingletion</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> LazySingletion instance;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="title">LazySingletion</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LazySingletion <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">			<span class="keyword">synchronized</span> (LazySingletion<span class="class">.<span class="keyword">class</span>)</span>&#123;</span><br><span class="line">				<span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">					instance = <span class="keyword">new</span> LazySingletion();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> instance;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="é¥¿æ±‰å¼"><a href="#é¥¿æ±‰å¼" class="headerlink" title="é¥¿æ±‰å¼"></a>é¥¿æ±‰å¼</h3><blockquote>
<p>JVM ä¿è¯çº¿ç¨‹å®‰å…¨çš„ï¼Œç¨‹åºåœ¨ç¼–è¯‘æ—¶å°±åˆ›å»ºäº†å¯¹è±¡ï¼Œæ‰€ä»¥ä¸å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HangrySingleton</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> HangrySingleton instance = <span class="keyword">new</span> HangrySingleton();</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">HangrySingleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HangrySingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> instance;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="é™æ€å†…éƒ¨ç±»"><a href="#é™æ€å†…éƒ¨ç±»" class="headerlink" title="é™æ€å†…éƒ¨ç±»"></a>é™æ€å†…éƒ¨ç±»</h3><blockquote>
<p>æ‡’åŠ è½½çš„æ–¹å¼: å°†å•ä¾‹å¯¹è±¡ æ”¾ç½®åœ¨å†…éƒ¨ç±»ä¸­ï¼Œå½“è°ƒç”¨ getInstance æ–¹æ³•æ—¶ï¼Œéœ€è¦å†…éƒ¨ç±»çš„å±æ€§ï¼Œè¿™æ—¶ä¼šåˆ›å»º å®ä¾‹å¯¹è±¡ï¼Œæ˜¯æ‡’åŠ è½½çš„æ–¹å¼ã€‚</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">InnerClassSingleton</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">InnerClass</span></span>&#123;</span><br><span class="line">		<span class="keyword">private</span> <span class="keyword">static</span> InnerClassSingleton instance = <span class="keyword">new</span> InnerClassSingleton();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">InnerClassSingleton</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="comment">// é˜²æ­¢ä½¿ç”¨åå°„æœºåˆ¶è¿›è¡Œåˆ›å»º</span></span><br><span class="line">		<span class="comment">// æ‡’æ±‰æ¨¡å¼ä¸èƒ½è¿›è¡Œé˜²æŠ¤</span></span><br><span class="line">		<span class="keyword">if</span>(Inner.instance != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"å·²ç»åˆ›å»ºè¿‡å®ä¾‹ï¼ï½"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> InnerClassSingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> InnerClass.instance;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="Enum-å•ä¾‹æ¨¡å¼"><a href="#Enum-å•ä¾‹æ¨¡å¼" class="headerlink" title="Enum å•ä¾‹æ¨¡å¼"></a>Enum å•ä¾‹æ¨¡å¼</h3><blockquote>
<p>åå°„å®‰å…¨ã€çº¿ç¨‹å®‰å…¨</p>
</blockquote>
<h3 id="åå°„æ”»å‡»"><a href="#åå°„æ”»å‡»" class="headerlink" title="åå°„æ”»å‡»"></a>åå°„æ”»å‡»</h3><blockquote>
<p>ä½¿ç”¨åå°„æœºåˆ¶ï¼Œå¯ä»¥è°ƒç”¨ç§æœ‰æ„é€ å‡½æ•°ï¼Œå¯èƒ½é€ æˆæ‰“ç ´å•ä¾‹çš„è§„åˆ™ã€‚</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">InnerClassSingleton</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">// é˜²æ­¢ä½¿ç”¨åå°„æœºåˆ¶è¿›è¡Œåˆ›å»º</span></span><br><span class="line">	<span class="comment">// æ‡’æ±‰æ¨¡å¼ä¸èƒ½è¿›è¡Œé˜²æŠ¤</span></span><br><span class="line">	<span class="keyword">if</span>(Inner.instance != <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"å·²ç»åˆ›å»ºè¿‡å®ä¾‹ï¼ï½"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="åºåˆ—åŒ–çš„å•ä¾‹æ¨¡å¼"><a href="#åºåˆ—åŒ–çš„å•ä¾‹æ¨¡å¼" class="headerlink" title="åºåˆ—åŒ–çš„å•ä¾‹æ¨¡å¼"></a>åºåˆ—åŒ–çš„å•ä¾‹æ¨¡å¼</h2><blockquote>
<p>å°†å¯¹è±¡å­˜å…¥ç¡¬ç›˜ï¼Œè¯»å–çš„å¯¹è±¡å’Œè°ƒç”¨æ–¹æ³•è·å–çš„å¯¹è±¡ä¸ä¸€è‡´ã€‚</p>
</blockquote>
<ul>
<li>è§£å†³:</li>
</ul>
<ol>
<li>å¯¹è±¡ä¸­ç»§æ‰¿åºåˆ—åŒ–æ¥å£ <code>Serializable</code></li>
<li>æ·»åŠ æ–¹æ³• :  <code>Object readResolve() throws ObjectStreamException;</code></li>
<li>æ·»åŠ ç‰ˆæœ¬ğŸ†” : <code>static final long serialVersionUID = 43L;</code></li>
</ol>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InnerSingleton</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">43L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Inner</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> InnerSingleton instance = <span class="keyword">new</span> InnerSingleton();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">InnerSingleton</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(Inner.instance != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"å·²ç»åˆ›å»ºè¿‡å®ä¾‹ï¼ï½"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> InnerSingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Inner.instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Object <span class="title">readResolve</span><span class="params">()</span> <span class="keyword">throws</span> ObjectStreamException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Inner.instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>æµ‹è¯•</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    InnerSingleton instance = InnerSingleton.getInstance();</span><br><span class="line">    ObjectOutputStream out = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">"InnerSingleton"</span>));</span><br><span class="line">    out.writeObject(instance);</span><br><span class="line">    out.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> <span class="keyword">throws</span> IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">    ObjectInputStream in = <span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"InnerSingleton"</span>));</span><br><span class="line">    InnerSingleton innerSingleton = (InnerSingleton) in.readObject();</span><br><span class="line">    in.close();</span><br><span class="line">    Assert.assertEquals(<span class="keyword">true</span>, InnerSingleton.getInstance() == innerSingleton);</span><br><span class="line">    <span class="comment">//é€šè¿‡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Enumç±»å‹åºåˆ—åŒ–"><a href="#Enumç±»å‹åºåˆ—åŒ–" class="headerlink" title="Enumç±»å‹åºåˆ—åŒ–"></a>Enumç±»å‹åºåˆ—åŒ–</h2><blockquote>
<p>Enum ç±»å‹å¯ç›´æ¥è¿›è¡Œåºåˆ—åŒ–ï¼Œä¸éœ€è¦è¿›è¡Œä»¥ä¸Šæ“ä½œã€‚</p>
</blockquote>
<h2 id="å…¶ä»–ç¤ºä¾‹"><a href="#å…¶ä»–ç¤ºä¾‹" class="headerlink" title="å…¶ä»–ç¤ºä¾‹"></a>å…¶ä»–ç¤ºä¾‹</h2><ul>
<li>Spring &amp; JDK<ul>
<li>java.lang.Runtime =&gt; é¥¿æ±‰å¼</li>
<li>java.util.Currency  =&gt; double check</li>
<li>org.springframework.aop.framework.ProxyFactoryBean</li>
<li>org.springframework.beans.factory.support.DefaultSingletonBeanRegistry</li>
</ul>
</li>
<li>Tomcat<ul>
<li>org.apache.catalina.webresources.TomcatURLStreamHandlerFactory</li>
</ul>
</li>
</ul>
<hr>
<h2 id="å‚è€ƒå†…å®¹"><a href="#å‚è€ƒå†…å®¹" class="headerlink" title="å‚è€ƒå†…å®¹"></a>å‚è€ƒå†…å®¹</h2><p><a href="https://www.bilibili.com/video/BV18a4y147dB?p=1" target="_blank" rel="noopener">ç¨‹åºå‘˜å¿…å¤‡çš„13ç§è®¾è®¡æ¨¡å¼ä½ çœŸçš„æŒæ¡äº†å—ï¼Ÿå…¨å¥—æ•™å­¦è§†é¢‘è®©ä½ å½»åº•å¼„æ‡‚</a></p>
]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>å•ä¾‹æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring-å·¥å‚æ–¹æ³•</title>
    <url>/kawyang/6c92115f.html</url>
    <content><![CDATA[<blockquote>
<p>ğŸ“ : Springçš„å·¥å‚æ–¹æ³•ï¼Œå°†ğŸ­ äº¤ç»™ <code>IoCå®¹å™¨</code> è¿›è¡Œç®¡ç†ï¼ŒğŸ­åŒ…æ‹¬ï¼šé™æ€ğŸ­ã€å®ä¾‹ğŸ­ã€‚</p>
</blockquote>
<a id="more"></a>

<h2 id="Spring-çš„å·¥å‚æ–¹æ³•"><a href="#Spring-çš„å·¥å‚æ–¹æ³•" class="headerlink" title="Spring çš„å·¥å‚æ–¹æ³•"></a>Spring çš„å·¥å‚æ–¹æ³•</h2><blockquote>
<p>ä½¿ç”¨å·¥å‚åˆ›å»ºç‹¬äº«ï¼Œå¹¶å°†å·¥å‚äº¤ç»™ IoCå®¹å™¨ è¿›è¡Œç®¡ç†</p>
</blockquote>
<h3 id="é™æ€å·¥å‚"><a href="#é™æ€å·¥å‚" class="headerlink" title="é™æ€å·¥å‚"></a>é™æ€å·¥å‚</h3><ul>
<li>å®ä½“ç±»</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.item;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    Long id;</span><br><span class="line">    String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>é™æ€å·¥å‚</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.item.factory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.item.Car;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CarFactory</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> Map&lt;Long, Car&gt; carMap;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        carMap = <span class="keyword">new</span> HashMap&lt;Long, Car&gt;();</span><br><span class="line">        carMap.put(<span class="number">1L</span>, <span class="keyword">new</span> Car(<span class="number">1L</span>, <span class="string">"å®é©¬"</span>));</span><br><span class="line">        carMap.put(<span class="number">2L</span>, <span class="keyword">new</span> Car(<span class="number">2L</span>, <span class="string">"å¥”é©°"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Car <span class="title">getCar</span><span class="params">(Long id, String s)</span></span>&#123;</span><br><span class="line">        System.out.println(s);</span><br><span class="line">        <span class="keyword">return</span> carMap.get(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>é…ç½®å·¥å‚</li>
</ul>
<blockquote>
<p>å°†ç±»ä½¿ç”¨beanğŸ·ï¸é…ç½®åˆ°å·¥å‚çš„æ–¹æ³•ä¸­ï¼ŒIoCå®¹å™¨ä½¿ç”¨é…ç½®çš„æ–¹æ³•ï¼Œæ ¹æ®ä¼ é€’çš„å‚æ•°æ¥è·å–å¯¹è±¡ã€‚</p>
</blockquote>
<p>é…ç½®å‚æ•° : index (0å¼€å§‹ã€å½¢å‚ä½ç½®)ã€name(å½¢å‚åç§°)</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®é™æ€å·¥å‚ é»˜è®¤ä¸ºå•ä¾‹æ¨¡å¼--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"car"</span> <span class="attr">class</span>=<span class="string">"com.item.factory.CarFactory"</span> <span class="attr">factory-method</span>=<span class="string">"getCar"</span> <span class="attr">scope</span>=<span class="string">"prototype"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®å‚æ•° getCar--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"0"</span> <span class="attr">value</span>=<span class="string">"2"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"s"</span> <span class="attr">value</span>=<span class="string">"String"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>è·å–IoCå®¹å™¨ä¸­å¯¹è±¡</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"config-factory.xml"</span>);</span><br><span class="line">        Car car =(Car) context.getBean(<span class="string">"car"</span>);</span><br><span class="line">        System.out.println(car);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="å®ä¾‹å·¥å‚"><a href="#å®ä¾‹å·¥å‚" class="headerlink" title="å®ä¾‹å·¥å‚"></a>å®ä¾‹å·¥å‚</h3><ul>
<li>å·¥å‚ç±»</li>
</ul>
<p>åŒä¸Š</p>
<ul>
<li>é…ç½®æ–‡ä»¶</li>
</ul>
<blockquote>
<p>åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ä¸¤ä¸ª bean (ğŸ­beanã€è·å–Carçš„bean)ï¼Œå°†ğŸ­ç±»å…ˆäº¤ç»™ IoCå®¹å™¨ç®¡ç†ï¼Œç„¶åå†é…ç½®Carï¼Œè°ƒç”¨å®¹å™¨ä¸­ğŸ­åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ã€‚</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®å·¥å‚ bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"factory"</span> <span class="attr">class</span>=<span class="string">"com.item.factory.InstanceCarFactory"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--é…ç½®å¯¹è±¡ Car  ä½¿ç”¨å·¥å‚ factoryè·å–  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"car2"</span> <span class="attr">factory-bean</span>=<span class="string">"factory"</span> <span class="attr">factory-method</span>=<span class="string">"getCar"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"2"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>ä½¿ç”¨</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    InstanceCarFactory factory = <span class="keyword">new</span> InstanceCarFactory();</span><br><span class="line">    System.out.println(factory.getCar(<span class="number">1L</span>));</span><br><span class="line"></span><br><span class="line">    ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"config-factory.xml"</span>);</span><br><span class="line">    Car car2 = (Car) context.getBean(<span class="string">"car2"</span>);</span><br><span class="line">    System.out.println(car2);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



]]></content>
      <categories>
        <category>æ¡†æ¶</category>
      </categories>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring-AOP</title>
    <url>/kawyang/97375e6e.html</url>
    <content><![CDATA[<blockquote>
<p>AOP</p>
</blockquote>
<a id="more"></a>
<h2 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h2><p>Aspect Oriented Programming  â€”- é¢å‘åˆ‡é¢ç¼–ç¨‹</p>
<ul>
<li>é™ä½è€¦åˆåº¦</li>
<li>æ˜“æ‹“å±•</li>
<li>å¤ç”¨</li>
<li>éä¸šåŠ¡é›†ä¸­ï¼Œä¾¿äºç»Ÿä¸€ç®¡ç†</li>
<li>ä¸šåŠ¡ä»£ç æ¯”è¾ƒçº¯ç²¹ï¼Œæ²¡æœ‰å…¶ä»–ä»£ç å½±å“</li>
</ul>
<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><ul>
<li><p>åˆ›å»ºMavenå·¥ç¨‹ï¼Œæ·»åŠ åæ ‡</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.3.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

</li>
</ul>
<p>Invocationhandler</p>
<p>  ç”Ÿæˆä»£ç†ç±»çš„ç±»ï¼Œ</p>
<p>  imlements InvocationHandler</p>
<ul>
<li><p>æ¥æ”¶jjadf å•Šæ”¶åˆ°å›å¤ahsudjf å§”æ‰˜å¯¹è±¡</p>
</li>
<li><p>è®¾ç½®è¿”å›ä»£ç†ç±»</p>
<p>Proxy.newProxyInstance()</p>
</li>
<li><p>ç¼–å†™å§”æ‰˜å¯¹è±¡æ–¹æ³•</p>
</li>
</ul>
<h3 id="Springæ¡†æ¶å¯¹AOPè¿›è¡Œå°è£…"><a href="#Springæ¡†æ¶å¯¹AOPè¿›è¡Œå°è£…" class="headerlink" title="Springæ¡†æ¶å¯¹AOPè¿›è¡Œå°è£…"></a>Springæ¡†æ¶å¯¹AOPè¿›è¡Œå°è£…</h3><p>ä¸éœ€è¦åˆ›å»ºInvocationHandlerï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªåˆ‡é¢å¯¹è±¡ï¼Œå°†ä¸šåŠ¡ä»£ç åœ¨åˆ‡é¢ä¸­å®Œæˆå³å¯</p>
<ul>
<li>åˆ›å»ºåˆ‡é¢ç±»å¯¹è±¡ Aspectï¼ˆåˆ‡é¢ï¼‰</li>
<li>æ·»åŠ æ³¨è§£</li>
</ul>
<p>LoggerAspect</p>
<ul>
<li><code>@Aspect</code> ï¼š è¡¨ç¤ºè¯¥ç±»ä¸ºåˆ‡é¢ç±»</li>
<li><code>@Component</code>ï¼šå°†è¯¥ç±»å¯¹è±¡æ³¨å…¥åˆ°IoCå®¹å™¨ä¸­</li>
<li><code>@Befor</code> :è¡¨ç¤ºæ–¹æ³•æ‰§è¡Œçš„å…·ä½“ä½ç½®å’Œæ—¶æœº  </li>
</ul>
<p>CalImpl2 ä¹Ÿéœ€è¦æ·»åŠ <code>@Component</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  è‡ªåŠ¨æ‰«æ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.item"</span> &gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;bean class="com.item.AOP.LoggerAspect" p:id="" /&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  ä½¿ Aspect æ ‡ç­¾ç”Ÿæ•ˆï¼Œä¸ºç›®æ ‡ç±»è‡ªåŠ¨ç”Ÿæˆä»£ç†å¯¹è±¡  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>context:component-scan æ ‡ç­¾æ˜¯æ‰«æåŒ…å†…æ‰€æœ‰æ·»åŠ @Componentæ³¨è§£çš„ç±»ï¼Œæ³¨å…¥åˆ°IoCä¸­</p>
<p>aop:aspectj-autoproxy è®©Springç»“åˆåˆ‡é¢ç±»å’Œç›®æ ‡ç±»è‡ªåŠ¨ç”Ÿæˆä»£ç†å¯¹è±¡ã€‚</p>
<ul>
<li>åˆ‡é¢ï¼šæ¨ªåˆ‡å…³æ³¨ç‚¹è¢«æ¨¡å—åŒ–çš„æŠ½è±¡å¯¹è±¡</li>
<li>é€šçŸ¥ï¼šåˆ‡é¢å¯¹è±¡å®Œæˆçš„å·¥ä½œï¼ˆéä¸šåŠ¡ä»£ç ï¼Œæ—¥å¿—â€¦ï¼‰</li>
<li>ç›®æ ‡ï¼šè¢«é€šçŸ¥çš„å¯¹è±¡ï¼Œå³è¢«åˆ‡é¢çš„å¯¹è±¡</li>
<li>ä»£ç†ï¼šåˆ‡é¢ã€é€šçŸ¥ã€ç›®æ ‡æ··åˆä¹‹åçš„å¯¹è±¡</li>
<li>è¿æ¥ç‚¹ï¼šé€šçŸ¥æ’å…¥ä¸šåŠ¡ä»£ç çš„å…·ä½“ä½ç½®</li>
<li>åˆ‡ç‚¹ï¼šAOPé€šè¿‡åˆ‡ç‚¹å®šä½åˆ°è¿æ¥ç‚¹</li>
</ul>
]]></content>
      <categories>
        <category>æ¡†æ¶</category>
      </categories>
      <tags>
        <tag>Spring</tag>
        <tag>AOP</tag>
      </tags>
  </entry>
  <entry>
    <title>archives</title>
    <url>/archives/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>tags</title>
    <url>/tags/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
</search>
