<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>MyBatis-åŸºæœ¬æ“ä½œ</title>
    <url>/kawyang/8661f06f.html</url>
    <content><![CDATA[<blockquote>
<p>MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„åŠè‡ªåŠ¨çš„è½»é‡çº§çš„æŒä¹…å±‚æ¡†æ¶ã€‚æœ¬æ–‡ä»‹ç»äº† <code>MyBatis</code> çš„åŸºæœ¬é¡¹ç›®çš„åˆ›å»ºå’Œä½¿ç”¨ã€‚</p>
</blockquote>
<a id="more"></a>

<h2 id="åˆ›å»ºMavené¡¹ç›®"><a href="#åˆ›å»ºMavené¡¹ç›®" class="headerlink" title="åˆ›å»ºMavené¡¹ç›®"></a>åˆ›å»ºMavené¡¹ç›®</h2><h2 id="pom-xml-å¯¼å…¥ç›¸å…³ä¾èµ–"><a href="#pom-xml-å¯¼å…¥ç›¸å…³ä¾èµ–" class="headerlink" title="pom.xml å¯¼å…¥ç›¸å…³ä¾èµ–"></a>pom.xml å¯¼å…¥ç›¸å…³ä¾èµ–</h2><ul>
<li>org.mybatis -&gt; mybatis</li>
<li>mysql-connection-java -&gt; mysql</li>
<li>org.projectlombok -&gt; lombok</li>
<li>log4j -&gt; log4j</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>MyBatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li><strong>é…ç½® <code>mapper</code> è¯»å–ä½ç½®</strong> ï¼Œè§£å†³Mapperé…ç½®æ–‡ä»¶è¯»å–ä¸åˆ°çš„å…³é”®<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure></div>


</li>
</ul>
<blockquote>
<p>resources/config.xml</p>
</blockquote>
<p>é€šè¿‡ <code>config.xml</code> è¿›è¡Œæ•°æ®åº“çš„é…ç½®å’Œç›¸å…³Mapperçš„å¯¼å…¥ã€‚</p>
<ul>
<li>çº¦æŸ</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    	<span class="comment">&lt;!-- SQLé…ç½® --&gt;</span></span><br><span class="line">    	<span class="comment">&lt;!-- è¿æ¥é…ç½® --&gt;</span></span><br><span class="line">    	<span class="comment">&lt;!-- æ³¨å†ŒMapper --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<ul>
<li>SQL çš„ç›¸å…³é…ç½®</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- æ‰“å°SQLè¯­å¥ --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"logImpl"</span> <span class="attr">value</span>=<span class="string">"STDOUT_LOGGING"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>è¿æ¥é…ç½®</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"mysql"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"mysql"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.cj.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/JavaWeb?userSSL=false<span class="symbol">&amp;amp;</span>allowPublicKeyRetrieval=true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li><p>æ³¨å†ŒMapper</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ³¨è§£å½¢å¼æ³¨å†Œ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">"com.kawyang.repository.IClass"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®æ–‡ä»¶æ–¹å¼æ³¨å†Œ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"com/kawyang/mapper/IClassesMapper.xml"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"com/kawyang/mapper/IStudentMapper.xml"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

</li>
</ul>
<h2 id="entity"><a href="#entity" class="headerlink" title="entity"></a>entity</h2><p>åˆ›å»ºå®ä½“ç±»å¯¹è±¡ã€‚</p>
<p>lombok ä¼šé€šè¿‡ä»¥ä¸‹æ³¨è§£å¿«é€ŸğŸ”œå®Œæˆè®¾ç½®<br>            <code>@Data</code> : è‡ªåŠ¨æ·»åŠ  Get/Set æ–¹æ³•ã€‚<br>            <code>@AllArgsConstructor</code> : æœ‰å‚æ„é€ <br>            <code>@NoArgsConstructor</code> : æ— å‚æ„é€   </p>
<ul>
<li>é…ç½®æ–‡ä»¶å½¢å¼</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Classes</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>


<h2 id="repository"><a href="#repository" class="headerlink" title="repository"></a>repository</h2><blockquote>
<p>ç¼–å†™æ•°æ®åº“æ“ä½œæ¥å£</p>
</blockquote>
<ul>
<li><p>é…ç½®æ–‡ä»¶å½¢å¼</p>
<p>é€šè¿‡é…ç½®æ–‡ä»¶å½¢å¼ï¼Œéœ€è¦ç¼–å†™ç›¸åº”çš„ <code>Mapper</code> é…ç½®æ–‡ä»¶ï¼Œå°†æ¥å£ä¸­çš„æ–¹æ³•ä¸ æ•°æ®åº“çš„æ“ä½œè¿›è¡Œæ˜ å°„ã€‚<br>å¹¶ä¸”åœ¨ <code>config.xml</code> ä¸­å¯¹é…ç½®æ–‡ä»¶ é€šè¿‡ mapper ğŸ·ï¸çš„ <code>resource</code> å±æ€§ï¼Œå®Œæˆæ³¨å†Œã€‚</p>
</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IClasses</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">Classes <span class="title">findById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;Classes&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">insertClass</span><span class="params">(Classes classes)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">deleteById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">updateClass</span><span class="params">(Classes classes)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">ClassesStudents <span class="title">findClassAndStudentById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;ClassesStudents&gt; <span class="title">findAllClassAndStudent</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>æ³¨è§£å½¢å¼</li>
</ul>
<p>é€šè¿‡ä¸€ä¸‹æ³¨è§£ï¼Œç¼–å†™ç›¸åº”çš„SQLè¯­å¥ï¼Œå®Œæˆæ¥å£æ–¹æ³•ä¸æ•°æ®åº“æ“ä½œçš„æ˜ å°„ï¼Œä¸éœ€è¦é…ç½®æ–‡ä»¶ï¼Œåœ¨ <code>config.xml</code> ä¸­ï¼Œä½¿ç”¨ mapperğŸ·ï¸ çš„  <code>class</code> å±æ€§å®Œæˆæ³¨å†Œã€‚</p>
<ul>
<li>@Insert(String sql) : å¢</li>
<li>@Delete(String sql) : åˆ </li>
<li>@Update(String sql) : æ”¹</li>
<li>@Select(String sql) : æŸ¥</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IClasses</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Select</span>(<span class="string">"select * from classes where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function">Classes <span class="title">findById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from classes"</span>)</span><br><span class="line">    <span class="function">List&lt;Classes&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert</span>(<span class="string">"insert into classes (id,name) values (#&#123;id&#125;,#&#123;name&#125;)"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">insertClass</span><span class="params">(Classes classes)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Delete</span>(<span class="string">"delete from classes where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">deleteById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update</span>(<span class="string">"update from classes set name=#&#123;name&#125; where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">updateClass</span><span class="params">(Classes classes)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h2 id="mapper"><a href="#mapper" class="headerlink" title="mapper"></a>mapper</h2><p>com.mapper.IClassesMapper</p>
<p>ç¼–å†™æ•°æ®åº“æ“ä½œçš„Mapperæ–‡ä»¶ï¼Œå®Œæˆæ–¹æ³•ä¸æŸ¥è¯¢è¯­å¥çš„æ˜ å°„ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> &gt;</span>..<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">delete</span> &gt;</span>..<span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">update</span> &gt;</span>..<span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">insert</span> &gt;</span>..<span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>MapperğŸ·ï¸ é€šè¿‡å±æ€§ <code>namespace</code> : æ•°æ®åº“æ“ä½œæ¥å£çš„å…¨è·¯å¾„<br>æ•°æ®åº“æ“ä½œğŸ·ï¸ :</p>
<ul>
<li><p>select</p>
<ul>
<li>id : æ˜ å°„æ¥å£çš„æ–¹æ³•å</li>
<li>parameterType : æ–¹æ³•å‚æ•°çš„ç±»å‹</li>
<li>resultType : è¿”å›å€¼ç±»å‹çš„å…¨è·¯å¾„</li>
</ul>
</li>
<li><p>delete</p>
<ul>
<li>id : æ˜ å°„æ¥å£çš„æ–¹æ³•å</li>
<li>parameterType : æ–¹æ³•å‚æ•°çš„ç±»å‹</li>
<li>æ— è¿”å›å€¼å±æ€§ï¼Œè¿”å›å€¼ä¸º <code>int</code> ç±»å‹</li>
</ul>
</li>
<li><p>update</p>
<ul>
<li>id : æ˜ å°„æ¥å£çš„æ–¹æ³•å</li>
<li>parameterType : æ–¹æ³•å‚æ•°çš„ç±»å‹</li>
<li>æ— è¿”å›å€¼å±æ€§ï¼Œè¿”å›å€¼ä¸º <code>int</code> ç±»å‹</li>
</ul>
</li>
<li><p>insert</p>
<ul>
<li>id : æ˜ å°„æ¥å£çš„æ–¹æ³•å</li>
<li>parameterType : æ–¹æ³•å‚æ•°çš„ç±»å‹</li>
</ul>
</li>
<li><p>resultMap:</p>
</li>
</ul>
<p>é€šè¿‡ <code>resultMap</code> è¿›è¡Œå«æœ‰å†…åµŒå¯¹è±¡ç±»çš„é…ç½®ã€‚  </p>
<p>å¦‚ï¼šStudentClas ç±»ï¼Œé™¤äº†åŒ…å«studentçš„åŸºæœ¬ä¿¡æ¯å¤–ï¼Œå«æœ‰å†…åµŒå¯¹è±¡ classesï¼Œéœ€è¦é€šè¿‡ resultMap æ¥å®Œæˆæ•°æ®çš„é…ç½®ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"StudentCla"</span> <span class="attr">type</span>=<span class="string">"com.kawyang.entity.StudentCla"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"sid"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"sname"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"students"</span> <span class="attr">ofType</span>=<span class="string">"com.kawyang.model.Classes"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"cid"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"cname"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectStudentClaById"</span> <span class="attr">resultMap</span>=<span class="string">"StudentCla"</span> <span class="attr">parameterType</span>=<span class="string">"ind"</span>&gt;</span></span><br><span class="line">	select s.id as sid, s.name as sname, c.id as cid, c.name as cname</span><br><span class="line">	from student s,classes c </span><br><span class="line">	where s.cid=c.id and s.id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<ul>
<li>resultMapğŸ·ï¸ :   <ul>
<li>id -&gt; resultMap çš„ id  </li>
<li>type -&gt; å®ä½“ç±»ç±»å‹  </li>
</ul>
</li>
<li>id å’Œ resultğŸ·ï¸ : <ul>
<li>id : æŒ‡å®šä¸»é”®ä¿¡æ¯ </li>
<li>result : æŒ‡å®šéä¸»é”®ä¿¡æ¯</li>
<li>property -&gt; ç±»çš„å±æ€§åç§°  </li>
<li>column -&gt; æŸ¥è¯¢ç»“æœçš„åˆ—å  </li>
</ul>
</li>
<li>collectionğŸ·ï¸ï¼šå®Œæˆå¯¹è±¡æ³¨å…¥  <ul>
<li>property -&gt; ç±»çš„æ³¨å…¥å¯¹è±¡çš„åç§°  </li>
<li>ofType -&gt; æ³¨å…¥å¯¹è±¡çš„ç±»å‹  </li>
</ul>
</li>
</ul>
<h2 id="Main"><a href="#Main" class="headerlink" title="Main"></a>Main</h2><ol>
<li>è¯»å–é…ç½®æ–‡ä»¶</li>
<li>åˆ›å»ºSQLSessionå¯¹è±¡</li>
<li>ä½¿ç”¨SQLSessionå¯¹è±¡ï¼Œåˆ›å»º ç›¸åº”æ“ä½œçš„ mapper å¯¹è±¡</li>
<li>ä½¿ç”¨ mapper å¯¹è±¡å®Œæˆ æ•°æ®åº“çš„æ“ä½œ</li>
</ol>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 1. è¯»å–é…ç½®æ–‡ä»¶</span></span><br><span class="line">		InputStream in = Main.class.getClassLoader().getResourceAsStream("config.xml");</span><br><span class="line">		<span class="comment">// 2. åˆ›å»ºSQLSessionå¯¹è±¡</span></span><br><span class="line">		<span class="comment">// 2.1 åˆ›å»º SqlSession å·¥å‚ğŸ­ç±»</span></span><br><span class="line">		SqlSessionFactoryBuilder bulider = <span class="keyword">new</span> SqlSessionFactoryBuilder();</span><br><span class="line">		<span class="comment">// 2.2 ä½¿ç”¨é…ç½®æ–‡ä»¶ å®ŒæˆğŸ­åˆ›å»º</span></span><br><span class="line">		SqlSessionFactory bulid = bulider.build(in);</span><br><span class="line">		<span class="comment">// 2.3 ä½¿ç”¨ğŸ­åˆ›å»º SqlSession</span></span><br><span class="line">		SqlSession session = build.openSession();</span><br><span class="line">		<span class="comment">// 3. ä½¿ç”¨SQLSessionå¯¹è±¡ï¼Œåˆ›å»º ç›¸åº”æ“ä½œçš„ mapper å¯¹è±¡</span></span><br><span class="line">		IStudentCla mapper = session.getMapper(IStudentCla<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">		<span class="comment">// 4. ä½¿ç”¨ mapper å¯¹è±¡å®Œæˆ æ•°æ®åº“çš„æ“ä½œ</span></span><br><span class="line">		StudentCla student = mapper.findById(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 5. æäº¤äº‹åŠ¡  æ·»åŠ æ•°æ®æ—¶ä½¿ç”¨</span></span><br><span class="line">		session.commit();</span><br><span class="line">        </span><br><span class="line">		<span class="comment">// 5. å…³é—­ SqlSession</span></span><br><span class="line">		session.close();</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>




















]]></content>
      <categories>
        <category>æ¡†æ¶</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode-åŒæŒ‡é’ˆ&amp;167</title>
    <url>/kawyang/16b04212.html</url>
    <content><![CDATA[<blockquote>
<p>ç»™å®šä¸€ä¸ªå·²æŒ‰ç…§<code>å‡åºæ’åˆ—</code>çš„æœ‰åºæ•°ç»„ï¼Œæ‰¾åˆ°ä¸¤ä¸ªæ•°ä½¿å¾—å®ƒä»¬ç›¸åŠ ä¹‹å’Œç­‰äºç›®æ ‡æ•°ã€‚å‡½æ•°åº”è¯¥è¿”å›è¿™ä¸¤ä¸ªä¸‹æ ‡å€¼ index1 å’Œ index2ï¼Œå…¶ä¸­ index1å¿…é¡»å°äºindex2ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹ï¼š</p>
</blockquote>
<p>è¾“å…¥: numbers = [2, 7, 11, 15], target = 9<br>è¾“å‡º: [1,2]<br>è§£é‡Š: 2 ä¸ 7 ä¹‹å’Œç­‰äºç›®æ ‡æ•° 9 ã€‚å› æ­¤ index1 = 1, index2 = 2 ã€‚</p>
<a id="more"></a>

<p><a href="https://leetcode-cn.com/problems/two-sum-ii-input-array-is-sorted/" target="_blank" rel="noopener">é¢˜ç›®é“¾æ¥</a></p>
<h2 id="åŸå§‹è§£æ³•"><a href="#åŸå§‹è§£æ³•" class="headerlink" title="åŸå§‹è§£æ³•"></a>åŸå§‹è§£æ³•</h2><p>é€šè¿‡åŒå±‚å¾ªç¯ï¼Œä¾æ¬¡ä¾¿åˆ©æµ‹è¯•ï¼Œå¦‚æœæµ‹è¯•æˆåŠŸè¿”å›ä¸‹æ ‡ï¼Œä¸æˆåŠŸç»§ç»­æµ‹è¯•ã€‚<br>æ—¶é—´å¤æ‚åº¦ <code>O(n^2)</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] numbers, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        <span class="keyword">int</span> index1,index2, sum[]= <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span>(index1 = <span class="number">0</span>; index1 &lt; numbers.length; index1 ++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(index2 = index1 + <span class="number">1</span>; index2 &lt; numbers.length ; index2 ++ )&#123;</span><br><span class="line">            	<span class="comment">// æµ‹è¯•æˆåŠŸï¼</span></span><br><span class="line">                <span class="keyword">if</span>(numbers[index1] + numbers[index2] == target)&#123;</span><br><span class="line">                    sum[<span class="number">0</span>] = index1 + <span class="number">1</span>;</span><br><span class="line">                    sum[<span class="number">1</span>] = index2 + <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">return</span> sum;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// å¦‚æœå’Œå¤§äº target index2 ä¸éœ€è¦ç»§ç»­å‘ä¸‹æµ‹è¯•</span></span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(numbers[index1] + numbers[index2] &gt; target)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="åŒæŒ‡é’ˆæ–¹æ³•"><a href="#åŒæŒ‡é’ˆæ–¹æ³•" class="headerlink" title="åŒæŒ‡é’ˆæ–¹æ³•"></a>åŒæŒ‡é’ˆæ–¹æ³•</h2><p>ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘æ•°ç»„ä¸¤å¤´ï¼š</p>
<p>å¦‚æœ sum &gt; target ï¼š éœ€è¦å‡å°å¤§å€¼ =&gt; index2 å‰ç§»</p>
<p>å¦‚æœ sum &lt; target ï¼š éœ€è¦å¢å¤§å°å€¼ =&gt; index1 åç§»</p>
<p>å¦‚æœ sum = target ï¼š è·å–åˆ°éœ€è¦çš„åæ ‡</p>
<ul>
<li>é€šè¿‡å¦‚ä¸Šæ–¹æ³•ï¼Œæ•°ç»„æœ€å¤šéå†ä¸€éï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ ä¸º <code>O(n)</code></li>
</ul>
<blockquote>
<p>å®ä¾‹å¦‚ä¸‹ï¼š</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] numbers, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        <span class="keyword">int</span> index1, index2;</span><br><span class="line">        index1 = <span class="number">0</span>;</span><br><span class="line">        index2 = numbers.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(index1 &lt; index2)&#123;</span><br><span class="line">            <span class="keyword">if</span>(numbers[index1] + numbers[index2] &gt; target )&#123;</span><br><span class="line">                index2--; </span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(numbers[index1] + numbers[index2] == target )&#123; </span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;index1+<span class="number">1</span>,index2+<span class="number">1</span>&#125;; </span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(numbers[index1] + numbers[index2] &lt; target )&#123;</span><br><span class="line">                index1 ++ ; </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h2 id="ç»“æœå¯¹æ¯”"><a href="#ç»“æœå¯¹æ¯”" class="headerlink" title="ç»“æœå¯¹æ¯”"></a>ç»“æœå¯¹æ¯”</h2><table>
<thead>
<tr>
<th align="left">æ–¹æ³•</th>
<th align="left">æäº¤ç»“æœ</th>
<th align="left">è¿è¡Œæ—¶é—´</th>
<th align="center">å†…å­˜æ¶ˆè€—</th>
<th align="left">è¯­è¨€</th>
</tr>
</thead>
<tbody><tr>
<td align="left">åŸå§‹æ–¹æ³•</td>
<td align="left">é€šè¿‡</td>
<td align="left"><code>82 ms</code></td>
<td align="center">39.8 MB</td>
<td align="left">Java</td>
</tr>
<tr>
<td align="left">åŒæŒ‡é’ˆ</td>
<td align="left">é€šè¿‡</td>
<td align="left"><code>1 ms</code></td>
<td align="center">40 MB</td>
<td align="left">Java</td>
</tr>
</tbody></table>
<hr>
<p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/two-sum-ii-input-array-is-sorted" target="_blank" rel="noopener">https://leetcode-cn.com/problems/two-sum-ii-input-array-is-sorted</a><br>è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>LeetCode</tag>
        <tag>åŒæŒ‡é’ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode-åŒæŒ‡é’ˆ&amp;ç§»é™¤å…ƒç´ -27</title>
    <url>/kawyang/276090df.html</url>
    <content><![CDATA[<blockquote>
<p>ç»™ä½ ä¸€ä¸ªæ•°ç»„<code>nums</code> å’Œä¸€ä¸ªå€¼ valï¼Œä½ éœ€è¦ åŸåœ° ç§»é™¤æ‰€æœ‰æ•°å€¼ç­‰äº<code>val</code>çš„å…ƒç´ ï¼Œå¹¶è¿”å›ç§»é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚<br>ä¸è¦ä½¿ç”¨é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œä½ å¿…é¡»ä»…ä½¿ç”¨ O(1) é¢å¤–ç©ºé—´å¹¶ <code>åŸåœ°</code> ä¿®æ”¹è¾“å…¥æ•°ç»„ã€‚<br>å…ƒç´ çš„<code>é¡ºåºå¯ä»¥æ”¹å˜</code>ã€‚ä½ ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚</p>
</blockquote>
<a id="more"></a>
<h1 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h1><p>ç¤ºä¾‹ 1:</p>
<p>ç»™å®š nums = [3,2,2,3], val = 3,</p>
<p>å‡½æ•°åº”è¯¥è¿”å›æ–°çš„é•¿åº¦ 2, å¹¶ä¸” nums ä¸­çš„å‰ä¸¤ä¸ªå…ƒç´ å‡ä¸º 2ã€‚</p>
<p>ä½ ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚<br>ç¤ºä¾‹2:</p>
<p>ç»™å®š nums = [0,1,2,2,3,0,4,2], val = 2,</p>
<p>å‡½æ•°åº”è¯¥è¿”å›æ–°çš„é•¿åº¦ 5, å¹¶ä¸” nums ä¸­çš„å‰äº”ä¸ªå…ƒç´ ä¸º 0, 1, 3, 0, 4ã€‚</p>
<p>æ³¨æ„è¿™äº”ä¸ªå…ƒç´ å¯ä¸ºä»»æ„é¡ºåºã€‚</p>
<p>ä½ ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚</p>
<h1 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h1><p>ä¸ºä»€ä¹ˆè¿”å›æ•°å€¼æ˜¯æ•´æ•°ï¼Œä½†è¾“å‡ºçš„ç­”æ¡ˆæ˜¯æ•°ç»„å‘¢?</p>
<p>è¯·æ³¨æ„ï¼Œè¾“å…¥æ•°ç»„æ˜¯ä»¥ã€Œå¼•ç”¨ã€æ–¹å¼ä¼ é€’çš„ï¼Œè¿™æ„å‘³ç€åœ¨å‡½æ•°é‡Œä¿®æ”¹è¾“å…¥æ•°ç»„å¯¹äºè°ƒç”¨è€…æ˜¯å¯è§çš„ã€‚</p>
<p>ä½ å¯ä»¥æƒ³è±¡å†…éƒ¨æ“ä½œå¦‚ä¸‹:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// nums æ˜¯ä»¥â€œå¼•ç”¨â€æ–¹å¼ä¼ é€’çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å¯¹å®å‚ä½œä»»ä½•æ‹·è´</span></span><br><span class="line"><span class="keyword">int</span> len = removeElement(nums, val);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨å‡½æ•°é‡Œä¿®æ”¹è¾“å…¥æ•°ç»„å¯¹äºè°ƒç”¨è€…æ˜¯å¯è§çš„ã€‚</span></span><br><span class="line"><span class="comment">// æ ¹æ®ä½ çš„å‡½æ•°è¿”å›çš„é•¿åº¦, å®ƒä¼šæ‰“å°å‡ºæ•°ç»„ä¸­ è¯¥é•¿åº¦èŒƒå›´å†… çš„æ‰€æœ‰å…ƒç´ ã€‚</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">	print(nums[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="è§£"><a href="#è§£" class="headerlink" title="è§£"></a>è§£</h1><p><img src="https://gitee.com/KawYang/image/raw/master/img/20200711155701.png" alt=""></p>
<blockquote>
<p>i æ ‡è®°ç¬¦åˆå…ƒç´ çš„ç»“å°¾ï¼Œ åˆå§‹å€¼ä¸º : ç¬¬ä¸€ä¸ªä¸º val çš„å€¼ï¼Œåœ¨ i ä¹‹å‰å…¨éƒ¨ç¬¦åˆè¦æ±‚ã€‚<br>j æ ‡è®°æŸ¥æ‰¾åæ–¹å…ƒç´ ï¼Œå¦‚æœ ä¸º val : è·³è¿‡ï¼Œå¦‚æœä¸åŒï¼šå°†å…ƒç´ ç§»åŠ¨åˆ° i æ ‡è®°å¤„.</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">removeElement</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.length == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// æ‰¾å‡º i çš„åˆå§‹å€¼</span></span><br><span class="line">        <span class="keyword">while</span>(i&lt;nums.length &amp;&amp; nums[i] != val)&#123;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// j æŸ¥æ‰¾ä¸åŒçš„å…ƒç´ ï¼Œå¦‚æœä¸ç›¸åŒï¼Œç§»åŠ¨åˆ° i çš„ä½ç½®ï¼Œiåç§»ã€‚</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j&lt; nums.length; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[j] != val)&#123;</span><br><span class="line">                nums[i] = nums[j];</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<hr>
<p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode-cn.com/problems/remove-element" target="_blank" rel="noopener">https://leetcode-cn.com/problems/remove-element</a><br>è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>LeetCode</tag>
        <tag>åŒæŒ‡é’ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatis-å»¶è¿ŸåŠ è½½</title>
    <url>/kawyang/70e7f4d8.html</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡ä¸»è¦æ€»ç»“äº† <code>Mybatis</code> çš„æ•°æ®åº“å»¶è¿ŸåŠ è½½é—®é¢˜ï¼Œå°†å¤šè¡¨æŸ¥è¯¢çš„ SQL è¯­å¥è¿›è¡Œæ‹†åˆ†ï¼Œæ ¹æ®éœ€è¦è¿›è¡Œç›¸åº”çš„æŸ¥è¯¢æ“ä½œã€‚</p>
</blockquote>
<a id="more"></a>

<h3 id="assocation-å»¶è¿ŸåŠ è½½"><a href="#assocation-å»¶è¿ŸåŠ è½½" class="headerlink" title="assocation å»¶è¿ŸåŠ è½½"></a>assocation å»¶è¿ŸåŠ è½½</h3><blockquote>
<p>assocationå®ç°ä¸€å¯¹ä¸€å»¶è¿ŸåŠ è½½</p>
</blockquote>
<p>å°†çº§è”æ“ä½œ è½¬æ¢ä¸ºä¸¤æ¡SQLè¯­å¥ï¼Œé€šè¿‡ä¸¤æ¬¡æŸ¥è¯¢æ–¹å¼è¿›è¡Œè·å–æ•°æ®ã€‚</p>
<p>å«æœ‰ æ³¨å…¥å¯¹è±¡çš„å¯¹è±¡æŸ¥è¯¢ï¼Œå½“æŸ¥è¯¢ç»“æœä¸æ¶‰åŠæ³¨å…¥å¯¹è±¡ä¿¡æ¯æ—¶ï¼Œä¸è¿›è¡Œå†…åµŒå¯¹è±¡çš„æŸ¥è¯¢ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--  å»¶è¿ŸåŠ è½½  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"resultStuLazy"</span> <span class="attr">type</span>=<span class="string">"com.item.entity.Student"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"name"</span> <span class="attr">property</span>=<span class="string">"name"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ select å±æ€§ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"classes"</span> <span class="attr">javaType</span>=<span class="string">"com.item.entity.Classes_"</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">select</span>=<span class="string">"com.item.repository.IClasses.findById"</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">column</span>=<span class="string">"cid"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findById"</span> <span class="attr">resultMap</span>=<span class="string">"resultStuLazy"</span>&gt;</span></span><br><span class="line">    select id,name,cid from student where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></div>


<blockquote>
<p>åœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­å¼€å¯å»¶è¿ŸåŠ è½½</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"lazyLoadingEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"aggressiveLazyLoading"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<p><a href="https://www.jianshu.com/p/6f5b42d52d38" target="_blank" rel="noopener">name å‚æ•°å‚è€ƒ</a></p>
<h3 id="Collection-å»¶è¿ŸåŠ è½½"><a href="#Collection-å»¶è¿ŸåŠ è½½" class="headerlink" title="Collection å»¶è¿ŸåŠ è½½"></a>Collection å»¶è¿ŸåŠ è½½</h3><blockquote>
<p>Collection å®ç°ä¸€å¯¹å¤šå»¶è¿ŸåŠ è½½ã€‚</p>
</blockquote>
<p>åœ¨æŸ¥è¯¢ç­çº§ä¿¡æ¯æ—¶ï¼Œå¦‚æœéœ€è¦æŸ¥è¯¢ç­çº§å†…æ‰€æœ‰ğŸ‘¨â€ğŸ“ä¿¡æ¯ï¼Œéœ€è¦è¿›è¡Œçº§è”æ“ä½œã€‚<br>å¯ä»¥å°†è¯¥æ“ä½œåˆ†ä¸ºä¸¤æ­¥ï¼š</p>
<ul>
<li>å…ˆæ ¹æ®ğŸ†”æŸ¥è¯¢å‡ºç­çº§ä¿¡æ¯ =&gt; select * from classes where id=?</li>
<li>å†æ ¹æ®ğŸ‘©â€ğŸ“çš„ç­çº§ğŸ†”ï¼ŒæŸ¥è¯¢å‡ºç­çº§å†…æ‰€æœ‰ğŸ‘¨â€ğŸ“ =&gt; select * from student where cid=?</li>
</ul>
<blockquote>
<p>æŸ¥è¯¢ç­çº§ä¿¡æ¯</p>
</blockquote>
<p>é‡‡ç”¨é…ç½®æ–‡ä»¶çš„æ–¹å¼ï¼Œç”¨ <code>collection</code> é…ç½®ç¬¬äºŒæ­¥çš„æ“ä½œï¼Œä½¿ç”¨ <code>ofType</code> å±æ€§ï¼Œå®Œæˆæ•°æ®ç±»å‹çš„æŒ‡å®šã€‚<br>å¦‚ä¸‹ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--  å»¶è¿ŸåŠ è½½start  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"classLazy"</span> <span class="attr">type</span>=<span class="string">"com.kawyang.entity.ClassesStu"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"name"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"students"</span> <span class="attr">ofType</span>=<span class="string">"com.kawyang.entity.Student"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">select</span>=<span class="string">"com.kawyang.repository.IStudentRepository.findByCid"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">column</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findByIdLazy"</span> <span class="attr">resultMap</span>=<span class="string">"classLazy"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span>&gt;</span></span><br><span class="line">    select * from classes where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  å»¶è¿ŸåŠ è½½end  --&gt;</span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>æ ¹æ®ç­çº§ ğŸ†” æŸ¥è¯¢æ‰€æœ‰ğŸ‘©â€ğŸ“ğŸ‘¨â€ğŸ“ï¼Œä½¿ç”¨æ³¨è§£æ–¹å¼å¦‚ä¸‹ï¼š</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Select</span>(<span class="string">"select * from student where cid=#&#123;id&#125;"</span>)</span><br><span class="line"><span class="function">List&lt;Student&gt; <span class="title">findByCid</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br></pre></td></tr></table></figure></div>

<h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line">IStudentRepository mapper = MapperUtil.getMapper(<span class="string">"config.xml"</span>, IStudentRepository<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">Student byIdLazy = mapper.findByIdLazy(<span class="number">2</span>);</span><br><span class="line"><span class="comment">//é€šè¿‡ ğŸ†” æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯ï¼Œåªéœ€è¦è·å– name å±æ€§ï¼Œä¸éœ€è¦è¿›è¡Œç¬¬äºŒæ­¥æ“ä½œã€‚</span></span><br><span class="line">System.out.println(byIdLazy.getName());</span><br><span class="line">System.out.println(<span class="string">"------------"</span>);</span><br><span class="line"><span class="comment">//éœ€è¦è·å–ç­çº§çš„åç§°ï¼Œéœ€è¦è¿›è¡Œä¸¤æ¬¡æŸ¥è¯¢æ“ä½œã€‚</span></span><br><span class="line">System.out.println(byIdLazy.getClasses().getName());</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">"============"</span>);</span><br><span class="line"></span><br><span class="line">IClassRepository mapper1 = MapperUtil.getMapper(<span class="string">"config.xml"</span>, IClassRepository<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">ClassesStu byIdLazy1 = mapper1.findByIdLazy(<span class="number">2</span>);</span><br><span class="line"><span class="comment">//é€šè¿‡ ğŸ†” æŸ¥è¯¢æœ¬å­£ä¿¡æ¯ï¼Œåªéœ€è¦è·å– name å±æ€§ï¼Œä¸éœ€è¦è¿›è¡Œç¬¬äºŒæ­¥æ“ä½œã€‚</span></span><br><span class="line">System.out.println(byIdLazy1.getName());</span><br><span class="line">System.out.println(<span class="string">"------------"</span>);</span><br><span class="line"><span class="comment">//éœ€è¦è·å–ç­çº§æ‰€æœ‰ğŸ‘©â€ğŸ“ğŸ‘¨â€ğŸ“ä¿¡æ¯ï¼Œéœ€è¦è¿›è¡Œä¸¤æ¬¡æŸ¥è¯¢æ“ä½œã€‚</span></span><br><span class="line">System.out.println(byIdLazy1.getStudents());</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>è¿è¡Œç»“æœ</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SHELL"><figure class="iseeu highlight /shell"><table><tr><td class="code"><pre><span class="line">Opening JDBC Connection</span><br><span class="line">Created connection 1267149311.</span><br><span class="line">Setting autocommit to false on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@4b8729ff]</span><br><span class="line">==&gt;  Preparing: select * from student where id=?</span><br><span class="line">==&gt; Parameters: 2(Integer)</span><br><span class="line">&lt;==    Columns: id, name, cid</span><br><span class="line">&lt;==        Row: 2, KawYang, 2</span><br><span class="line">&lt;==      Total: 1</span><br><span class="line">KawYang</span><br><span class="line">------------</span><br><span class="line">==&gt;  Preparing: select * from classes where id=?</span><br><span class="line">==&gt; Parameters: 2(Integer)</span><br><span class="line">&lt;==    Columns: id, name</span><br><span class="line">&lt;==        Row: 2, äºŒç­</span><br><span class="line">&lt;==      Total: 1</span><br><span class="line">äºŒç­</span><br><span class="line"></span><br><span class="line">============</span><br><span class="line"></span><br><span class="line">Opening JDBC Connection</span><br><span class="line">Created connection 1414549197.</span><br><span class="line">Setting autocommit to false on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@54504ecd]</span><br><span class="line">==&gt;  Preparing: select * from classes where id=?</span><br><span class="line">==&gt; Parameters: 2(Integer)</span><br><span class="line">&lt;==    Columns: id, name</span><br><span class="line">&lt;==        Row: 2, äºŒç­</span><br><span class="line">&lt;==      Total: 1</span><br><span class="line">äºŒç­</span><br><span class="line">------------</span><br><span class="line">==&gt;  Preparing: select * from student where cid=?</span><br><span class="line">==&gt; Parameters: 2(Integer)</span><br><span class="line">&lt;==    Columns: id, name, cid</span><br><span class="line">&lt;==        Row: 2, KawYang, 2</span><br><span class="line">&lt;==        Row: 3, å¼ ä¸‰, 2</span><br><span class="line">&lt;==      Total: 2</span><br><span class="line">[Student(id=2, name=KawYang, classes=null), Student(id=3, name=å¼ ä¸‰, classes=null)]</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure></div>

<p>âš ï¸ : ç”±äº MyBatis é»˜è®¤å¼€å¯ä¸€çº§ç¼“å­˜ï¼Œæ‰€ä»¥åœ¨ç¬¬äºŒæ­¥æŸ¥è¯¢æ—¶ï¼Œåªæ‰§è¡Œäº†ç¬¬äºŒæ¡SQLè¯­å¥ã€‚</p>
]]></content>
      <categories>
        <category>æ¡†æ¶</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
        <tag>SQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatis-æ•°æ®ç¼“å­˜</title>
    <url>/kawyang/579a3ded.html</url>
    <content><![CDATA[<blockquote>
<p>å°†æŸ¥è¯¢è¿‡çš„æ•°æ®è¿›è¡Œç¼“å­˜ï¼Œå¯ä»¥å‡å°‘æ•°æ®åº“è®¿é—®çš„æ¬¡æ•°ï¼Œå‡è½»è´Ÿæ‹…æœåŠ¡å™¨çš„ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æé«˜æ•°æ®è®¿é—®æ—¶é—´ã€‚</p>
</blockquote>
<a id="more"></a>

<h2 id="ä¸€çº§ç¼“å­˜"><a href="#ä¸€çº§ç¼“å­˜" class="headerlink" title="ä¸€çº§ç¼“å­˜"></a>ä¸€çº§ç¼“å­˜</h2><blockquote>
<p>ä¸€çº§ç¼“å­˜æ˜¯ SqlSession çº§åˆ«çš„ç¼“å­˜ï¼Œåªè¦ SqlSession æ²¡æœ‰è¢« close æˆ– flush ï¼Œå°±ä¼šå­˜åœ¨ã€‚</p>
</blockquote>
<ul>
<li><p>å½“æ‰§è¡Œä¸¤æ¬¡ç›¸åŒçš„æŸ¥è¯¢æ—¶ï¼ŒMyBatis ä¼šå°†ç¬¬ä¸€æ¬¡æŸ¥è¯¢çš„ç»“æœä¿å­˜åˆ°ç¼“å­˜ä¸­ï¼Œå†æ¬¡è¿è¡ŒæŸ¥è¯¢ä»£ç ï¼Œå°±ä¸éœ€è¦æ‰§è¡ŒSQL è¯­å¥ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è·å–æ•°æ®ã€‚</p>
</li>
<li><p>å½“è°ƒç”¨ SqlSession å¯¹æ•°æ®è¿›è¡Œ ä¿®æ”¹ã€æ’å…¥ã€åˆ é™¤ã€commit()ã€close() ç­‰å°±ä¼šæ¸…ç©ºä¸€çº§ç¼“å­˜ã€‚ä»¥ä¿è¯ç¼“å­˜ä¸­æ•°æ®ä¸ºæœ€æ–°æ•°æ®ï¼Œé¿å…è„è¯»ã€‚</p>
</li>
<li><p>ä¸€çº§ç¼“å­˜æ¸…ç©ºï¼š</p>
<ul>
<li>è°ƒç”¨ SqlSessionå¯¹è±¡çš„ <code>clearCache()</code> æ–¹æ³•</li>
<li>close()</li>
<li>commit()</li>
</ul>
</li>
</ul>
<h2 id="äºŒçº§ç¼“å­˜"><a href="#äºŒçº§ç¼“å­˜" class="headerlink" title="äºŒçº§ç¼“å­˜"></a>äºŒçº§ç¼“å­˜</h2><blockquote>
<p>äºŒçº§ç¼“å­˜æ˜¯ <code>Mapper</code> æ˜ å°„çº§åˆ«çš„ç¼“å­˜ï¼Œå¤šä¸ª SqlSession å¯¹è±¡ï¼Œæ“ä½œåŒä¸€ä¸ª Mapper æ˜ å°„çš„ SQL ï¼Œå…¬ç”¨ä¸€ä¸ªç¼“å­˜å¯¹è±¡ã€‚</p>
</blockquote>
<h3 id="ä½¿ç”¨æ­¥éª¤"><a href="#ä½¿ç”¨æ­¥éª¤" class="headerlink" title="ä½¿ç”¨æ­¥éª¤"></a>ä½¿ç”¨æ­¥éª¤</h3><h4 id="å¼•å…¥åæ ‡"><a href="#å¼•å…¥åæ ‡" class="headerlink" title="å¼•å…¥åæ ‡"></a>å¼•å…¥åæ ‡</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ehchache ç¼“å­˜  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>net.sf.ehcache<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h4 id="å¼€å¯ç¼“å­˜"><a href="#å¼€å¯ç¼“å­˜" class="headerlink" title="å¼€å¯ç¼“å­˜"></a>å¼€å¯ç¼“å­˜</h4><p>åœ¨ MyBatisçš„é…ç½®æ–‡ä»¶ä¸­(config.xml)ï¼Œä½¿ç”¨ settings æ ‡ç­¾ä¸‹ çš„ setting æ ‡ç­¾ å¼€å¯ç¼“å­˜ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--  æ‰“å°SQL  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"logImpl"</span> <span class="attr">value</span>=<span class="string">"STDOUT_LOGGING"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--  å¼€å¯å»¶è¿ŸåŠ è½½  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"lazyLoadingEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--  å¼€å¯äºŒçº§ç¼“å­˜  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"cacheEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h4 id="é…ç½®Mapper"><a href="#é…ç½®Mapper" class="headerlink" title="é…ç½®Mapper"></a>é…ç½®Mapper</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"..."</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">cache</span>&gt;</span><span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">cache</span> <span class="attr">type</span>=<span class="string">"org.mybatis.caches.ehcache.LoggingEhcache"</span> &gt;</span></span><br><span class="line">		<span class="comment">&lt;!--   åˆ›å»ºç¼“å­˜ä¹‹åï¼Œå¯¹å¼ä¸€æ¬¡è®¿é—®ç¼“å­˜çš„æ—¶é—´å€¼ç¼“å­˜å¤±æ•ˆçš„æ—¶é—´é—´éš”  --&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"timeToIdleSeconds"</span> <span class="attr">value</span>=<span class="string">"3600"</span>/&gt;</span><span class="comment">&lt;!--1 hour--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--   ç¼“å­˜è‡ªåˆ›å»ºæ—¶é—´èµ·è‡³å¤±æ•ˆçš„æ—¶é—´é—´éš”  --&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"timeToLiveSeconds"</span> <span class="attr">value</span>=<span class="string">"3600"</span>/&gt;</span><span class="comment">&lt;!--1 hour--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--        --&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxEntriesLocalHeap"</span> <span class="attr">value</span>=<span class="string">"1000"</span>/&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxEntriesLocalDisk"</span> <span class="attr">value</span>=<span class="string">"10000000"</span>/&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--   ç¼“å­˜å›æ”¶ç­–ç•¥ï¼Œç§»é™¤-è¿‘æœŸä½¿ç”¨æœ€å°‘çš„å¯¹è±¡ --&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"memoryStoreEvictionPolicy"</span> <span class="attr">value</span>=<span class="string">"LRU"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div>


<h4 id="é…ç½®-useCache-å±æ€§"><a href="#é…ç½®-useCache-å±æ€§" class="headerlink" title="é…ç½® useCache å±æ€§"></a>é…ç½® useCache å±æ€§</h4><blockquote>
<p>å¦‚æœæ¯æ¬¡æŸ¥è¯¢éƒ½éœ€è¦æœ€æ–°çš„æ•°æ®ï¼Œéœ€è¦å°† selectğŸ·ï¸ ä¸­çš„ <code>useCache</code> å±æ€§è®¾ç½®ä¸º <code>false</code>, ç¦ç”¨äºŒçº§ç¼“å­˜ã€‚</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultType</span>=<span class="string">"com.item.entity.Student"</span> <span class="attr">useCache</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">    select id,name from student </span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><blockquote>
<p>æ­¥éª¤</p>
</blockquote>
<p>ä½¿ç”¨<code>åŒä¸€ä¸ª</code>Mapperæ˜ å°„ï¼Œåˆ›å»ºä¸¤ä¸ª<code>ä¸åŒ</code>çš„ SqlSession å¯¹è±¡ï¼Œåˆ†åˆ«æ‰§è¡Œ<code>ç›¸åŒ</code> çš„SQLæ“ä½œ</p>
<p>if : æ‰§è¡Œä¸€æ¬¡ SQL è¯­å¥<br>    äºŒçº§ç¼“å­˜æˆåŠŸï¼<br>else :<br>    äºŒçº§ç¼“å­˜å¤±è´¥ï¼</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FindCache</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        InputStream resourceAsStream = FindCache.class.getClassLoader().getResourceAsStream("config.xml");</span><br><span class="line">        SqlSessionFactoryBuilder builder = <span class="keyword">new</span> SqlSessionFactoryBuilder();</span><br><span class="line">        SqlSessionFactory build = builder.build(resourceAsStream);</span><br><span class="line">        SqlSession sqlSession = build.openSession();</span><br><span class="line">        IGoodRepository mapper = sqlSession.getMapper(IGoodRepository<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        Good goodById = mapper.findGoodById(<span class="number">2</span>);</span><br><span class="line">        System.out.println(goodById.toString());</span><br><span class="line">        <span class="comment">//å…³é—­ä¸€çº§ç¼“å­˜</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line"></span><br><span class="line">        SqlSession sqlSession1 = build.openSession();</span><br><span class="line">        IGoodRepository mapper1 = sqlSession1.getMapper(IGoodRepository<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        Good goodById1 = mapper1.findGoodById(<span class="number">2</span>);</span><br><span class="line">        System.out.println(goodById1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ç»“æœ:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SHELL"><figure class="iseeu highlight /shell"><table><tr><td class="code"><pre><span class="line">Cache Hit Ratio [com.kawyang.repository.IGoodRepository]: 0.0</span><br><span class="line">Opening JDBC Connection</span><br><span class="line">Created connection 392918519.</span><br><span class="line">Setting autocommit to false on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@176b75f7]</span><br><span class="line">==&gt;  Preparing: select * from good where id=?</span><br><span class="line">==&gt; Parameters: 2(Integer)</span><br><span class="line">&lt;==    Columns: id, name</span><br><span class="line">&lt;==        Row: 2, ç”µå†°ç®±</span><br><span class="line">&lt;==      Total: 1</span><br><span class="line">Good(id=2, name=ç”µå†°ç®±, consumers=null)</span><br><span class="line">Resetting autocommit to true on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@176b75f7]</span><br><span class="line">Closing JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@176b75f7]</span><br><span class="line">Returned connection 392918519 to pool.</span><br><span class="line">Cache Hit Ratio [com.kawyang.repository.IGoodRepository]: 0.5</span><br><span class="line">Good(id=2, name=ç”µå†°ç®±, consumers=null)</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>ä¸€ä¸‹å…·ä½“å†…å®¹åŠåŸå› ï¼Œæœ‰å¾…è¿›ä¸€æ­¥äº†è§£å­¦ä¹ ã€‚</p>
</blockquote>
<p>âš ï¸ : å¦‚æœä½¿ç”¨ sqlSession.clearCache(); æ¸…é™¤ç¼“å­˜ï¼Œä½†ä¾ç„¶ç¼“å­˜ç€å…¶ä»– SqlSession å¯¹è±¡çš„ç¼“å­˜æ•°æ®ã€‚</p>
<p>å¦‚ä¸‹æµ‹è¯•ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FindCache</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        InputStream resourceAsStream = FindCache.class.getClassLoader().getResourceAsStream("config.xml");</span><br><span class="line">        SqlSessionFactoryBuilder builder = <span class="keyword">new</span> SqlSessionFactoryBuilder();</span><br><span class="line">        SqlSessionFactory build = builder.build(resourceAsStream);</span><br><span class="line">        SqlSession sqlSession = build.openSession();</span><br><span class="line">        IGoodRepository mapper = sqlSession.getMapper(IGoodRepository<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        Good goodById = mapper.findGoodById(<span class="number">2</span>);</span><br><span class="line">        System.out.println(goodById.toString());</span><br><span class="line"></span><br><span class="line">        SqlSession sqlSession1 = build.openSession();</span><br><span class="line">        IGoodRepository mapper1 = sqlSession1.getMapper(IGoodRepository<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        Good goodById1 = mapper1.findGoodById(<span class="number">2</span>);</span><br><span class="line">        System.out.println(goodById1.toString());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…³é—­ä¸€çº§ç¼“å­˜</span></span><br><span class="line">        sqlSession.clearCache();</span><br><span class="line">        System.out.println(<span class="string">"====    ğŸ†‘ sqlSessionç¼“å­˜    ===="</span>);</span><br><span class="line">        System.out.println(sqlSession1.getMapper(IGoodRepository<span class="class">.<span class="keyword">class</span>).<span class="title">findGoodById</span>(2))</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ç»“æœ:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="code"><pre><span class="line">Opening JDBC Connection</span><br><span class="line">Created connection 392918519.</span><br><span class="line">Setting autocommit to false on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@176b75f7]</span><br><span class="line">&#x3D;&#x3D;&gt;  Preparing: select * from good where id&#x3D;?</span><br><span class="line">&#x3D;&#x3D;&gt; Parameters: 2(Integer)</span><br><span class="line">&lt;&#x3D;&#x3D;    Columns: id, name</span><br><span class="line">&lt;&#x3D;&#x3D;        Row: 2, ç”µå†°ç®±</span><br><span class="line">&lt;&#x3D;&#x3D;      Total: 1</span><br><span class="line">Good(id&#x3D;2, name&#x3D;ç”µå†°ç®±, consumers&#x3D;null)</span><br><span class="line">Cache Hit Ratio [com.kawyang.repository.IGoodRepository]: 0.0</span><br><span class="line">Opening JDBC Connection</span><br><span class="line">Created connection 1804126860.</span><br><span class="line">Setting autocommit to false on JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@6b88ca8c]</span><br><span class="line">&#x3D;&#x3D;&gt;  Preparing: select * from good where id&#x3D;?</span><br><span class="line">&#x3D;&#x3D;&gt; Parameters: 2(Integer)</span><br><span class="line">&lt;&#x3D;&#x3D;    Columns: id, name</span><br><span class="line">&lt;&#x3D;&#x3D;        Row: 2, ç”µå†°ç®±</span><br><span class="line">&lt;&#x3D;&#x3D;      Total: 1</span><br><span class="line">Good(id&#x3D;2, name&#x3D;ç”µå†°ç®±, consumers&#x3D;null)</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;    ğŸ†‘ sqlSessionç¼“å­˜    &#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">Cache Hit Ratio [com.kawyang.repository.IGoodRepository]: 0.0</span><br><span class="line">Good(id&#x3D;2, name&#x3D;ç”µå†°ç®±, consumers&#x3D;null)</span><br></pre></td></tr></table></figure></div>
]]></content>
      <categories>
        <category>æ¡†æ¶</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
        <tag>ç¼“å­˜</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatis-çº§è”æ“ä½œ</title>
    <url>/kawyang/fb315360.html</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡ä»‹ç»äº†<code>MyBatis</code>çš„çº§è”æ“ä½œï¼Œé€šè¿‡æŸ¥è¯¢å¤šå¼ è¡¨å®Œæˆæ•°æ®çš„è·å–ï¼Œå…³é”®åœ¨äºç»ƒä¹  <code>resultMap</code>ã€<code>association</code>ã€<code>collection</code> æ ‡ç­¾ã€‚</p>
</blockquote>
<a id="more"></a>


<h1 id="MyBatis-çº§è”æ“ä½œ"><a href="#MyBatis-çº§è”æ“ä½œ" class="headerlink" title="MyBatis çº§è”æ“ä½œ"></a>MyBatis çº§è”æ“ä½œ</h1><p><a href="http://c.biancheng.net/view/4367.html" target="_blank" rel="noopener">è¯¦ç»†æ•™ç¨‹ç½‘ç»œèµ„æº</a></p>
<p><a href="https://github.com/LYgithub/IDEAProjects/tree/master/MyBatisNodeDemo2" target="_blank" rel="noopener">é¡¹ç›®</a></p>
<h2 id="ä¸€å¯¹ä¸€-student-gt-class"><a href="#ä¸€å¯¹ä¸€-student-gt-class" class="headerlink" title="ä¸€å¯¹ä¸€ (student -&gt; class)"></a>ä¸€å¯¹ä¸€ (student -&gt; class)</h2><p>student åŒ…å«ä¸ªäººåŸºæœ¬ä¿¡æ¯å’Œå†…åµŒå¯¹è±¡ classesã€‚<br>åœ¨æŸ¥è¯¢studentæ—¶ï¼Œéœ€è¦è”åˆ studentè¡¨å’Œclassesè¡¨è¿›è¡ŒæŸ¥è¯¢ã€‚</p>
<h3 id="æ•°æ®è¡¨"><a href="#æ•°æ®è¡¨" class="headerlink" title="æ•°æ®è¡¨"></a>æ•°æ®è¡¨</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> classes(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> primary <span class="keyword">key</span>,</span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes (<span class="keyword">id</span>,<span class="keyword">name</span>) <span class="keyword">values</span> (<span class="number">1</span>,<span class="string">"ä¸€ç­"</span>),(<span class="number">2</span>,<span class="string">"äºŒç­"</span>),(<span class="number">3</span>,<span class="string">"ä¸‰ç­"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">10</span>),</span><br><span class="line">    cid <span class="built_in">int</span>,</span><br><span class="line">    <span class="keyword">foreign</span> <span class="keyword">key</span> (cid) <span class="keyword">references</span> classes(<span class="keyword">id</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student (<span class="keyword">id</span>, <span class="keyword">name</span>, cid) </span><br><span class="line">	<span class="keyword">values</span> (<span class="number">1</span>,<span class="string">"KawYang"</span>,<span class="number">1</span>),(<span class="number">2</span>,<span class="string">"KawYang"</span>,<span class="number">2</span>),(<span class="number">3</span>,<span class="string">"å¼ ä¸‰"</span>,<span class="number">2</span>),(<span class="number">4</span>,<span class="string">"æå››"</span>,<span class="number">3</span>),(<span class="number">5</span>,<span class="string">"Tom"</span>,<span class="number">3</span>),(<span class="number">6</span>,<span class="string">"Jary"</span>,<span class="number">3</span>);</span><br></pre></td></tr></table></figure></div>

<h3 id="å®ä½“ç±»"><a href="#å®ä½“ç±»" class="headerlink" title="å®ä½“ç±»"></a>å®ä½“ç±»</h3><ul>
<li>Classesç±»å¯¹è±¡</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Classes</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>Studentç±»å¯¹è±¡</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> Classes classes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="Repository"><a href="#Repository" class="headerlink" title="Repository"></a>Repository</h3><p>ç¼–å†™æ•°æ®åº“æ“ä½œçš„æ¥å£</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IStudentRepository</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * find by id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> student</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">Student <span class="title">findById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * find all</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> student list</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;Student&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="Mapper"><a href="#Mapper" class="headerlink" title="Mapper"></a>Mapper</h3><p>mapperğŸ·ï¸ : <code>namespace</code> å±æ€§æ˜ å°„åˆ° <code>student</code> çš„æ“ä½œæ¥å£ã€‚<br>resultMapğŸ·ï¸ : é…ç½®ç±»å¯¹è±¡ â€“&gt; åœ¨ <code>select</code> æ ‡ç­¾ä¸­ï¼Œä½¿ç”¨ <code>resultMap</code> å±æ€§è¿›è¡Œæ˜ å°„ã€‚<br>associationğŸ·ï¸ : æ³¨å…¥å†…åµŒå¯¹è±¡ï¼Œ<code>javaType</code> å°†å†…åµŒå¯¹è±¡æ˜ å°„åˆ°å®ä½“ç±»ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.kawyang.repository.IStudentRepository"</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"student"</span> <span class="attr">type</span>=<span class="string">"com.kawyang.entity.Student"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"sid"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"sname"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"classes"</span> <span class="attr">ofType</span>=<span class="string">"com.kawyang.entity.Classes"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"cid"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"cname"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findById"</span> <span class="attr">resultMap</span>=<span class="string">"student"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span>&gt;</span></span><br><span class="line">        select s.id as sid,s.name as sname, c.id as cid, c.name as cname</span><br><span class="line">        from student s,classes c</span><br><span class="line">        where s.cid=c.id and s.id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">        select s.id as sid,s.name as sname, c.id as cid, c.name as cname</span><br><span class="line">        from student s,classes c</span><br><span class="line">        where s.cid=c.id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div>


<h2 id="ä¸€å¯¹å¤š-class-gt-studentes"><a href="#ä¸€å¯¹å¤š-class-gt-studentes" class="headerlink" title="ä¸€å¯¹å¤š (class -&gt; studentes)"></a>ä¸€å¯¹å¤š (class -&gt; studentes)</h2><p>ä¸€ä¸ªç­çº§å«æœ‰å¤šä¸ªğŸ‘¨â€ğŸ“ï¼Œé€šè¿‡æŸ¥è¯¢ç­çº§ä¿¡æ¯ï¼Œèƒ½å¤Ÿå°†ç­çº§ä¸­çš„æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯æŸ¥è¯¢å‡ºæ¥<br>éœ€è¦è”åˆ classesç±»å’Œstudentè¿›è¡ŒæŸ¥è¯¢ã€‚</p>
<h3 id="æ•°æ®è¡¨-1"><a href="#æ•°æ®è¡¨-1" class="headerlink" title="æ•°æ®è¡¨"></a>æ•°æ®è¡¨</h3><p>åŒä¸Š</p>
<h3 id="å®ä½“ç±»-1"><a href="#å®ä½“ç±»-1" class="headerlink" title="å®ä½“ç±»"></a>å®ä½“ç±»</h3><ul>
<li>ClassesStu<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassesStu</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> id;</span><br><span class="line">	String name;</span><br><span class="line">	List&lt;Student&gt; students;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

</li>
</ul>
<h3 id="Repository-1"><a href="#Repository-1" class="headerlink" title="Repository"></a>Repository</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IClassesStuRepository</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * find classesStu by id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> classesStu</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">ClassesStu <span class="title">findById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * find all classesStu</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> classesStu list</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;ClassesStu&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="Mapper-1"><a href="#Mapper-1" class="headerlink" title="Mapper"></a>Mapper</h3><p>é…ç½®æ–‡ä»¶resultMap</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"classesStu"</span> <span class="attr">type</span>=<span class="string">"com.kawyang.entity.ClassesStu"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"cid"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"cname"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"students"</span> <span class="attr">ofType</span>=<span class="string">"com.kawyang.entity.Student"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"sid"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"sname"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>collectionğŸ·ï¸ : å°†æŸ¥è¯¢çš„ <code>cid &amp; cname</code> ç›¸åŒçš„ç»“æœï¼Œå°† sid å’Œ sname å°è£…æˆ <code>ofType</code> æŒ‡å®šç±»å‹çš„å¯¹è±¡ï¼Œå¹¶å°†å¤šä¸ªå¯¹è±¡ä»¥é›†åˆçš„æ–¹å¼è¿”å›ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SHELL"><figure class="iseeu highlight /shell"><table><tr><td class="code"><pre><span class="line">==&gt;  Preparing: select c.id as cid, c.name as cname, s.id as sid, s.name as sname from student s, classes c where c.id=s.cid</span><br><span class="line">==&gt; Parameters: </span><br><span class="line">&lt;==    Columns: cid, cname, sid, sname</span><br><span class="line">&lt;==        Row: 1, ä¸€ç­, 1, KawYang</span><br><span class="line">&lt;==        Row: 2, äºŒç­, 2, KawYang</span><br><span class="line">&lt;==        Row: 2, äºŒç­, 3, å¼ ä¸‰</span><br><span class="line">&lt;==        Row: 3, ä¸‰ç­, 4, æå››</span><br><span class="line">&lt;==        Row: 3, ä¸‰ç­, 5, Tom</span><br><span class="line">&lt;==        Row: 3, ä¸‰ç­, 6, Jary</span><br><span class="line">&lt;==      Total: 6</span><br></pre></td></tr></table></figure></div>

<h2 id="å¤šå¯¹å¤š-goods-lt-gt-consumers"><a href="#å¤šå¯¹å¤š-goods-lt-gt-consumers" class="headerlink" title="å¤šå¯¹å¤š (goods &lt;-&gt; consumers)"></a>å¤šå¯¹å¤š (goods &lt;-&gt; consumers)</h2><pre><code>ä¸€ç§å•†å“å¯ä»¥è¢«å¤šä¸ªæ¶ˆè´¹è€…è´­ä¹°
ä¸€ä¸ªæ¶ˆè´¹è€…å¯ä»¥è´­ä¹°å¤šä¸ªå•†å“
å•†å“ä¸æ¶ˆè´¹è€…äº‹å¤šå¯¹å¤šçš„å…³ç³»ã€‚</code></pre><h3 id="æ•°æ®è¡¨-2"><a href="#æ•°æ®è¡¨-2" class="headerlink" title="æ•°æ®è¡¨"></a>æ•°æ®è¡¨</h3><p>good : å•†å“ä¿¡æ¯è¡¨<br>consumer : æ¶ˆè´¹è€…ä¿¡æ¯è¡¨<br>con_good : ä¸­é—´è¡¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> good(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> <span class="keyword">not</span> <span class="literal">null</span> ,</span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">30</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> good (<span class="keyword">id</span>, <span class="keyword">name</span>) <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="string">"ç”µè§†"</span>),(<span class="number">2</span>, <span class="string">"ç”µå†°ç®±"</span>),(<span class="number">3</span>, <span class="string">"æ´—è¡£æœº"</span>),(<span class="number">4</span>,<span class="string">"ç¬”è®°æœ¬"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> consumer(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">30</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> consumer (<span class="keyword">id</span>, <span class="keyword">name</span>) <span class="keyword">VALUES</span>  (<span class="number">1</span>,<span class="string">"KawYang"</span>),(<span class="number">2</span>,<span class="string">"æå››"</span>),(<span class="number">3</span>,<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> con_good(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> <span class="keyword">not</span> <span class="literal">null</span> ,</span><br><span class="line">    gid <span class="built_in">int</span>,</span><br><span class="line">    cid <span class="built_in">int</span>,</span><br><span class="line">    <span class="keyword">foreign</span> <span class="keyword">key</span> (gid) <span class="keyword">references</span> good(<span class="keyword">id</span>),</span><br><span class="line">    <span class="keyword">foreign</span> <span class="keyword">key</span> (cid) <span class="keyword">references</span> consumer(<span class="keyword">id</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> con_good (<span class="keyword">id</span>, gid, cid) <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>),(<span class="number">2</span>,<span class="number">3</span>,<span class="number">2</span>),(<span class="number">3</span>,<span class="number">1</span>,<span class="number">3</span>),(<span class="number">4</span>,<span class="number">2</span>,<span class="number">1</span>),(<span class="number">5</span>,<span class="number">4</span>,<span class="number">2</span>),(<span class="number">6</span>,<span class="number">3</span>,<span class="number">3</span>);</span><br></pre></td></tr></table></figure></div>

<h3 id="Mapper-2"><a href="#Mapper-2" class="headerlink" title="Mapper"></a>Mapper</h3><pre><code>å¤šå¯¹å¤šç›¸å½“äºä¸¤ä¸ªä¸€å¯¹å¤šçš„å…³ç³»ï¼Œéœ€è¦é…ç½®ä¸¤ä¸ªxmlæ–‡ä»¶</code></pre><ul>
<li><p>IGoodMapper</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.kawyang.repository.IGoodRepository"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"good"</span> <span class="attr">type</span>=<span class="string">"com.kawyang.entity.Good"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"gid"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"gname"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"consumers"</span> <span class="attr">ofType</span>=<span class="string">"com.kawyang.entity.Consumer"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"cid"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"cname"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"good"</span> &gt;</span></span><br><span class="line">        select g.id as gid,g.name as gname, c.id as cid, c.name as cname</span><br><span class="line">        from good g,consumer c,con_good m</span><br><span class="line">        where g.id=m.gid and m.cid=c.id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findById"</span> <span class="attr">resultMap</span>=<span class="string">"good"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span>&gt;</span></span><br><span class="line">        select c.id as cid,c.name as cname,g.id as gid,g.name as gname</span><br><span class="line">        from Good as g,Consumer as c, Con_good m</span><br><span class="line">        where c.id = m.cid and g.id=m.gid and g.id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>IConsumerMapper</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.kawyang.repository.IConsumerRepository"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"consumer"</span> <span class="attr">type</span>=<span class="string">"com.kawyang.entity.Consumer"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"name"</span> <span class="attr">property</span>=<span class="string">"name"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"goods"</span> <span class="attr">ofType</span>=<span class="string">"com.kawyang.entity.Good"</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"gid"</span> <span class="attr">property</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"gname"</span> <span class="attr">property</span>=<span class="string">"name"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"consumer"</span> &gt;</span></span><br><span class="line">        select c.id as id,c.name as name,g.id as gid,g.name as gname</span><br><span class="line">        from Good as g,Consumer as c, Con_good m</span><br><span class="line">        where c.id = m.cid and g.id=m.gid;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findById"</span> <span class="attr">resultMap</span>=<span class="string">"consumer"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span>&gt;</span></span><br><span class="line">        select c.id as id,c.name as name,g.id as gid,g.name as gname</span><br><span class="line">        from Good as g,Consumer as c, Con_good m</span><br><span class="line">        where c.id = m.cid and g.id=m.gid and g.id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></div>






</li>
</ul>
]]></content>
      <categories>
        <category>æ¡†æ¶</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
        <tag>SQL</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatis-æ¨¡ç³ŠæŸ¥è¯¢&amp;åŠ¨æ€SQL</title>
    <url>/kawyang/5882fb3c.html</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡è®²è¿°äº†æ¨¡ç³ŠæŸ¥è¯¢çš„æ“ä½œæ–¹æ³•ï¼Œé…ç½®å®ä½“ç±»å…¨å±€è·¯å¾„æ–¹æ³•ç­‰å†…å®¹ï¼Œä¸»è¦å¯¹ <code>MyBatis</code> çš„åŠ¨æ€SQLæŸ¥è¯¢æ–¹å¼è¿›è¡Œäº†ç›¸å…³æ€»ç»“ã€‚</p>
</blockquote>
<a id="more"></a>

<h2 id="æ¨¡ç³ŠæŸ¥è¯¢"><a href="#æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="æ¨¡ç³ŠæŸ¥è¯¢"></a>æ¨¡ç³ŠæŸ¥è¯¢</h2><ul>
<li>#{} sqlè¯­å¥å ä½ç¬¦</li>
<li>${} sqlè¯­å¥æ‹¼æ¥</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">name</span> <span class="keyword">like</span> <span class="comment">#&#123;data&#125;;</span></span><br><span class="line"><span class="comment">-- =&gt; select * from student where name like ?;</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> student <span class="keyword">where</span> <span class="keyword">name</span> <span class="keyword">like</span> <span class="string">'%$&#123;data&#125;%'</span>; </span><br><span class="line"><span class="comment">-- =&gt; select * from student where name like '%data%';</span></span><br></pre></td></tr></table></figure></div>

<h2 id="é…ç½®å®ä½“ç±»è·¯å¾„-åˆ«å"><a href="#é…ç½®å®ä½“ç±»è·¯å¾„-åˆ«å" class="headerlink" title="é…ç½®å®ä½“ç±»è·¯å¾„ (åˆ«å)"></a>é…ç½®å®ä½“ç±»è·¯å¾„ (åˆ«å)</h2><p>åœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--  åˆ«åè®¾ç½®ï¼Œæ”¾åœ¨settingsæ ‡ç­¾ä¹‹ä¸‹ï¼Œenvironment æ ‡ç­¾ä¹‹å‰  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- å•ä¸ªåˆ«åé…ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">"student"</span> <span class="attr">type</span>=<span class="string">"com.kawyang.entity.Student"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--   æ‰¹é‡åˆ«åï¼Œæ‰«æåŒ…å†…æ‰€æœ‰å†…å®¹ï¼Œåˆ«åä¸ºç±»å(é¦–å­—æ¯å¤§å°å†™éƒ½å¯ä»¥)     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.kawyang.entity"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<blockquote>
<p>é…ç½®æ–‡ä»¶ä¹¦å†™é¡ºåº<br>properties?,settings?,typeAliases?,typeHandlers?,objectFactory?,<br>objectWrapperFactory?,plugins?,environments?,databaseIdProvider?,mappers?</p>
</blockquote>
<h2 id="åŠ¨æ€SQL"><a href="#åŠ¨æ€SQL" class="headerlink" title="åŠ¨æ€SQL"></a>åŠ¨æ€SQL</h2><h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><blockquote>
<p>é€šè¿‡ if æ ‡ç­¾å¯ä»¥åˆ¤æ–­æ˜¯å¦åŒ…å«æŸ¥è¯¢çš„å­—æ®µ</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findByStudent"</span> <span class="attr">parameterType</span>=<span class="string">"student"</span> <span class="attr">resultType</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">        select * from student where 1=1</span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"name != null and name != ''"</span>&gt;</span></span><br><span class="line">            and name like #&#123;name&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"age != -1"</span>&gt;</span></span><br><span class="line">            and age=#&#123;age&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h3 id="where"><a href="#where" class="headerlink" title="where"></a>where</h3><blockquote>
<p>é€šè¿‡ where æ ‡ç­¾å¯ä»¥è§£å†³ä»¥ä¸Š 1=1 çš„å¤šä½™å†…å®¹  </p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findByStudent"</span> <span class="attr">parameterType</span>=<span class="string">"student"</span> <span class="attr">resultType</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">        select * from student</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"name != null and name != ''"</span>&gt;</span></span><br><span class="line">	            and name like #&#123;name&#125;</span><br><span class="line">	        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"age != -1"</span>&gt;</span></span><br><span class="line">	            and age=#&#123;age&#125;</span><br><span class="line">	        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<p>where ä¼šè‡ªåŠ¨åˆ¤æ–­ç¬¬ä¸€æ¡åˆ¤æ–­æ¡ä»¶ï¼Œå¹¶å°† and åˆ é™¤</p>
<h3 id="foreach"><a href="#foreach" class="headerlink" title="foreach"></a>foreach</h3><p>select * from student where id in (1,2,3);</p>
<p>åç«¯ä¼ é€’çš„å‚æ•°ä¸º Integer çš„ é›†åˆ<br>éœ€è¦å¯¹è¯¥é›†åˆè¿›è¡Œå°è£…</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListIds</span> <span class="keyword">extends</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> List&lt;Integer&gt; listIds;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·åœ¨ id çš„é›†åˆä¹‹ä¸­ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findInIds"</span> <span class="attr">resultType</span>=<span class="string">"student"</span> <span class="attr">parameterType</span>=<span class="string">"ListIds"</span>&gt;</span> </span><br><span class="line"><span class="comment">&lt;!--select * from student where id in (1,2,3);--&gt;</span></span><br><span class="line">	select * from student</span><br><span class="line">	<span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"ids != null and ids.size() &gt; 0"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">			<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"student"</span> <span class="attr">open</span>=<span class="string">"id in ( "</span> <span class="attr">close</span>=<span class="string">")"</span> <span class="attr">separator</span>=<span class="string">","</span> <span class="attr">item</span>=<span class="string">"id"</span> &gt;</span></span><br><span class="line">				#&#123;id&#125;</span><br><span class="line">			<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findByIds"</span> <span class="attr">resultType</span>=<span class="string">"com.kawyang.entity.Student"</span> <span class="attr">parameterType</span>=<span class="string">"com.kawyang.entity.ListIds"</span>&gt;</span></span><br><span class="line">        select * from student</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">			foreach </span></span><br><span class="line"><span class="comment">			collection="éœ€è¦éå†çš„å…ƒç´ " </span></span><br><span class="line"><span class="comment">			open="å…ƒç´ ä¹‹å‰çš„éƒ¨åˆ†"</span></span><br><span class="line"><span class="comment">			close="ä¹‹åéƒ¨åˆ†" </span></span><br><span class="line"><span class="comment">			separator="åˆ†å‰²æ–¹å¼" </span></span><br><span class="line"><span class="comment">			item="å±æ€§å" &lt;/foreach&gt;  --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"ids"</span>  <span class="attr">open</span>=<span class="string">"id in ( "</span> <span class="attr">close</span>=<span class="string">")"</span> <span class="attr">separator</span>=<span class="string">","</span> <span class="attr">item</span>=<span class="string">"id"</span> &gt;</span></span><br><span class="line">                #&#123;id&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></div>


<h3 id="choose"><a href="#choose" class="headerlink" title="choose"></a>choose</h3><p>choose æ ‡ç­¾ï¼Œç±»ä¼¼ java ä¸­çš„ <code>switch-case-default</code> ç»“æ„ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findByStu"</span> <span class="attr">parameterType</span>=<span class="string">"com.item.entity.Student"</span> &gt;</span></span><br><span class="line">    select * from student</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"id != 0"</span>&gt;</span></span><br><span class="line">                id = #&#123;id&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"name != null"</span>&gt;</span></span><br><span class="line">                name=#&#123;name&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h3 id="sql"><a href="#sql" class="headerlink" title="sql"></a>sql</h3><p>ä½¿ç”¨ sql æ ‡ç­¾ å°† ä½¿ç”¨æ¬¡æ•°è¾ƒå¤šçš„sqlè¯­å¥ç”¨sqlğŸ·ï¸è¿›è¡Œå®šä¹‰ï¼Œä½¿ç”¨ includeğŸ·ï¸å¼•å…¥åˆ°çœŸæ­£çš„æŸ¥è¯¢è¯­å¥ä¸­ï¼Œä½¿ç”¨æ–¹ä¾¿ã€‚<br>ä¾‹å­ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"selectAll"</span> &gt;</span></span><br><span class="line">    select * from student</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findByStudent"</span> <span class="attr">parameterType</span>=<span class="string">"com.kawyang.entity.Student"</span> <span class="attr">resultType</span>=<span class="string">"com.kawyang.entity.Student"</span> &gt;</span></span><br><span class="line">--         select * from student</span><br><span class="line"><span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"selectAll"</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"id != 0"</span>&gt;</span></span><br><span class="line">            id=#&#123;id&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"name != null"</span>&gt;</span></span><br><span class="line">            name=#&#123;name&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h3 id="æ³¨è§£å½¢å¼ä½¿ç”¨åŠ¨æ€SQL-å¾…è¡¥å……"><a href="#æ³¨è§£å½¢å¼ä½¿ç”¨åŠ¨æ€SQL-å¾…è¡¥å……" class="headerlink" title="æ³¨è§£å½¢å¼ä½¿ç”¨åŠ¨æ€SQL(å¾…è¡¥å……)"></a>æ³¨è§£å½¢å¼ä½¿ç”¨åŠ¨æ€SQL(å¾…è¡¥å……)</h3><p>æ·»åŠ   <code>&lt;script&gt;</code> æ ‡ç­¾ï¼Œå³å¯ä½¿ç”¨ xml ä¸­å½¢å¼è¿›è¡Œé…ç½®ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Select</span>(<span class="string">"&lt;script&gt;"</span> +</span><br><span class="line">        <span class="string">"select * from student"</span> +</span><br><span class="line">        <span class="string">"        &lt;where&gt;"</span> +</span><br><span class="line">        <span class="string">"            &lt;if test=\"ids != null and ids.size&gt;0\"&gt;"</span> +</span><br><span class="line">        <span class="string">"                &lt;foreach collection=\"ids\"  open=\"id in ( \" close=\")\" separator=\",\" item=\"id\" &gt;"</span> +</span><br><span class="line">        <span class="string">"                    #&#123;id&#125;"</span> +</span><br><span class="line">        <span class="string">"                &lt;/foreach&gt;"</span> +</span><br><span class="line">        <span class="string">"            &lt;/if&gt;"</span> +</span><br><span class="line">        <span class="string">"        &lt;/where&gt; "</span> +</span><br><span class="line">        <span class="string">"&lt;/script&gt;"</span>)</span><br><span class="line"><span class="function">List&lt;Student&gt; <span class="title">findByIds</span><span class="params">(ListIds listIds)</span></span>;</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>æ¡†æ¶</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
        <tag>SQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring-AOP</title>
    <url>/kawyang/97375e6e.html</url>
    <content><![CDATA[<blockquote>
<p>AOP</p>
</blockquote>
<a id="more"></a>
<h2 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h2><p>Aspect Oriented Programming  â€”- é¢å‘åˆ‡é¢ç¼–ç¨‹</p>
<ul>
<li>é™ä½è€¦åˆåº¦</li>
<li>æ˜“æ‹“å±•</li>
<li>å¤ç”¨</li>
<li>éä¸šåŠ¡é›†ä¸­ï¼Œä¾¿äºç»Ÿä¸€ç®¡ç†</li>
<li>ä¸šåŠ¡ä»£ç æ¯”è¾ƒçº¯ç²¹ï¼Œæ²¡æœ‰å…¶ä»–ä»£ç å½±å“</li>
</ul>
<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><ul>
<li><p>åˆ›å»ºMavenå·¥ç¨‹ï¼Œæ·»åŠ åæ ‡</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.3.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

</li>
</ul>
<p>Invocationhandler</p>
<p>  ç”Ÿæˆä»£ç†ç±»çš„ç±»ï¼Œ</p>
<p>  imlements InvocationHandler</p>
<ul>
<li><p>æ¥æ”¶jjadf å•Šæ”¶åˆ°å›å¤ahsudjf å§”æ‰˜å¯¹è±¡</p>
</li>
<li><p>è®¾ç½®è¿”å›ä»£ç†ç±»</p>
<p>Proxy.newProxyInstance()</p>
</li>
<li><p>ç¼–å†™å§”æ‰˜å¯¹è±¡æ–¹æ³•</p>
</li>
</ul>
<h3 id="Springæ¡†æ¶å¯¹AOPè¿›è¡Œå°è£…"><a href="#Springæ¡†æ¶å¯¹AOPè¿›è¡Œå°è£…" class="headerlink" title="Springæ¡†æ¶å¯¹AOPè¿›è¡Œå°è£…"></a>Springæ¡†æ¶å¯¹AOPè¿›è¡Œå°è£…</h3><p>ä¸éœ€è¦åˆ›å»ºInvocationHandlerï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªåˆ‡é¢å¯¹è±¡ï¼Œå°†ä¸šåŠ¡ä»£ç åœ¨åˆ‡é¢ä¸­å®Œæˆå³å¯</p>
<ul>
<li>åˆ›å»ºåˆ‡é¢ç±»å¯¹è±¡ Aspectï¼ˆåˆ‡é¢ï¼‰</li>
<li>æ·»åŠ æ³¨è§£</li>
</ul>
<p>LoggerAspect</p>
<ul>
<li><code>@Aspect</code> ï¼š è¡¨ç¤ºè¯¥ç±»ä¸ºåˆ‡é¢ç±»</li>
<li><code>@Component</code>ï¼šå°†è¯¥ç±»å¯¹è±¡æ³¨å…¥åˆ°IoCå®¹å™¨ä¸­</li>
<li><code>@Befor</code> :è¡¨ç¤ºæ–¹æ³•æ‰§è¡Œçš„å…·ä½“ä½ç½®å’Œæ—¶æœº  </li>
</ul>
<p>CalImpl2 ä¹Ÿéœ€è¦æ·»åŠ <code>@Component</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  è‡ªåŠ¨æ‰«æ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.item"</span> &gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;bean class="com.item.AOP.LoggerAspect" p:id="" /&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  ä½¿ Aspect æ ‡ç­¾ç”Ÿæ•ˆï¼Œä¸ºç›®æ ‡ç±»è‡ªåŠ¨ç”Ÿæˆä»£ç†å¯¹è±¡  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>context:component-scan æ ‡ç­¾æ˜¯æ‰«æåŒ…å†…æ‰€æœ‰æ·»åŠ @Componentæ³¨è§£çš„ç±»ï¼Œæ³¨å…¥åˆ°IoCä¸­</p>
<p>aop:aspectj-autoproxy è®©Springç»“åˆåˆ‡é¢ç±»å’Œç›®æ ‡ç±»è‡ªåŠ¨ç”Ÿæˆä»£ç†å¯¹è±¡ã€‚</p>
<ul>
<li>åˆ‡é¢ï¼šæ¨ªåˆ‡å…³æ³¨ç‚¹è¢«æ¨¡å—åŒ–çš„æŠ½è±¡å¯¹è±¡</li>
<li>é€šçŸ¥ï¼šåˆ‡é¢å¯¹è±¡å®Œæˆçš„å·¥ä½œï¼ˆéä¸šåŠ¡ä»£ç ï¼Œæ—¥å¿—â€¦ï¼‰</li>
<li>ç›®æ ‡ï¼šè¢«é€šçŸ¥çš„å¯¹è±¡ï¼Œå³è¢«åˆ‡é¢çš„å¯¹è±¡</li>
<li>ä»£ç†ï¼šåˆ‡é¢ã€é€šçŸ¥ã€ç›®æ ‡æ··åˆä¹‹åçš„å¯¹è±¡</li>
<li>è¿æ¥ç‚¹ï¼šé€šçŸ¥æ’å…¥ä¸šåŠ¡ä»£ç çš„å…·ä½“ä½ç½®</li>
<li>åˆ‡ç‚¹ï¼šAOPé€šè¿‡åˆ‡ç‚¹å®šä½åˆ°è¿æ¥ç‚¹</li>
</ul>
]]></content>
      <categories>
        <category>æ¡†æ¶</category>
      </categories>
      <tags>
        <tag>Spring</tag>
        <tag>AOP</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring-å·¥å‚æ–¹æ³•</title>
    <url>/kawyang/6c92115f.html</url>
    <content><![CDATA[<blockquote>
<p>ğŸ“ : Springçš„å·¥å‚æ–¹æ³•ï¼Œå°†ğŸ­ äº¤ç»™ <code>IoCå®¹å™¨</code> è¿›è¡Œç®¡ç†ï¼ŒğŸ­åŒ…æ‹¬ï¼šé™æ€ğŸ­ã€å®ä¾‹ğŸ­ã€‚</p>
</blockquote>
<a id="more"></a>

<h2 id="Spring-çš„å·¥å‚æ–¹æ³•"><a href="#Spring-çš„å·¥å‚æ–¹æ³•" class="headerlink" title="Spring çš„å·¥å‚æ–¹æ³•"></a>Spring çš„å·¥å‚æ–¹æ³•</h2><blockquote>
<p>ä½¿ç”¨å·¥å‚åˆ›å»ºç‹¬äº«ï¼Œå¹¶å°†å·¥å‚äº¤ç»™ IoCå®¹å™¨ è¿›è¡Œç®¡ç†</p>
</blockquote>
<h3 id="é™æ€å·¥å‚"><a href="#é™æ€å·¥å‚" class="headerlink" title="é™æ€å·¥å‚"></a>é™æ€å·¥å‚</h3><ul>
<li>å®ä½“ç±»</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.item;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    Long id;</span><br><span class="line">    String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>é™æ€å·¥å‚</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.item.factory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.item.Car;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CarFactory</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> Map&lt;Long, Car&gt; carMap;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        carMap = <span class="keyword">new</span> HashMap&lt;Long, Car&gt;();</span><br><span class="line">        carMap.put(<span class="number">1L</span>, <span class="keyword">new</span> Car(<span class="number">1L</span>, <span class="string">"å®é©¬"</span>));</span><br><span class="line">        carMap.put(<span class="number">2L</span>, <span class="keyword">new</span> Car(<span class="number">2L</span>, <span class="string">"å¥”é©°"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Car <span class="title">getCar</span><span class="params">(Long id, String s)</span></span>&#123;</span><br><span class="line">        System.out.println(s);</span><br><span class="line">        <span class="keyword">return</span> carMap.get(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>é…ç½®å·¥å‚</li>
</ul>
<blockquote>
<p>å°†ç±»ä½¿ç”¨beanğŸ·ï¸é…ç½®åˆ°å·¥å‚çš„æ–¹æ³•ä¸­ï¼ŒIoCå®¹å™¨ä½¿ç”¨é…ç½®çš„æ–¹æ³•ï¼Œæ ¹æ®ä¼ é€’çš„å‚æ•°æ¥è·å–å¯¹è±¡ã€‚</p>
</blockquote>
<p>é…ç½®å‚æ•° : index (0å¼€å§‹ã€å½¢å‚ä½ç½®)ã€name(å½¢å‚åç§°)</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®é™æ€å·¥å‚ é»˜è®¤ä¸ºå•ä¾‹æ¨¡å¼--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"car"</span> <span class="attr">class</span>=<span class="string">"com.item.factory.CarFactory"</span> <span class="attr">factory-method</span>=<span class="string">"getCar"</span> <span class="attr">scope</span>=<span class="string">"prototype"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®å‚æ•° getCar--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"0"</span> <span class="attr">value</span>=<span class="string">"2"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"s"</span> <span class="attr">value</span>=<span class="string">"String"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>è·å–IoCå®¹å™¨ä¸­å¯¹è±¡</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"config-factory.xml"</span>);</span><br><span class="line">        Car car =(Car) context.getBean(<span class="string">"car"</span>);</span><br><span class="line">        System.out.println(car);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="å®ä¾‹å·¥å‚"><a href="#å®ä¾‹å·¥å‚" class="headerlink" title="å®ä¾‹å·¥å‚"></a>å®ä¾‹å·¥å‚</h3><ul>
<li>å·¥å‚ç±»</li>
</ul>
<p>åŒä¸Š</p>
<ul>
<li>é…ç½®æ–‡ä»¶</li>
</ul>
<blockquote>
<p>åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ä¸¤ä¸ª bean (ğŸ­beanã€è·å–Carçš„bean)ï¼Œå°†ğŸ­ç±»å…ˆäº¤ç»™ IoCå®¹å™¨ç®¡ç†ï¼Œç„¶åå†é…ç½®Carï¼Œè°ƒç”¨å®¹å™¨ä¸­ğŸ­åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ã€‚</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®å·¥å‚ bean--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"factory"</span> <span class="attr">class</span>=<span class="string">"com.item.factory.InstanceCarFactory"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--é…ç½®å¯¹è±¡ Car  ä½¿ç”¨å·¥å‚ factoryè·å–  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"car2"</span> <span class="attr">factory-bean</span>=<span class="string">"factory"</span> <span class="attr">factory-method</span>=<span class="string">"getCar"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"2"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>ä½¿ç”¨</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    InstanceCarFactory factory = <span class="keyword">new</span> InstanceCarFactory();</span><br><span class="line">    System.out.println(factory.getCar(<span class="number">1L</span>));</span><br><span class="line"></span><br><span class="line">    ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"config-factory.xml"</span>);</span><br><span class="line">    Car car2 = (Car) context.getBean(<span class="string">"car2"</span>);</span><br><span class="line">    System.out.println(car2);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



]]></content>
      <categories>
        <category>æ¡†æ¶</category>
      </categories>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring-IoC(æ§åˆ¶åè½¬)&amp;DI(ä¾èµ–æ³¨å…¥)</title>
    <url>/kawyang/6c92115f.html</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡ä¸»è¦è®°å½•äº† <code>Spring</code> æ¡†æ¶çš„ <code>IoC &amp; ID</code> åŸºæœ¬å†…å®¹ã€‚</p>
</blockquote>
<a id="more"></a>

<h2 id="Springæ¡†æ¶ä¸¤å¤§æ ¸å¿ƒæœºåˆ¶"><a href="#Springæ¡†æ¶ä¸¤å¤§æ ¸å¿ƒæœºåˆ¶" class="headerlink" title="Springæ¡†æ¶ä¸¤å¤§æ ¸å¿ƒæœºåˆ¶"></a>Springæ¡†æ¶ä¸¤å¤§æ ¸å¿ƒæœºåˆ¶</h2><ul>
<li>IoC ï¼ˆæ§åˆ¶ç¿»è½¬) / DI ï¼ˆä¾èµ–æ³¨å…¥)</li>
<li>AOP  (é¢å‘åˆ‡é¢ç¼–ç¨‹)</li>
</ul>
<p>ä¼ä¸šçº§å¼€å‘æ¡†æ¶ï¼Œæ˜¯è½¯ä»¶è®¾è®¡å±‚é¢çš„æ¡†æ¶ï¼Œä¼˜åŠ¿åœ¨äºå¯ä»¥å°†åº”ç”¨ç¨‹åºè¿›è¡Œåˆ†å±‚</p>
<p>MVC ï¼šStruts2 ã€Spring MVC</p>
<p>ORMapping ï¼š Hibernateã€MyBatisã€Spring Data</p>
<p><img src="https://gitee.com/KawYang/image/raw/master/img/image-20200615165841634.png" alt="image-20200615165841634"></p>
<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>å®¹æ˜“ä¸ç¬¬ä¸‰æ–¹æ¡†æ¶æ•´åˆ</li>
<li>é›†ä¸­ç®¡ç†</li>
</ol>
<h2 id="IoC"><a href="#IoC" class="headerlink" title="IoC"></a>IoC</h2><blockquote>
<p>IoC (æ§åˆ¶åè½¬) : å°†å¯¹è±¡ä½¿ç”¨äº¤ç»™ Spring è¿›è¡Œç®¡ç†ã€‚å³åˆ›å»ºå¯¹è±¡ç”±IoCå®¹å™¨åˆ›å»ºã€‚</p>
</blockquote>
<h3 id="å…¥é—¨"><a href="#å…¥é—¨" class="headerlink" title="å…¥é—¨"></a>å…¥é—¨</h3><p>æ­¥éª¤ï¼š</p>
<ul>
<li>åˆ›å»ºmavené¡¹ç›®ï¼Œæ·»åŠ pomä¾èµ–</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.3.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- ç®€åŒ–å®ä½“ç±»ä»£ç å¼€å‘ @Data è‡ªåŠ¨ç”Ÿæˆ getã€setæ–¹æ³•  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>åˆ›å»ºå®ä½“ç±»</li>
</ul>
<p>ä¼ ç»Ÿæ–¹å¼ï¼šæ‰‹åŠ¨ new æ–¹å¼åˆ›å»ºå¯¹è±¡</p>
<p>IoCæ–¹å¼ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ç®¡ç†å¯¹è±¡ï¼Œxmlæ ¼å¼è‡ªå®šä¹‰æ–‡ä»¶åï¼Œ<code>resources</code> ä¸‹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"student"</span> <span class="attr">class</span>=<span class="string">"com.item.Student"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"å¼ ä¸‰"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"12"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>ä½¿ç”¨æ–¹æ³•</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åŠ è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line">ApplicationContext applicationContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"iocconfig.xml"</span>);</span><br><span class="line">Object student = applicationContext.getBean(<span class="string">"student"</span>);</span><br><span class="line">System.out.println(student);</span><br></pre></td></tr></table></figure></div>

<h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><p>é€šè¿‡é…ç½®Beanæ ‡ç­¾è¿›è¡Œç®¡ç†</p>
<ul>
<li><code>id</code>:  å¯¹è±¡å, <code>getBean</code> çš„ æŸ¥æ‰¾å‚æ•°ã€‚</li>
<li><code>class</code> ï¼š å¯¹è±¡æ¨¡ç‰ˆç±» <code>å¿…é¡»æœ‰æ— å‚æ„é€ </code> ï¼Œé€šè¿‡åå°„æœºåˆ¶åˆ›å»ºå¯¹è±¡ï¼Œ åå°„æœºåˆ¶æ˜¯è°ƒç”¨æ— å‚æ„é€ åˆ›å»º</li>
<li><code>property</code> ï¼šå®Œæˆå±æ€§èµ‹å€¼<ul>
<li><code>name</code> ï¼š å±æ€§å</li>
<li><code>value</code> ï¼š å±æ€§å€¼ String ç›´æ¥èµ‹å€¼ï¼Œå…¶ä»–çš„å¼•ç”¨ç±»å‹ï¼Œä¸èƒ½é€šè¿‡valueèµ‹å€¼ï¼Œ</li>
<li><code>ref</code>  : å°†IoCä¸­çš„å¦å¤–ä¸€ä¸ªBeanæ·»åŠ ï¼Œ<code>ä¾èµ–æ³¨å…¥</code></li>
</ul>
</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"student"</span> <span class="attr">class</span>=<span class="string">"com.item.Student"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"å¼ ä¸‰"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"12"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"classes"</span> <span class="attr">ref</span>=<span class="string">"classes"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"classes"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"ä¸€ç­"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="IoCåº•å±‚åŸç†"><a href="#IoCåº•å±‚åŸç†" class="headerlink" title="IoCåº•å±‚åŸç†"></a>IoCåº•å±‚åŸç†</h2><blockquote>
<p>è¯»å–é…ç½®æ–‡ä»¶ -&gt; è·å–å¯¹è±¡åˆ›å»ºä¿¡æ¯ -&gt; åå°„åˆ›å»ºå¯¹è±¡å¹¶å­˜å‚¨ -&gt; è·å–å¯¹è±¡</p>
</blockquote>
<ul>
<li>è¯»å–xmlï¼Œè§£æ</li>
<li>é€šè¿‡åå°„æœºåˆ¶å®ä¾‹åŒ–é…ç½®æ–‡ä»¶ä¸­æ‰€æœ‰çš„Bean</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.item.ioc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.dom4j.Document;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.Element;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.io.SAXReader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassPathXmlApplicationContext</span> <span class="keyword">implements</span> <span class="title">ApplicationContext</span></span>&#123;</span><br><span class="line">    <span class="comment">//å­˜å‚¨åˆ›å»ºçš„å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; ioc = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ClassPathXmlApplicationContext</span><span class="params">(String path)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        SAXReader reader = <span class="keyword">new</span> SAXReader();</span><br><span class="line">        Document read = reader.read(<span class="string">"./src/main/resources/"</span> + path);</span><br><span class="line">        <span class="comment">// è§£æ xml è·å–é…ç½®ä¿¡æ¯</span></span><br><span class="line">        Element rootElement = read.getRootElement();</span><br><span class="line">        Iterator iterator = rootElement.elementIterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext())&#123;</span><br><span class="line">        	<span class="comment">/** å¾ªç¯æ¯ä¸€ä¸ªç±»é…ç½®ä¿¡æ¯ */</span></span><br><span class="line">            Element element = (Element) iterator.next();</span><br><span class="line">            String id = element.attributeValue(<span class="string">"id"</span>);</span><br><span class="line">            String className = element.attributeValue(<span class="string">"class"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">            Class aClass = Class.forName(className);</span><br><span class="line">            Constructor constructor = aClass.getConstructor();</span><br><span class="line">            Object o = constructor.newInstance();</span><br><span class="line"></span><br><span class="line">            Iterator iterator1 = element.elementIterator();</span><br><span class="line">            <span class="keyword">while</span> (iterator1.hasNext())&#123;</span><br><span class="line">                Element next =(Element) iterator1.next();</span><br><span class="line">                System.out.println(<span class="string">"---------------"</span>);</span><br><span class="line">                String name = next.attributeValue(<span class="string">"name"</span>);</span><br><span class="line">                String value = next.attributeValue(<span class="string">"value"</span>);</span><br><span class="line"></span><br><span class="line">                String ref = next.attributeValue(<span class="string">"ref"</span>);</span><br><span class="line">                System.out.println(ref);</span><br><span class="line">                <span class="comment">//åŸºæœ¬å˜é‡èµ‹å€¼</span></span><br><span class="line">                <span class="keyword">if</span>(ref == <span class="keyword">null</span>)&#123;</span><br><span class="line">                    String mothedName = <span class="string">"set"</span> + name.substring(<span class="number">0</span>, <span class="number">1</span>).toUpperCase() + name.substring(<span class="number">1</span>);</span><br><span class="line">                    System.out.print(name+ <span class="string">"\t"</span> + value + <span class="string">"\t"</span>);</span><br><span class="line">                    Field field = aClass.getDeclaredField(name);</span><br><span class="line">                    System.out.println(field.getType().getName());</span><br><span class="line">                    Method method = aClass.getDeclaredMethod(mothedName, field.getType());</span><br><span class="line">                    Object v = <span class="keyword">null</span>;</span><br><span class="line">                    <span class="keyword">if</span>(field.getType().getName() == <span class="string">"int"</span>)&#123;</span><br><span class="line">                        v = Integer.parseInt(value);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(field.getType().getName() == <span class="string">"String"</span>)&#123;</span><br><span class="line">                        v = value;</span><br><span class="line">                    &#125;</span><br><span class="line">                    ....</span><br><span class="line">                    method.invoke(o, v);</span><br><span class="line"></span><br><span class="line">                &#125;<span class="keyword">else</span>&#123; <span class="comment">//æ³¨å…¥</span></span><br><span class="line">                    <span class="comment">//ç›´æ¥èµ‹å€¼Bean</span></span><br><span class="line"></span><br><span class="line">                    Object obj1 = ioc.get(<span class="string">"Classes"</span>);</span><br><span class="line">                    System.out.println(obj1);</span><br><span class="line"></span><br><span class="line">                    </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            ioc.put(id, o);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"============="</span>);</span><br><span class="line">        System.out.println(ioc);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getBean</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ioc.get(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="è¿è¡Œæ—¶ç±»è¿›è¡Œè·å–Bean"><a href="#è¿è¡Œæ—¶ç±»è¿›è¡Œè·å–Bean" class="headerlink" title="è¿è¡Œæ—¶ç±»è¿›è¡Œè·å–Bean"></a>è¿è¡Œæ—¶ç±»è¿›è¡Œè·å–Bean</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é€šè¿‡é…ç½®æ–‡ä»¶ ğŸ†” è¿›è¡Œè·å–</span></span><br><span class="line">Object student = applicationContext.getBean(<span class="string">"student"</span>);</span><br><span class="line"><span class="comment">//é€šè¿‡ è¿è¡Œæ—¶ç±» è·å–</span></span><br><span class="line">Student bean = applicationContext.getBean(Student<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">System.out.println(bean);</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>é…ç½®æ–‡ä»¶ä¸­åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ ,å¦‚ä¸‹æŠ›å¼‚å¸¸</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"classes"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"ä¸€ç­"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"classes2"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"ä¸€ç­"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="æœ‰å‚æ„é€ åˆ›å»º"><a href="#æœ‰å‚æ„é€ åˆ›å»º" class="headerlink" title="æœ‰å‚æ„é€ åˆ›å»º"></a>æœ‰å‚æ„é€ åˆ›å»º</h2><ul>
<li>åœ¨å®ä¾‹ä¸­åˆ›å»ºæœ‰å‚æ„é€ </li>
<li>åœ¨xmlä¸­é…ç½®</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"classes3"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  ä¸¤ç§è®¾ç½®å‚æ•°æ–¹å¼ã€‚--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"ä¸‰ç­"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"0"</span> <span class="attr">value</span>=<span class="string">"2"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="é›†åˆæ³¨å…¥"><a href="#é›†åˆæ³¨å…¥" class="headerlink" title="é›†åˆæ³¨å…¥"></a>é›†åˆæ³¨å…¥</h2><blockquote>
<p>ä½¿ç”¨ <code>list</code> æ ‡ç­¾ æ³¨å…¥ç±»å‹çš„é›†åˆå¯¹è±¡ã€‚</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"student"</span> <span class="attr">class</span>=<span class="string">"com.item.Student"</span> &gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"å¼ ä¸‰"</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"12"</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"classes_List"</span> &gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"classes"</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"classes2"</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"classes"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span> &gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"ä¸€ç­"</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"classes2"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span> &gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"ä¸€ç­"</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="Scope-ä½œç”¨åŸŸ"><a href="#Scope-ä½œç”¨åŸŸ" class="headerlink" title="Scope ä½œç”¨åŸŸ"></a>Scope ä½œç”¨åŸŸ</h2><p>Spring ç®¡ç†çš„beanæ˜¯æ ¹æ® <code>scope</code> æ¥ç”Ÿæˆçš„ï¼Œè¡¨ç¤ºbeançš„ä½œç”¨åŸŸ</p>
<ul>
<li>singletonï¼šå•ä¾‹æ¨¡å¼ï¼Œåœ¨åŠ è½½æ–‡ä»¶æ—¶åˆ›å»ºbeanï¼Œé€šè¿‡IoCå®¹å™¨è·å–çš„beanæ˜¯ <code>å”¯ä¸€</code> çš„ã€‚</li>
<li>prototypeï¼šåŸå‹æ¨¡å¼ï¼Œåœ¨è°ƒç”¨getBeanæ—¶åˆ›å»ºbeanå¯¹è±¡ï¼Œé€šè¿‡IoCå®¹å™¨è·å–çš„beanæ˜¯ <code>ä¸åŒ</code> çš„ã€‚</li>
<li>requestï¼šè¯·æ±‚ï¼Œè¡¨ç¤ºåœ¨ä¸€æ¬¡HTTPè¯·æ±‚å†…æœ‰æ•ˆã€‚</li>
<li>sessionï¼šä¼šè¯ï¼Œè¡¨ç¤ºåœ¨ä¸€ä¸ªç”¨æˆ·ä¼šè¯å†…æœ‰æ•ˆã€‚</li>
</ul>
<p>requestå’Œsessionåªæ˜¯ç”¨äºwebé¡¹ç›®ï¼Œå¤§å¤šæƒ…å†µä¸‹ç”¨å•ä¾‹å’ŒåŸå‹è¾ƒå¤š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"classes"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span> <span class="attr">scope</span>=<span class="string">"singleton"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"ä¸€ç­"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="Spring-çš„ç»§æ‰¿"><a href="#Spring-çš„ç»§æ‰¿" class="headerlink" title="Spring çš„ç»§æ‰¿"></a>Spring çš„ç»§æ‰¿</h2><blockquote>
<p>Java æ˜¯ç±»å±‚é¢çš„ç»§æ‰¿ï¼Œå­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„å†…éƒ¨ç»“æ„ä¿¡æ¯ã€‚<br>Spring æ˜¯å¯¹è±¡å±‚é¢çš„ç»§æ‰¿ï¼Œå­å¯¹è±¡å¯ä»¥ç»§æ‰¿çˆ¶å¯¹è±¡çš„å±æ€§å€¼ã€‚(ä¸€ç§èµ‹å€¼æ–¹å¼)</p>
</blockquote>
<ul>
<li>å¯¹è±¡å±‚é¢çš„ç»§æ‰¿</li>
<li>å¯ä»¥ä½¿ä¸åŒç±»ä¹‹é—´ç»§æ‰¿ï¼Œå­ç±»ä¸­å¿…é¡»åŒ…å«çˆ¶ç±»æ‰€æœ‰å±æ€§</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"classes"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span> <span class="attr">scope</span>=<span class="string">"singleton"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"ä¸€ç­"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"cla"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span> <span class="attr">parent</span>=<span class="string">"classes"</span> &gt;</span></span><br><span class="line">	<span class="comment">&lt;!--å¯¹å±æ€§è¿›è¡Œé‡å†™ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"3"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>


<h2 id="Spring-çš„ä¾èµ–"><a href="#Spring-çš„ä¾èµ–" class="headerlink" title="Spring çš„ä¾èµ–"></a>Spring çš„ä¾èµ–</h2><p>æè¿°beanå’Œbeanä¹‹é—´çš„<code>å…³ç³»</code>ï¼Œé…ç½®ä¾èµ–ä¹‹åï¼Œè¢«ä¾èµ–å¯¹è±¡ä¸€å®š<code>å…ˆåˆ›å»º</code>ï¼Œå†åˆ›å»ºä¾èµ–bean</p>
<blockquote>
<p>ä¿®æ”¹åˆ›å»ºé¡ºåº</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"cla"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span> <span class="attr">parent</span>=<span class="string">"classes"</span> <span class="attr">depends-on</span>=<span class="string">"student"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"3"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p><img src="https://gitee.com/KawYang/image/raw/master/img/image-20200620174623885.png" alt="image-20200620174623885"></p>
<h2 id="Spring-çš„-P-å‘½åç©ºé—´"><a href="#Spring-çš„-P-å‘½åç©ºé—´" class="headerlink" title="Spring çš„ P å‘½åç©ºé—´"></a>Spring çš„ P å‘½åç©ºé—´</h2><p>p å‘½åç©ºé—´æ˜¯å¯¹ IoC/ DI çš„ç®€åŒ–</p>
<blockquote>
<p>å¼•å…¥çº¦æŸ</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>ä½¿ç”¨æ–¹æ³•</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--på‘½åç©ºé—´--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"classes_p"</span> <span class="attr">class</span>=<span class="string">"com.item.Classes"</span> <span class="attr">p:id</span>=<span class="string">"1"</span> <span class="attr">p:name</span>=<span class="string">"adad"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"student_p"</span> <span class="attr">class</span>=<span class="string">"com.item.Student"</span> <span class="attr">p:id</span>=<span class="string">"1"</span> <span class="attr">p:name</span>=<span class="string">"æå››"</span> <span class="attr">p:age</span>=<span class="string">"12"</span> <span class="attr">p:classes-ref</span>=<span class="string">"classes_p"</span> /&gt;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="IoCè‡ªåŠ¨è£…è½½ï¼ˆAutowireï¼‰"><a href="#IoCè‡ªåŠ¨è£…è½½ï¼ˆAutowireï¼‰" class="headerlink" title="IoCè‡ªåŠ¨è£…è½½ï¼ˆAutowireï¼‰"></a>IoCè‡ªåŠ¨è£…è½½ï¼ˆAutowireï¼‰</h2><p>IoCè´Ÿè´£åˆ›å»ºå¯¹è±¡ï¼Œ<code>DI</code> å®Œæˆå¯¹è±¡çš„ä¾èµ–æ³¨å…¥ï¼Œé…ç½® <code>property</code> æ ‡ç­¾çš„ <code>ref</code>å±æ€§ã€‚</p>
<p>IoCè‡ªåŠ¨é€‰æ‹©bean è¿›è¡Œæ³¨å…¥</p>
<ul>
<li><p>byName ï¼šé€šè¿‡åç§°è£…è½½</p>
<blockquote>
<p>æŒ‰ç…§åå­—è¿›è¡Œè£…è½½ï¼Œæ²¡æœ‰ä¸ºnull</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ä¼ ç»Ÿè£…è½½--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"student"</span> <span class="attr">class</span>=<span class="string">"com.item.Student"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"å¼ ä¸‰"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"12"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"classes"</span> <span class="attr">ref</span>=<span class="string">"classes"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--è‡ªåŠ¨è£…è½½--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"student2"</span> <span class="attr">class</span>=<span class="string">"com.item.Student"</span> <span class="attr">autowire</span>=<span class="string">"byName"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"å¼ ä¸‰"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"12"</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>byType ï¼š é€šè¿‡ç±»å‹è£…è½½</p>
</li>
</ul>
<blockquote>
<p>å¤šä¸ªåŒç±»å‹ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œä¸çŸ¥è£…è½½é‚£ä¸ª.</p>
</blockquote>
]]></content>
      <categories>
        <category>æ¡†æ¶</category>
      </categories>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring-IoC(æ§åˆ¶åè½¬)&amp;DI(ä¾èµ–æ³¨å…¥)</title>
    <url>/kawyang/92a38b2.html</url>
    <content><![CDATA[<h2 id="åŸå‹æ¨¡å¼"><a href="#åŸå‹æ¨¡å¼" class="headerlink" title="åŸå‹æ¨¡å¼"></a>åŸå‹æ¨¡å¼</h2><blockquote>
<p>æŒ‡å®šåŸå‹å®ä¾‹åˆ¶å®šåˆ›å»ºå¯¹è±¡çš„ç±»å‹ï¼Œé€šè¿‡æ‹·è´å®Œæˆå¯¹è±¡åˆ›å»ºã€‚</p>
</blockquote>
<a id="more"></a>
<blockquote>
<p>Java çš„å…‹éš†æœºåˆ¶</p>
</blockquote>
<p>å®ç° <code>Cloneable</code> æ ‡è®°æ¥å£<br>éœ€è¦å®ç° <code>clone</code> æ–¹æ³•</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> è®¾è®¡æ¨¡å¼.åŸå‹æ¨¡å¼;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Project</span> Name: Javaè®¾è®¡æ¨¡å¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span> Name: è®¾è®¡æ¨¡å¼.åŸå‹æ¨¡å¼</span></span><br><span class="line"><span class="comment"> * Created by MacBook Air on 2020/07/17.</span></span><br><span class="line"><span class="comment"> * Copyright Â© 2020 LiYang. All rights reserved.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Product product = <span class="keyword">new</span> Product();</span><br><span class="line">        Product clone = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            clone = ((Product) product.clone());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (CloneNotSupportedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        clone.setId(<span class="number">1</span>);</span><br><span class="line">        System.out.println(clone.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Product</span> <span class="keyword">implements</span> <span class="title">Cloneable</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> id = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Product&#123;"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Creates and returns a copy of this object.  The precise meaning</span></span><br><span class="line"><span class="comment">     * of "copy" may depend on the class of the object. The general</span></span><br><span class="line"><span class="comment">     * intent is that, for any object &#123;<span class="doctag">@code</span> x&#125;, the expression:</span></span><br><span class="line"><span class="comment">     * &lt;blockquote&gt;</span></span><br><span class="line"><span class="comment">     * &lt;pre&gt;</span></span><br><span class="line"><span class="comment">     * x.clone() != x&lt;/pre&gt;&lt;/blockquote&gt;</span></span><br><span class="line"><span class="comment">     * will be true, and that the expression:</span></span><br><span class="line"><span class="comment">     * &lt;blockquote&gt;</span></span><br><span class="line"><span class="comment">     * &lt;pre&gt;</span></span><br><span class="line"><span class="comment">     * x.clone().getClass() == x.getClass()&lt;/pre&gt;&lt;/blockquote&gt;</span></span><br><span class="line"><span class="comment">     * will be &#123;<span class="doctag">@code</span> true&#125;, but these are not absolute requirements.</span></span><br><span class="line"><span class="comment">     * While it is typically the case that:</span></span><br><span class="line"><span class="comment">     * &lt;blockquote&gt;</span></span><br><span class="line"><span class="comment">     * &lt;pre&gt;</span></span><br><span class="line"><span class="comment">     * x.clone().equals(x)&lt;/pre&gt;&lt;/blockquote&gt;</span></span><br><span class="line"><span class="comment">     * will be &#123;<span class="doctag">@code</span> true&#125;, this is not an absolute requirement.</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * By convention, the returned object should be obtained by calling</span></span><br><span class="line"><span class="comment">     * &#123;<span class="doctag">@code</span> super.clone&#125;.  If a class and all of its superclasses (except</span></span><br><span class="line"><span class="comment">     * &#123;<span class="doctag">@code</span> Object&#125;) obey this convention, it will be the case that</span></span><br><span class="line"><span class="comment">     * &#123;<span class="doctag">@code</span> x.clone().getClass() == x.getClass()&#125;.</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * By convention, the object returned by this method should be independent</span></span><br><span class="line"><span class="comment">     * of this object (which is being cloned).  To achieve this independence,</span></span><br><span class="line"><span class="comment">     * it may be necessary to modify one or more fields of the object returned</span></span><br><span class="line"><span class="comment">     * by &#123;<span class="doctag">@code</span> super.clone&#125; before returning it.  Typically, this means</span></span><br><span class="line"><span class="comment">     * copying any mutable objects that comprise the internal "deep structure"</span></span><br><span class="line"><span class="comment">     * of the object being cloned and replacing the references to these</span></span><br><span class="line"><span class="comment">     * objects with references to the copies.  If a class contains only</span></span><br><span class="line"><span class="comment">     * primitive fields or references to immutable objects, then it is usually</span></span><br><span class="line"><span class="comment">     * the case that no fields in the object returned by &#123;<span class="doctag">@code</span> super.clone&#125;</span></span><br><span class="line"><span class="comment">     * need to be modified.</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * æ•°ç»„æ‹·è´æ–¹å¼æ˜¯æµ…æ‹·è´</span></span><br><span class="line"><span class="comment">     * The method &#123;<span class="doctag">@code</span> clone&#125; for class &#123;<span class="doctag">@code</span> Object&#125; performs a</span></span><br><span class="line"><span class="comment">     * specific cloning operation. First, if the class of this object does</span></span><br><span class="line"><span class="comment">     * not implement the interface &#123;<span class="doctag">@code</span> Cloneable&#125;, then a</span></span><br><span class="line"><span class="comment">     * &#123;<span class="doctag">@code</span> CloneNotSupportedException&#125; is thrown. Note that all arrays</span></span><br><span class="line"><span class="comment">     * are considered to implement the interface &#123;<span class="doctag">@code</span> Cloneable&#125; and that</span></span><br><span class="line"><span class="comment">     * the return type of the &#123;<span class="doctag">@code</span> clone&#125; method of an array type &#123;<span class="doctag">@code</span> T[]&#125;</span></span><br><span class="line"><span class="comment">     * is &#123;<span class="doctag">@code</span> T[]&#125; where T is any reference or primitive type.</span></span><br><span class="line"><span class="comment">     * Otherwise, this method creates a new instance of the class of this</span></span><br><span class="line"><span class="comment">     * object and initializes all its fields with exactly the contents of</span></span><br><span class="line"><span class="comment">     * the corresponding fields of this object, as if by assignment; the</span></span><br><span class="line"><span class="comment">     * contents of the fields are not themselves cloned. Thus, this method</span></span><br><span class="line"><span class="comment">     * performs a "shallow copy" of this object, not a "deep copy" operation.</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * The class &#123;<span class="doctag">@code</span> Object&#125; does not itself implement the interface</span></span><br><span class="line"><span class="comment">     * &#123;<span class="doctag">@code</span> Cloneable&#125;, so calling the &#123;<span class="doctag">@code</span> clone&#125; method on an object</span></span><br><span class="line"><span class="comment">     * whose class is &#123;<span class="doctag">@code</span> Object&#125; will result in throwing an</span></span><br><span class="line"><span class="comment">     * exception at run time.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> a clone of this instance.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> CloneNotSupportedException if the object's class does not</span></span><br><span class="line"><span class="comment">     *                                    support the &#123;<span class="doctag">@code</span> Cloneable&#125; interface. Subclasses</span></span><br><span class="line"><span class="comment">     *                                    that override the &#123;<span class="doctag">@code</span> clone&#125; method can also</span></span><br><span class="line"><span class="comment">     *                                    throw this exception to indicate that an instance cannot</span></span><br><span class="line"><span class="comment">     *                                    be cloned.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span> Cloneable</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Object <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.clone();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>


<h2 id="å«æœ‰ä¾èµ–æ³¨å…¥çš„ç±»çš„clone-æ–¹æ³•"><a href="#å«æœ‰ä¾èµ–æ³¨å…¥çš„ç±»çš„clone-æ–¹æ³•" class="headerlink" title="å«æœ‰ä¾èµ–æ³¨å…¥çš„ç±»çš„clone æ–¹æ³•"></a>å«æœ‰ä¾èµ–æ³¨å…¥çš„ç±»çš„clone æ–¹æ³•</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">protected</span> Object <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</span><br><span class="line">       <span class="comment">// ä¿®æ”¹clone æ–¹æ³•ï¼Œå®ç°æ·±å¤åˆ¶</span></span><br><span class="line">       <span class="comment">// return super.clone();</span></span><br><span class="line">       Product clone = (Product) <span class="keyword">super</span>.clone();</span><br><span class="line">       System.out.println(clone.toString());</span><br><span class="line">       Inner inner = ((Inner) clone.getInner().clone());</span><br><span class="line">       clone.setInner(inner);</span><br><span class="line">       <span class="keyword">return</span> clone; </span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="åºåˆ—åŒ–å®ç°æ‹·è´"><a href="#åºåˆ—åŒ–å®ç°æ‹·è´" class="headerlink" title="åºåˆ—åŒ–å®ç°æ‹·è´"></a>åºåˆ—åŒ–å®ç°æ‹·è´</h2><p>ArrayList .clone();</p>
<p>ç±»åŠå…¶å­ç±»å®ç° <code>Serializable</code> æ¥å£</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åºåˆ—åŒ–</span></span><br><span class="line">      ByteArrayOutputStream byteArrayOutputStream = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">      <span class="keyword">try</span>(ObjectOutputStream outputStream = <span class="keyword">new</span> ObjectOutputStream(byteArrayOutputStream)) &#123;</span><br><span class="line">          outputStream.writeObject(<span class="keyword">this</span>);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      ByteArrayInputStream byteArrayInputStream = <span class="keyword">new</span> ByteArrayInputStream(byteArrayOutputStream.toByteArray());</span><br><span class="line">      <span class="keyword">try</span>(ObjectInputStream inputStream = <span class="keyword">new</span> ObjectInputStream(byteArrayInputStream))&#123;</span><br><span class="line">          Product product = ((Product) inputStream.readObject());</span><br><span class="line">          <span class="keyword">return</span> product;</span><br><span class="line">      &#125;<span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">      &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure></div>


<h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><p>ä»£ç ä¸åº”è¯¥ä¾èµ–äºéœ€è¦å¤åˆ¶çš„å¯¹è±¡çš„å…·ä½“ç±»äº‹ï¼Œä½¿ç”¨Protoypeæ¨¡å¼</p>
<h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><p>1ã€å¯ä»¥ä¸è€¦åˆå…·ä½“ç±»çš„æƒ…å†µä¸‹å…‹éš†å¯¹è±¡<br>2ã€é¿å…é‡çš„åˆå§‹åŒ–ä»£ç <br>3ã€æ–¹ä¾¿æ„å»ºå¤æ‚å¯¹è±¡</p>
<h2 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h2><p>org.springframwork.beans.factory.support.AvstrackBeanDefinition<br>java.util.Arrays<br>ArrayList</p>
]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo-abbrlink-undefined</title>
    <url>/kawyang/b3b09752.html</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡è§£å†³çš„é—®é¢˜ï¼š å®‰è£… <code>hexo-abbrlink</code> åï¼Œå¹¶é…ç½® <code>abbrlink</code> è¿æ¥ï¼Œå‡ºç° <code>undefined</code>é—®é¢˜ï¼Œæ‰€æœ‰æ–‡ç« æ ‡é¢˜éƒ½æŒ‡å‘åŒä¸€ç¯‡æ–‡ç« ï¼Œå¹¶ä¸”æ— æ³•é‡æ–°å¯åŠ¨ hexo æœåŠ¡ã€‚</p>
</blockquote>
<a id="more"></a>

<h2 id="é”™è¯¯ä¿¡æ¯Error"><a href="#é”™è¯¯ä¿¡æ¯Error" class="headerlink" title="é”™è¯¯ä¿¡æ¯Error"></a>é”™è¯¯ä¿¡æ¯Error</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line">&gt; hexo s</span><br><span class="line">INFO  Start processing</span><br><span class="line">FATAL Something's wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html</span><br><span class="line">TypeError: Cannot read property 'enable' of undefined</span><br><span class="line">    at Hexo.logic (/Users/mac/blog/node_modules/hexo-abbrlink/lib/logic.js:59:44)</span><br><span class="line">    at Hexo.tryCatcher (/Users/mac/blog/node_modules/bluebird/js/release/util.js:16:23)</span><br><span class="line">    at Hexo.<span class="tag">&lt;<span class="name">anonymous</span>&gt;</span> (/Users/mac/blog/node_modules/bluebird/js/release/method.js:15:34)</span><br><span class="line">    at /Users/mac/blog/node_modules/hexo/lib/extend/filter.js:62:52</span><br><span class="line">    at tryCatcher (/Users/mac/blog/node_modules/bluebird/js/release/util.js:16:23)</span><br><span class="line">    at Object.gotValue (/Users/mac/blog/node_modules/bluebird/js/release/reduce.js:166:18)</span><br><span class="line">    at Object.gotAccum (/Users/mac/blog/node_modules/bluebird/js/release/reduce.js:155:25)</span><br><span class="line">    at Object.tryCatcher (/Users/mac/blog/node_modules/bluebird/js/release/util.js:16:23)</span><br><span class="line">    at Promise._settlePromiseFromHandler (/Users/mac/blog/node_modules/bluebird/js/release/promise.js:547:31)</span><br><span class="line">    at Promise._settlePromise (/Users/mac/blog/node_modules/bluebird/js/release/promise.js:604:18)</span><br><span class="line">    at Promise._settlePromise0 (/Users/mac/blog/node_modules/bluebird/js/release/promise.js:649:10)</span><br><span class="line">    at Promise._settlePromises (/Users/mac/blog/node_modules/bluebird/js/release/promise.js:729:18)</span><br><span class="line">    at _drainQueueStep (/Users/mac/blog/node_modules/bluebird/js/release/async.js:93:12)</span><br><span class="line">    at _drainQueue (/Users/mac/blog/node_modules/bluebird/js/release/async.js:86:9)</span><br><span class="line">    at Async._drainQueues (/Users/mac/blog/node_modules/bluebird/js/release/async.js:102:5)</span><br><span class="line">    at Immediate.Async.drainQueues [as _onImmediate] (/Users/mac/blog/node_modules/bluebird/js/release/async.js:15:14)</span><br><span class="line">    at processImmediate (internal/timers.js:456:21)</span><br></pre></td></tr></table></figure></div>

<h2 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h2><p>æ ¹æ®é”™è¯¯æç¤ºï¼Œæ‰¾åˆ°<code>/Users/mac/blog/node_modules/hexo-abbrlink/lib/logic.js:59:44</code> 59 è¡Œï¼Œå¦‚å›¾<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vS2F3WWFuZy9pbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDcwNzAwMDYxNy5wbmc?x-oss-process=image/format,png" alt=""><br>å‘ç°æç¤º <code>abbrlink.auto_category.enable</code> æœªå®šä¹‰ï¼Œå› æ­¤åœ¨æ ¹ç›®å½•é…ç½®æ–‡ä»¶å†…æ·»åŠ è¯¥å±æ€§å³å¯è§£å†³ã€‚<br>æœ€ç»ˆ <code>abbrlink</code> é…ç½®å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>ä¿®æ”¹ abbrlink é…ç½®ï¼š</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line">#permalink: :year/:month/:day/:title/</span><br><span class="line">permalink: kawyang/:abbrlink.html</span><br><span class="line">abbrlink: </span><br><span class="line">  auto_category: </span><br><span class="line">    enable: false</span><br><span class="line">  alg: crc32</span><br><span class="line">  rep: hex</span><br></pre></td></tr></table></figure></div>

<h2 id="enable-å·®åˆ«"><a href="#enable-å·®åˆ«" class="headerlink" title="enable å·®åˆ«"></a>enable å·®åˆ«</h2><ul>
<li><p>true : å«æœ‰æç¤º, å¦‚å›¾æ‰€ç¤º<br><img src="https://gitee.com/KawYang/image/raw/master/img/20200707001755.png" alt=""></p>
</li>
<li><p>false : æ²¡æœ‰æç¤ºï¼Œå¦‚å›¾æ‰€ç¤º</p>
</li>
</ul>
<p><img src="https://gitee.com/KawYang/image/raw/master/img/20200707001913.png" alt=""></p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>Error</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringMVC</title>
    <url>/kawyang/ae0f95e0.html</url>
    <content><![CDATA[<blockquote>
<p><code>Spring MVC</code> <code>å¦‚ä½•ä½¿ç”¨ï¼Ÿ</code> <code>Spring MVC REST</code> <code>Spring MVC æ–‡ä»¶ä¸Šä¼ ä¸‹è½½</code> <code>Spring MVC è¡¨å•æ ‡ç­¾åº“</code> <code>Spring MVC æ•°æ®æ ¡éªŒ</code></p>
</blockquote>
<a id="more"></a>

<h3 id="Spring-MVC"><a href="#Spring-MVC" class="headerlink" title="Spring MVC"></a>Spring MVC</h3><p>Spring MVC æ˜¯ç›®å‰ä¸»æµçš„å®ç° MVC è®¾è®¡æ¨¡å¼çš„ä¼ä¸šçº§å¼€å‘æ¡†æ¶ï¼ŒSpring æ¡†æ¶çš„ä¸€ä¸ªå­æ¨¡å—ï¼Œæ— éœ€æ•´åˆï¼Œå¼€å‘èµ·æ¥æ›´åŠ ä¾¿æ·ã€‚</p>
<h4 id="ä»€ä¹ˆæ˜¯-MVC-è®¾è®¡æ¨¡å¼ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-MVC-è®¾è®¡æ¨¡å¼ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ MVC è®¾è®¡æ¨¡å¼ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ MVC è®¾è®¡æ¨¡å¼ï¼Ÿ</h4><p>å°†åº”ç”¨ç¨‹åºåˆ†ä¸º Controllerã€Modelã€View ä¸‰å±‚ï¼ŒController æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚ï¼Œè°ƒç”¨ Model ç”Ÿæˆä¸šåŠ¡æ•°æ®ï¼Œä¼ é€’ç»™ Viewã€‚</p>
<p>Spring MVC å°±æ˜¯å¯¹è¿™å¥—æµç¨‹çš„å°è£…ï¼Œå±è”½äº†å¾ˆå¤šåº•å±‚ä»£ç ï¼Œå¼€æ”¾å‡ºæ¥å£ï¼Œè®©å¼€å‘è€…å¯ä»¥æ›´åŠ è½»æ¾ã€ä¾¿æ·åœ°å®ŒæˆåŸºäº MVC æ¨¡å¼çš„ Web å¼€å‘ã€‚</p>
<h4 id="Spring-MVC-çš„æ ¸å¿ƒç»„ä»¶"><a href="#Spring-MVC-çš„æ ¸å¿ƒç»„ä»¶" class="headerlink" title="Spring MVC çš„æ ¸å¿ƒç»„ä»¶"></a>Spring MVC çš„æ ¸å¿ƒç»„ä»¶</h4><ul>
<li>DispatcherServletï¼šå‰ç½®æ§åˆ¶å™¨ï¼Œæ˜¯æ•´ä¸ªæµç¨‹æ§åˆ¶çš„æ ¸å¿ƒï¼Œæ§åˆ¶å…¶ä»–ç»„ä»¶çš„æ‰§è¡Œï¼Œè¿›è¡Œç»Ÿä¸€è°ƒåº¦ï¼Œé™ä½ç»„ä»¶ä¹‹é—´çš„è€¦åˆæ€§ï¼Œç›¸å½“äºæ€»æŒ‡æŒ¥ã€‚</li>
<li>Handlerï¼šå¤„ç†å™¨ï¼Œå®Œæˆå…·ä½“çš„ä¸šåŠ¡é€»è¾‘ï¼Œç›¸å½“äº Servlet æˆ– Actionã€‚</li>
<li>HandlerMappingï¼šDispatcherServlet æ¥æ”¶åˆ°è¯·æ±‚ä¹‹åï¼Œé€šè¿‡ HandlerMapping å°†ä¸åŒçš„è¯·æ±‚æ˜ å°„åˆ°ä¸åŒçš„ Handlerã€‚</li>
<li>HandlerInterceptorï¼šå¤„ç†å™¨æ‹¦æˆªå™¨ï¼Œæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå¦‚æœéœ€è¦å®Œæˆä¸€äº›æ‹¦æˆªå¤„ç†ï¼Œå¯ä»¥å®ç°è¯¥æ¥å£ã€‚</li>
<li>HandlerExecutionChainï¼šå¤„ç†å™¨æ‰§è¡Œé“¾ï¼ŒåŒ…æ‹¬ä¸¤éƒ¨åˆ†å†…å®¹ï¼šHandler å’Œ HandlerInterceptorï¼ˆç³»ç»Ÿä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„ HandlerInterceptorï¼Œå¦‚æœéœ€è¦é¢å¤–è®¾ç½®æ‹¦æˆªï¼Œå¯ä»¥æ·»åŠ æ‹¦æˆªå™¨ï¼‰ã€‚</li>
<li>HandlerAdapterï¼šå¤„ç†å™¨é€‚é…å™¨ï¼ŒHandler æ‰§è¡Œä¸šåŠ¡æ–¹æ³•ä¹‹å‰ï¼Œéœ€è¦è¿›è¡Œä¸€ç³»åˆ—çš„æ“ä½œï¼ŒåŒ…æ‹¬è¡¨å•æ•°æ®çš„éªŒè¯ã€æ•°æ®ç±»å‹çš„è½¬æ¢ã€å°†è¡¨å•æ•°æ®å°è£…åˆ° JavaBean ç­‰ï¼Œè¿™äº›æ“ä½œéƒ½æ˜¯ç”± HandlerApater æ¥å®Œæˆï¼Œå¼€å‘è€…åªéœ€å°†æ³¨æ„åŠ›é›†ä¸­ä¸šåŠ¡é€»è¾‘çš„å¤„ç†ä¸Šï¼ŒDispatcherServlet é€šè¿‡ HandlerAdapter æ‰§è¡Œä¸åŒçš„ Handlerã€‚</li>
<li>ModelAndViewï¼šè£…è½½äº†æ¨¡å‹æ•°æ®å’Œè§†å›¾ä¿¡æ¯ï¼Œä½œä¸º Handler çš„å¤„ç†ç»“æœï¼Œè¿”å›ç»™ DispatcherServletã€‚</li>
<li>ViewResolverï¼šè§†å›¾è§£æå™¨ï¼ŒDispatcheServlet é€šè¿‡å®ƒå°†é€»è¾‘è§†å›¾è§£æä¸ºç‰©ç†è§†å›¾ï¼Œæœ€ç»ˆå°†æ¸²æŸ“ç»“æœå“åº”ç»™å®¢æˆ·ç«¯ã€‚</li>
</ul>
<h4 id="Spring-MVC-çš„å·¥ä½œæµç¨‹"><a href="#Spring-MVC-çš„å·¥ä½œæµç¨‹" class="headerlink" title="Spring MVC çš„å·¥ä½œæµç¨‹"></a>Spring MVC çš„å·¥ä½œæµç¨‹</h4><ul>
<li>å®¢æˆ·ç«¯è¯·æ±‚è¢« DisptacherServlet æ¥æ”¶ã€‚</li>
<li>æ ¹æ® HandlerMapping æ˜ å°„åˆ° Handlerã€‚</li>
<li>ç”Ÿæˆ Handler å’Œ HandlerInterceptorã€‚</li>
<li>Handler å’Œ HandlerInterceptor ä»¥ HandlerExecutionChain çš„å½¢å¼ä¸€å¹¶è¿”å›ç»™ DisptacherServletã€‚</li>
<li>DispatcherServlet é€šè¿‡ HandlerAdapter è°ƒç”¨ Handler çš„æ–¹æ³•å®Œæˆä¸šåŠ¡é€»è¾‘å¤„ç†ã€‚</li>
<li>Handler è¿”å›ä¸€ä¸ª ModelAndView ç»™ DispatcherServletã€‚</li>
<li>DispatcherServlet å°†è·å–çš„ ModelAndView å¯¹è±¡ä¼ ç»™ ViewResolver è§†å›¾è§£æå™¨ï¼Œå°†é€»è¾‘è§†å›¾è§£æä¸ºç‰©ç†è§†å›¾ Viewã€‚</li>
<li>ViewResovler è¿”å›ä¸€ä¸ª View ç»™ DispatcherServletã€‚</li>
<li>DispatcherServlet æ ¹æ® View è¿›è¡Œè§†å›¾æ¸²æŸ“ï¼ˆå°†æ¨¡å‹æ•°æ® Model å¡«å……åˆ°è§†å›¾ View ä¸­ï¼‰ã€‚</li>
<li>DispatcherServlet å°†æ¸²æŸ“åçš„ç»“æœå“åº”ç»™å®¢æˆ·ç«¯ã€‚</li>
</ul>
<p>![image-20190313111136254](/Users/southwind/Library/Application Support/typora-user-images/image-20190313111136254.png)</p>
<p>Spring MVC æµç¨‹éå¸¸å¤æ‚ï¼Œå®é™…å¼€å‘ä¸­å¾ˆç®€å•ï¼Œå› ä¸ºå¤§éƒ¨åˆ†çš„ç»„ä»¶ä¸éœ€è¦å¼€å‘è€…åˆ›å»ºã€ç®¡ç†ï¼Œåªéœ€è¦é€šè¿‡é…ç½®æ–‡ä»¶çš„æ–¹å¼å®Œæˆé…ç½®å³å¯ï¼ŒçœŸæ­£éœ€è¦å¼€å‘è€…è¿›è¡Œå¤„ç†çš„åªæœ‰ Handler ã€Viewã€‚</p>
<h4 id="å¦‚ä½•ä½¿ç”¨ï¼Ÿ"><a href="#å¦‚ä½•ä½¿ç”¨ï¼Ÿ" class="headerlink" title="å¦‚ä½•ä½¿ç”¨ï¼Ÿ"></a>å¦‚ä½•ä½¿ç”¨ï¼Ÿ</h4><ul>
<li>åˆ›å»º Maven å·¥ç¨‹ï¼Œpom.xml</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.11.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>åœ¨ web.xml ä¸­é…ç½® DispatcherServletã€‚</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">web-app</span> <span class="meta-keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta"> <span class="meta-string">"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"</span></span></span><br><span class="line"><span class="meta"> <span class="meta-string">"http://java.sun.com/dtd/web-app_2_3.dtd"</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>springmvc.xml</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªåŠ¨æ‰«æ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.southwind"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>åˆ›å»º Handler</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/index"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ‰§è¡Œäº†index..."</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="Spring-MVC-æ³¨è§£"><a href="#Spring-MVC-æ³¨è§£" class="headerlink" title="Spring MVC æ³¨è§£"></a>Spring MVC æ³¨è§£</h3><ul>
<li>@RequestMapping </li>
</ul>
<p>Spring MVC é€šè¿‡ @RequestMapping æ³¨è§£å°† URL è¯·æ±‚ä¸ä¸šåŠ¡æ–¹æ³•è¿›è¡Œæ˜ å°„ï¼Œåœ¨ Handler çš„ç±»å®šä¹‰å¤„ä»¥åŠæ–¹æ³•å®šä¹‰å¤„éƒ½å¯ä»¥æ·»åŠ  @RequestMapping ï¼Œåœ¨ç±»å®šä¹‰å¤„æ·»åŠ ï¼Œç›¸å½“äºå®¢æˆ·ç«¯å¤šäº†ä¸€å±‚è®¿é—®è·¯å¾„ã€‚</p>
<ul>
<li>@Controller</li>
</ul>
<p>@Controller åœ¨ç±»å®šä¹‰å¤„æ·»åŠ ï¼Œå°†è¯¥ç±»äº¤ä¸ª IoC å®¹å™¨æ¥ç®¡ç†ï¼ˆç»“åˆ springmvc.xml çš„è‡ªåŠ¨æ‰«æé…ç½®ä½¿ç”¨ï¼‰ï¼ŒåŒæ—¶ä½¿å…¶æˆä¸ºä¸€ä¸ªæ§åˆ¶å™¨ï¼Œå¯ä»¥æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/index"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"æ‰§è¡Œäº†index..."</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>@RequestMapping ç›¸å…³å‚æ•°</li>
</ul>
<p>1ã€valueï¼šæŒ‡å®š URL è¯·æ±‚çš„å®é™…åœ°å€ï¼Œæ˜¯ @RequestMapping çš„é»˜è®¤å€¼ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/index"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"æ‰§è¡Œäº†index..."</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ç­‰äº</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/index"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"æ‰§è¡Œäº†index..."</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>2ã€methodï¼šæŒ‡å®šè¯·æ±‚çš„ method ç±»å‹ï¼ŒGETã€POSTã€PUTã€DELETã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/index"</span>,method = RequestMethod.GET)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"æ‰§è¡Œäº†index..."</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ä¸Šè¿°ä»£ç è¡¨ç¤º index æ–¹æ³•åªèƒ½æ¥æ”¶ GET è¯·æ±‚ã€‚</p>
<p>3ã€paramsï¼šæŒ‡å®šè¯·æ±‚ä¸­å¿…é¡»åŒ…å«æŸäº›å‚æ•°ï¼Œå¦åˆ™æ— æ³•è°ƒç”¨è¯¥æ–¹æ³•ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/index"</span>,method = RequestMethod.GET,params = &#123;<span class="string">"name"</span>,<span class="string">"id=10"</span>&#125;)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"æ‰§è¡Œäº†index..."</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ä¸Šè¿°ä»£ç è¡¨ç¤ºè¯·æ±‚ä¸­å¿…é¡»åŒ…å« name å’Œ id ä¸¤ä¸ªå‚æ•°ï¼ŒåŒæ—¶ id çš„å€¼å¿…é¡»æ˜¯ 10ã€‚</p>
<p>å…³äºå‚æ•°ç»‘å®šï¼Œåœ¨å½¢å‚åˆ—è¡¨ä¸­é€šè¿‡æ·»åŠ  @RequestParam æ³¨è§£å®Œæˆ HTTP è¯·æ±‚å‚æ•°ä¸ä¸šåŠ¡æ–¹æ³•å½¢å‚çš„æ˜ å°„ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/index"</span>,method = RequestMethod.GET,params = &#123;<span class="string">"name"</span>,<span class="string">"id=10"</span>&#125;)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">(@RequestParam(<span class="string">"name"</span>)</span> String str,@<span class="title">RequestParam</span><span class="params">(<span class="string">"id"</span>)</span> <span class="keyword">int</span> age)</span>&#123;</span><br><span class="line">    System.out.println(str);</span><br><span class="line">    System.out.println(age);</span><br><span class="line">    System.out.println(<span class="string">"æ‰§è¡Œäº†index..."</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ä¸Šè¿°ä»£ç è¡¨ç¤ºå°†è¯·æ±‚çš„å‚æ•° name å’Œ id åˆ†åˆ«èµ‹ç»™äº†å½¢å‚ str å’Œ age ï¼ŒåŒæ—¶è‡ªåŠ¨å®Œæˆäº†æ•°æ®ç±»å‹è½¬æ¢ï¼Œå°† â€œ10â€ è½¬ä¸ºäº† int ç±»å‹çš„ 10ï¼Œå†èµ‹ç»™ ageï¼Œè¿™äº›å·¥ä½œéƒ½æ˜¯ç”± HandlerAdapter æ¥å®Œæˆçš„ã€‚</p>
<p>Spring MVC ä¹Ÿæ”¯æŒ RESTful é£æ ¼çš„ URLã€‚</p>
<p>ä¼ ç»Ÿç±»å‹ï¼š<a href="http://localhost:8080/hello/index?name=zhangsan&amp;id=10" target="_blank" rel="noopener">http://localhost:8080/hello/index?name=zhangsan&amp;id=10</a></p>
<p>RESTï¼š<a href="http://localhost:8080/hello/index/zhangsan/10" target="_blank" rel="noopener">http://localhost:8080/hello/index/zhangsan/10</a></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/rest/&#123;name&#125;/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">rest</span><span class="params">(@PathVariable(<span class="string">"name"</span>)</span> String name,@<span class="title">PathVariable</span><span class="params">(<span class="string">"id"</span>)</span> <span class="keyword">int</span> id)</span>&#123;</span><br><span class="line">    System.out.println(name);</span><br><span class="line">    System.out.println(id);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>é€šè¿‡ @PathVariable æ³¨è§£å®Œæˆè¯·æ±‚å‚æ•°ä¸å½¢å‚çš„æ˜ å°„ã€‚</p>
<ul>
<li>æ˜ å°„ Cookie</li>
</ul>
<p>Spring MVC é€šè¿‡æ˜ å°„å¯ä»¥ç›´æ¥åœ¨ä¸šåŠ¡æ–¹æ³•ä¸­è·å– Cookie çš„å€¼ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/cookie"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">cookie</span><span class="params">(@CookieValue(value = <span class="string">"JSESSIONID"</span>)</span> String sessionId)</span>&#123;</span><br><span class="line">    System.out.println(sessionId);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>ä½¿ç”¨ JavaBean ç»‘å®šå‚æ•°</li>
</ul>
<p>Spring MVC ä¼šæ ¹æ®è¯·æ±‚å‚æ•°åå’Œ JavaBean å±æ€§åè¿›è¡Œè‡ªåŠ¨åŒ¹é…ï¼Œè‡ªåŠ¨ä¸ºå¯¹è±¡å¡«å……å±æ€§å€¼ï¼ŒåŒæ—¶æ”¯æŒåŠè”å±æ€§ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Address</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: southwind</span><br><span class="line">  Date: <span class="number">2019</span>-<span class="number">03</span>-<span class="number">13</span></span><br><span class="line">  Time: <span class="number">15</span>:<span class="number">33</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">"/hello/save"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">        ç”¨æˆ·idï¼š&lt;input type=<span class="string">"text"</span> name=<span class="string">"id"</span>/&gt;&lt;br/&gt;</span><br><span class="line">        ç”¨æˆ·åï¼š&lt;input type=<span class="string">"text"</span> name=<span class="string">"name"</span>/&gt;&lt;br/&gt;</span><br><span class="line">        ç”¨æˆ·åœ°å€ï¼š&lt;input type=<span class="string">"text"</span> name=<span class="string">"address.value"</span>/&gt;&lt;br/&gt;</span><br><span class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"æ³¨å†Œ"</span>/&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/save"</span>,method = RequestMethod.POST)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">save</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>å¦‚æœå‡ºç°ä¸­æ–‡ä¹±ç é—®é¢˜ï¼Œåªéœ€åœ¨ web.xml æ·»åŠ  Spring MVC è‡ªå¸¦çš„è¿‡æ»¤å™¨å³å¯ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>JSP é¡µé¢çš„è½¬å‘å’Œé‡å®šå‘ï¼š</li>
</ul>
<p>Spring MVC é»˜è®¤æ˜¯ä»¥è½¬å‘çš„å½¢å¼å“åº” JSPã€‚</p>
<p>1ã€è½¬å‘</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/forward"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">forward</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"forward:/index.jsp"</span>;</span><br><span class="line">    <span class="comment">//        return "index";</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>2ã€é‡å®šå‘</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/redirect"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">redirect</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"redirect:/index.jsp"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="Spring-MVC-æ•°æ®ç»‘å®š"><a href="#Spring-MVC-æ•°æ®ç»‘å®š" class="headerlink" title="Spring MVC æ•°æ®ç»‘å®š"></a>Spring MVC æ•°æ®ç»‘å®š</h3><p>æ•°æ®ç»‘å®šï¼šåœ¨åç«¯çš„ä¸šåŠ¡æ–¹æ³•ä¸­ç›´æ¥è·å–å®¢æˆ·ç«¯ HTTP è¯·æ±‚ä¸­çš„å‚æ•°ï¼Œå°†è¯·æ±‚å‚æ•°æ˜ å°„åˆ°ä¸šåŠ¡æ–¹æ³•çš„å½¢å‚ä¸­ï¼ŒSpring MVC ä¸­æ•°æ®ç»‘å®šçš„å·¥ä½œæ˜¯ç”± HandlerAdapter æ¥å®Œæˆçš„ã€‚</p>
<ul>
<li>åŸºæœ¬æ•°æ®ç±»å‹</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/baseType"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">baseType</span><span class="params">(<span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> id+<span class="string">""</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>@ResponseBody è¡¨ç¤º Spring MVC ä¼šç›´æ¥å°†ä¸šåŠ¡æ–¹æ³•çš„è¿”å›å€¼å“åº”ç»™å®¢æˆ·ç«¯ï¼Œå¦‚æœä¸åŠ  @ResponseBody æ³¨è§£ï¼ŒSpring MVC ä¼šå°†ä¸šåŠ¡æ–¹æ³•çš„æ”¾å›å€¼ä¼ é€’ç»™ DispatcherServletï¼Œå†ç”± DisptacherServlet è°ƒç”¨ ViewResolver å¯¹è¿”å›å€¼è¿›è¡Œè§£æï¼Œæ˜ å°„åˆ°ä¸€ä¸ª JSP èµ„æºã€‚</p>
<ul>
<li>åŒ…è£…ç±»</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/packageType"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">packageType</span><span class="params">(@RequestParam(value = <span class="string">"num"</span>,required = <span class="keyword">false</span>,defaultValue = <span class="string">"0"</span>)</span> Integer id)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> id+<span class="string">""</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>åŒ…è£…ç±»å¯ä»¥æ¥æ”¶ nullï¼Œå½“ HTTP è¯·æ±‚æ²¡æœ‰å‚æ•°æ—¶ï¼Œä½¿ç”¨åŒ…è£…ç±»å®šä¹‰å½¢å‚çš„æ•°æ®ç±»å‹ï¼Œç¨‹åºä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>@RequestParam</p>
<p>value = â€œnumâ€ï¼šå°† HTTP è¯·æ±‚ä¸­åä¸º num çš„å‚æ•°èµ‹ç»™å½¢å‚ idã€‚</p>
<p>requriedï¼šè®¾ç½® num æ˜¯å¦ä¸ºå¿…å¡«é¡¹ï¼Œtrue è¡¨ç¤ºå¿…å¡«ï¼Œfalse è¡¨ç¤ºéå¿…å¡«ï¼Œå¯çœç•¥ã€‚</p>
<p>defaultValue = â€œ0â€ï¼šå¦‚æœ HTTP è¯·æ±‚ä¸­æ²¡æœ‰ num å‚æ•°ï¼Œé»˜è®¤å€¼ä¸º0.</p>
<ul>
<li>æ•°ç»„</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/data"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataBindHandler</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/array"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">array</span><span class="params">(String[] name)</span></span>&#123;</span><br><span class="line">        String str = Arrays.toString(name);</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>@RestController è¡¨ç¤ºè¯¥æ§åˆ¶å™¨ä¼šç›´æ¥å°†ä¸šåŠ¡æ–¹æ³•çš„è¿”å›å€¼å“åº”ç»™å®¢æˆ·ç«¯ï¼Œä¸è¿›è¡Œè§†å›¾è§£æã€‚</p>
<p>@Controller è¡¨ç¤ºè¯¥æ§åˆ¶å™¨çš„æ¯ä¸€ä¸ªä¸šåŠ¡æ–¹æ³•çš„è¿”å›å€¼éƒ½ä¼šäº¤ç»™è§†å›¾è§£æå™¨è¿›è¡Œè§£æï¼Œå¦‚æœåªéœ€è¦å°†æ•°æ®å“åº”ç»™å®¢æˆ·ç«¯ï¼Œè€Œä¸éœ€è¦è¿›è¡Œè§†å›¾è§£æï¼Œåˆ™éœ€è¦åœ¨å¯¹åº”çš„ä¸šåŠ¡æ–¹æ³•å®šä¹‰å¤„æ·»åŠ  @ResponseBodyã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/data"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataBindHandler</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/array"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">array</span><span class="params">(String[] name)</span></span>&#123;</span><br><span class="line">        String str = Arrays.toString(name);</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ç­‰åŒäº</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/data"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataBindHandler</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/array"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">array</span><span class="params">(String[] name)</span></span>&#123;</span><br><span class="line">        String str = Arrays.toString(name);</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>List</li>
</ul>
<p>Spring MVC ä¸æ”¯æŒ List ç±»å‹çš„ç›´æ¥è½¬æ¢ï¼Œéœ€è¦å¯¹ List é›†åˆè¿›è¡ŒåŒ…è£…ã€‚</p>
<p>é›†åˆå°è£…ç±»</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserList</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;User&gt; users;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>JSP</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: southwind</span><br><span class="line">  Date: <span class="number">2019</span>-<span class="number">03</span>-<span class="number">14</span></span><br><span class="line">  Time: <span class="number">09</span>:<span class="number">12</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">"/data/list"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">        ç”¨æˆ·<span class="number">1</span>ç¼–å·ï¼š&lt;input type=<span class="string">"text"</span> name=<span class="string">"users[0].id"</span>/&gt;&lt;br/&gt;</span><br><span class="line">        ç”¨æˆ·<span class="number">1</span>åç§°ï¼š&lt;input type=<span class="string">"text"</span> name=<span class="string">"users[0].name"</span>/&gt;&lt;br/&gt;</span><br><span class="line">        ç”¨æˆ·<span class="number">2</span>ç¼–å·ï¼š&lt;input type=<span class="string">"text"</span> name=<span class="string">"users[1].id"</span>/&gt;&lt;br/&gt;</span><br><span class="line">        ç”¨æˆ·<span class="number">2</span>åç§°ï¼š&lt;input type=<span class="string">"text"</span> name=<span class="string">"users[1].name"</span>/&gt;&lt;br/&gt;</span><br><span class="line">        ç”¨æˆ·<span class="number">3</span>ç¼–å·ï¼š&lt;input type=<span class="string">"text"</span> name=<span class="string">"users[2].id"</span>/&gt;&lt;br/&gt;</span><br><span class="line">        ç”¨æˆ·<span class="number">3</span>åç§°ï¼š&lt;input type=<span class="string">"text"</span> name=<span class="string">"users[2].name"</span>/&gt;&lt;br/&gt;</span><br><span class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"æäº¤"</span>/&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>ä¸šåŠ¡æ–¹æ³•</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/list"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">list</span><span class="params">(UserList userList)</span></span>&#123;</span><br><span class="line">    StringBuffer str = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">    <span class="keyword">for</span>(User user:userList.getUsers())&#123;</span><br><span class="line">        str.append(user);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> str.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>å¤„ç† @ResponseBody ä¸­æ–‡ä¹±ç ï¼Œåœ¨ springmvc.xml ä¸­é…ç½®æ¶ˆæ¯è½¬æ¢å™¨ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ¶ˆæ¯è½¬æ¢å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:message-converters</span> <span class="attr">register-defaults</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.http.converter.StringHttpMessageConverter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"supportedMediaTypes"</span> <span class="attr">value</span>=<span class="string">"text/html;charset=UTF-8"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure></div>



<ul>
<li>Map</li>
</ul>
<p>è‡ªå®šä¹‰å°è£…ç±»</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserMap</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,User&gt; users;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>ä¸šåŠ¡æ–¹æ³•</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/map"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">map</span><span class="params">(UserMap userMap)</span></span>&#123;</span><br><span class="line">    StringBuffer str = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">    <span class="keyword">for</span>(String key:userMap.getUsers().keySet())&#123;</span><br><span class="line">        User user = userMap.getUsers().get(key);</span><br><span class="line">        str.append(user);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> str.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>JSP</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: southwind</span><br><span class="line">  Date: <span class="number">2019</span>-<span class="number">03</span>-<span class="number">14</span></span><br><span class="line">  Time: <span class="number">09</span>:<span class="number">12</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">"/data/map"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">        ç”¨æˆ·<span class="number">1</span>ç¼–å·ï¼š&lt;input type=<span class="string">"text"</span> name=<span class="string">"users['a'].id"</span>/&gt;&lt;br/&gt;</span><br><span class="line">        ç”¨æˆ·<span class="number">1</span>åç§°ï¼š&lt;input type=<span class="string">"text"</span> name=<span class="string">"users['a'].name"</span>/&gt;&lt;br/&gt;</span><br><span class="line">        ç”¨æˆ·<span class="number">2</span>ç¼–å·ï¼š&lt;input type=<span class="string">"text"</span> name=<span class="string">"users['b'].id"</span>/&gt;&lt;br/&gt;</span><br><span class="line">        ç”¨æˆ·<span class="number">2</span>åç§°ï¼š&lt;input type=<span class="string">"text"</span> name=<span class="string">"users['b'].name"</span>/&gt;&lt;br/&gt;</span><br><span class="line">        ç”¨æˆ·<span class="number">3</span>ç¼–å·ï¼š&lt;input type=<span class="string">"text"</span> name=<span class="string">"users['c'].id"</span>/&gt;&lt;br/&gt;</span><br><span class="line">        ç”¨æˆ·<span class="number">3</span>åç§°ï¼š&lt;input type=<span class="string">"text"</span> name=<span class="string">"users['c'].name"</span>/&gt;&lt;br/&gt;</span><br><span class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"æäº¤"</span>/&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<ul>
<li>JSON</li>
</ul>
<p>å®¢æˆ·ç«¯å‘ç”Ÿ JSON æ ¼å¼çš„æ•°æ®ï¼Œç›´æ¥é€šè¿‡ Spring MVC ç»‘å®šåˆ°ä¸šåŠ¡æ–¹æ³•çš„å½¢å‚ä¸­ã€‚</p>
<p>å¤„ç† Spring MVC æ— æ³•åŠ è½½é™æ€èµ„æºï¼Œåœ¨ web.xml ä¸­æ·»åŠ é…ç½®å³å¯ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>default<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.js<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>JSP</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: southwind</span><br><span class="line">  Date: <span class="number">2019</span>-<span class="number">03</span>-<span class="number">14</span></span><br><span class="line">  Time: <span class="number">10</span>:<span class="number">35</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;script type="text/javascript" src="js/jquery-3.3.1.min.js"&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">        $(function()&#123;</span><br><span class="line">           <span class="keyword">var</span> user = &#123;</span><br><span class="line">               <span class="string">"id"</span>:<span class="number">1</span>,</span><br><span class="line">               <span class="string">"name"</span>:<span class="string">"å¼ ä¸‰"</span></span><br><span class="line">           &#125;;</span><br><span class="line">           $.ajax(&#123;</span><br><span class="line">               url:<span class="string">"/data/json"</span>,</span><br><span class="line">               data:JSON.stringify(user),</span><br><span class="line">               type:<span class="string">"POST"</span>,</span><br><span class="line">               contentType:<span class="string">"application/json;charset=UTF-8"</span>,</span><br><span class="line">               dataType:<span class="string">"JSON"</span>,</span><br><span class="line">               success:function(data)&#123;</span><br><span class="line">                   alter(data.id+<span class="string">"---"</span>+data.name);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;)</span><br><span class="line">        &#125;);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>ä¸šåŠ¡æ–¹æ³•</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/json"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">json</span><span class="params">(@RequestBody User user)</span></span>&#123;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    user.setId(<span class="number">6</span>);</span><br><span class="line">    user.setName(<span class="string">"å¼ å…­"</span>);</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>Spring MVC ä¸­çš„ JSON å’Œ JavaBean çš„è½¬æ¢éœ€è¦å€ŸåŠ©äº fastjsonï¼Œpom.xml å¼•å…¥ç›¸å…³ä¾èµ–ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.32<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>springmvc.xml æ·»åŠ  fastjson é…ç½®ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ¶ˆæ¯è½¬æ¢å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:message-converters</span> <span class="attr">register-defaults</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.http.converter.StringHttpMessageConverter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"supportedMediaTypes"</span> <span class="attr">value</span>=<span class="string">"text/html;charset=UTF-8"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®fastjson --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter4"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure></div>



<h3 id="Spring-MVC-æ¨¡å‹æ•°æ®è§£æ"><a href="#Spring-MVC-æ¨¡å‹æ•°æ®è§£æ" class="headerlink" title="Spring MVC æ¨¡å‹æ•°æ®è§£æ"></a>Spring MVC æ¨¡å‹æ•°æ®è§£æ</h3><p>JSP å››å¤§ä½œç”¨åŸŸå¯¹åº”çš„å†…ç½®å¯¹è±¡ï¼špageContextã€requestã€sessionã€applicationã€‚</p>
<p>æ¨¡å‹æ•°æ®çš„ç»‘å®šæ˜¯ç”± ViewResolver æ¥å®Œæˆçš„ï¼Œå®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ·»åŠ æ¨¡å‹æ•°æ®ï¼Œå†äº¤ç»™ ViewResolver æ¥ç»‘å®šã€‚</p>
<p>Spring MVC æä¾›äº†ä»¥ä¸‹å‡ ç§æ–¹å¼æ·»åŠ æ¨¡å‹æ•°æ®ï¼š</p>
<ul>
<li>Map</li>
<li>Model</li>
<li>ModelAndView</li>
<li>@SessionAttribute</li>
<li>@ModelAttribute</li>
</ul>
<blockquote>
<p>å°†æ¨¡å¼æ•°æ®ç»‘å®šåˆ° request å¯¹è±¡ã€‚</p>
</blockquote>
<p>1ã€Map</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/map"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">map</span><span class="params">(Map&lt;String,User&gt; map)</span></span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">1L</span>);</span><br><span class="line">    user.setName(<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line">    map.put(<span class="string">"user"</span>,user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"view"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>JSP</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: southwind</span><br><span class="line">  Date: <span class="number">2019</span>-<span class="number">03</span>-<span class="number">14</span></span><br><span class="line">  Time: <span class="number">11</span>:<span class="number">36</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;%@ page isELIgnored=<span class="string">"false"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    $&#123;requestScope.user&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>2ã€Model</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/model"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">model</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">1L</span>);</span><br><span class="line">    user.setName(<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line">    model.addAttribute(<span class="string">"user"</span>,user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"view"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>3ã€ModelAndView</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/modelAndView"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">modelAndView</span><span class="params">()</span></span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">1L</span>);</span><br><span class="line">    user.setName(<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line">    ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">    modelAndView.addObject(<span class="string">"user"</span>,user);</span><br><span class="line">    modelAndView.setViewName(<span class="string">"view"</span>);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/modelAndView2"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">modelAndView2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">1L</span>);</span><br><span class="line">    user.setName(<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line">    ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">    modelAndView.addObject(<span class="string">"user"</span>,user);</span><br><span class="line">    View view = <span class="keyword">new</span> InternalResourceView(<span class="string">"/view.jsp"</span>);</span><br><span class="line">    modelAndView.setView(view);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/modelAndView3"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">modelAndView3</span><span class="params">()</span></span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">1L</span>);</span><br><span class="line">    user.setName(<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line">    ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView(<span class="string">"view"</span>);</span><br><span class="line">    modelAndView.addObject(<span class="string">"user"</span>,user);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/modelAndView4"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">modelAndView4</span><span class="params">()</span></span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">1L</span>);</span><br><span class="line">    user.setName(<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line">    View view = <span class="keyword">new</span> InternalResourceView(<span class="string">"/view.jsp"</span>);</span><br><span class="line">    ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView(view);</span><br><span class="line">    modelAndView.addObject(<span class="string">"user"</span>,user);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/modelAndView5"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">modelAndView5</span><span class="params">()</span></span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">1L</span>);</span><br><span class="line">    user.setName(<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line">    Map&lt;String,User&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">"user"</span>,user);</span><br><span class="line">    ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView(<span class="string">"view"</span>,map);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/modelAndView6"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">modelAndView6</span><span class="params">()</span></span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">1L</span>);</span><br><span class="line">    user.setName(<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line">    Map&lt;String,User&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">"user"</span>,user);</span><br><span class="line">    View view = <span class="keyword">new</span> InternalResourceView(<span class="string">"/view.jsp"</span>);</span><br><span class="line">    ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView(view,map);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/modelAndView7"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">modelAndView7</span><span class="params">()</span></span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">1L</span>);</span><br><span class="line">    user.setName(<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line">    ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView(<span class="string">"view"</span>,<span class="string">"user"</span>,user);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/modelAndView8"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">modelAndView8</span><span class="params">()</span></span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">1L</span>);</span><br><span class="line">    user.setName(<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line">    View view = <span class="keyword">new</span> InternalResourceView(<span class="string">"/view.jsp"</span>);</span><br><span class="line">    ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView(view,<span class="string">"user"</span>,user);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>4ã€HttpServletRequest</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/request"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">request</span><span class="params">(HttpServletRequest request)</span></span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">1L</span>);</span><br><span class="line">    user.setName(<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line">    request.setAttribute(<span class="string">"user"</span>,user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"view"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>5ã€@ModelAttribute</p>
<ul>
<li>å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸“é—¨ç”¨æ¥è¿”å›è¦å¡«å……åˆ°æ¨¡å‹æ•°æ®ä¸­çš„å¯¹è±¡ã€‚</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ModelAttribute</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">1L</span>);</span><br><span class="line">    user.setName(<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ModelAttribute</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUser</span><span class="params">(Map&lt;String,User&gt; map)</span></span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">1L</span>);</span><br><span class="line">    user.setName(<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line">    map.put(<span class="string">"user"</span>,user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ModelAttribute</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUser</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">1L</span>);</span><br><span class="line">    user.setName(<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line">    model.addAttribute(<span class="string">"user"</span>,user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>ä¸šåŠ¡æ–¹æ³•ä¸­æ— éœ€å†å¤„ç†æ¨¡å‹æ•°æ®ï¼Œåªéœ€è¿”å›è§†å›¾å³å¯ã€‚</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/modelAttribute"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">modelAttribute</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"view"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>å°†æ¨¡å‹æ•°æ®ç»‘å®šåˆ° session å¯¹è±¡</p>
</blockquote>
<p>1ã€ç›´æ¥ä½¿ç”¨åŸç”Ÿçš„ Servlet APIã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/session"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">session</span><span class="params">(HttpServletRequest request)</span></span>&#123;</span><br><span class="line">    HttpSession session = request.getSession();</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">1L</span>);</span><br><span class="line">    user.setName(<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line">    session.setAttribute(<span class="string">"user"</span>,user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"view"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/session2"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">session2</span><span class="params">(HttpSession session)</span></span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">1L</span>);</span><br><span class="line">    user.setName(<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line">    session.setAttribute(<span class="string">"user"</span>,user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"view"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>2ã€@SessionAttribute</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SessionAttributes</span>(value = &#123;<span class="string">"user"</span>,<span class="string">"address"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewHandler</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>å¯¹äº ViewHandler ä¸­çš„æ‰€æœ‰ä¸šåŠ¡æ–¹æ³•ï¼Œåªè¦å‘ request ä¸­æ·»åŠ äº† key = â€œuserâ€ã€key = â€œaddressâ€ çš„å¯¹è±¡æ—¶ï¼ŒSpring MVC ä¼šè‡ªåŠ¨å°†è¯¥æ•°æ®æ·»åŠ åˆ° session ä¸­ï¼Œä¿å­˜ key ä¸å˜ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SessionAttributes</span>(types = &#123;User<span class="class">.<span class="keyword">class</span>,<span class="title">Address</span>.<span class="title">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">ViewHandler</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>å¯¹äº ViewHandler ä¸­çš„æ‰€æœ‰ä¸šåŠ¡æ–¹æ³•ï¼Œåªè¦å‘ request ä¸­æ·»åŠ äº†æ•°æ®ç±»å‹æ˜¯ User ã€Address çš„å¯¹è±¡æ—¶ï¼ŒSpring MVC ä¼šè‡ªåŠ¨å°†è¯¥æ•°æ®æ·»åŠ åˆ° session ä¸­ï¼Œä¿å­˜ key ä¸å˜ã€‚</p>
<blockquote>
<p>å°†æ¨¡å‹æ•°æ®ç»‘å®šåˆ° application å¯¹è±¡</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/application"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">application</span><span class="params">(HttpServletRequest request)</span></span>&#123;</span><br><span class="line">    ServletContext application = request.getServletContext();</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">1L</span>);</span><br><span class="line">    user.setName(<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line">    application.setAttribute(<span class="string">"user"</span>,user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"view"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="Spring-MVC-è‡ªå®šä¹‰æ•°æ®è½¬æ¢å™¨"><a href="#Spring-MVC-è‡ªå®šä¹‰æ•°æ®è½¬æ¢å™¨" class="headerlink" title="Spring MVC è‡ªå®šä¹‰æ•°æ®è½¬æ¢å™¨"></a>Spring MVC è‡ªå®šä¹‰æ•°æ®è½¬æ¢å™¨</h3><p>æ•°æ®è½¬æ¢å™¨æ˜¯æŒ‡å°†å®¢æˆ·ç«¯ HTTP è¯·æ±‚ä¸­çš„å‚æ•°è½¬æ¢ä¸ºä¸šåŠ¡æ–¹æ³•ä¸­å®šä¹‰çš„å½¢å‚ï¼Œè‡ªå®šä¹‰è¡¨ç¤ºå¼€å‘è€…å¯ä»¥è‡ªä¸»è®¾è®¡è½¬æ¢çš„æ–¹å¼ï¼ŒHandlerApdter å·²ç»æä¾›äº†é€šç”¨çš„è½¬æ¢ï¼ŒString è½¬ intï¼ŒString è½¬ doubleï¼Œè¡¨å•æ•°æ®çš„å°è£…ç­‰ï¼Œä½†æ˜¯åœ¨ç‰¹æ®Šçš„ä¸šåŠ¡åœºæ™¯ä¸‹ï¼ŒHandlerAdapter æ— æ³•è¿›è¡Œè½¬æ¢ï¼Œå°±éœ€è¦å¼€å‘è€…è‡ªå®šä¹‰è½¬æ¢å™¨ã€‚</p>
<p>å®¢æˆ·ç«¯è¾“å…¥ String ç±»å‹çš„æ•°æ® â€œ2019-03-03â€ï¼Œè‡ªå®šä¹‰è½¬æ¢å™¨å°†è¯¥æ•°æ®è½¬ä¸º Date ç±»å‹çš„å¯¹è±¡ã€‚</p>
<ul>
<li>åˆ›å»º DateConverter è½¬æ¢å™¨ï¼Œå®ç° Conveter æ¥å£ã€‚</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.converter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.core.convert.converter.Converter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateConverter</span> <span class="keyword">implements</span> <span class="title">Converter</span>&lt;<span class="title">String</span>, <span class="title">Date</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String pattern;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DateConverter</span><span class="params">(String pattern)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.pattern = pattern;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">convert</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        SimpleDateFormat simpleDateFormat = <span class="keyword">new</span> SimpleDateFormat(<span class="keyword">this</span>.pattern);</span><br><span class="line">        Date date = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            date = simpleDateFormat.parse(s);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> date;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>springmvc.xml é…ç½®è½¬æ¢å™¨ã€‚</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®è‡ªå®šä¹‰è½¬æ¢å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"conversionService"</span> <span class="attr">class</span>=<span class="string">"org.springframework.context.support.ConversionServiceFactoryBean"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"converters"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.southwind.converter.DateConverter"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">"java.lang.String"</span> <span class="attr">value</span>=<span class="string">"yyyy-MM-dd"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">"conversionService"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ¶ˆæ¯è½¬æ¢å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:message-converters</span> <span class="attr">register-defaults</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.http.converter.StringHttpMessageConverter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"supportedMediaTypes"</span> <span class="attr">value</span>=<span class="string">"text/html;charset=UTF-8"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®fastjson --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter4"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>JSP</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: southwind</span><br><span class="line">  Date: <span class="number">2019</span>-<span class="number">03</span>-<span class="number">14</span></span><br><span class="line">  Time: <span class="number">14</span>:<span class="number">47</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">"/converter/date"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">        è¯·è¾“å…¥æ—¥æœŸ:&lt;input type=<span class="string">"text"</span> name=<span class="string">"date"</span>/&gt;(yyyy-MM-dd)&lt;br/&gt;</span><br><span class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"æäº¤"</span>/&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>Handler</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/converter"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConverterHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/date"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">date</span><span class="params">(Date date)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> date.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>String è½¬ Student</p>
<p>StudentConverter</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.converter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.southwind.entity.Student;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.convert.converter.Converter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentConverter</span> <span class="keyword">implements</span> <span class="title">Converter</span>&lt;<span class="title">String</span>, <span class="title">Student</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">convert</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        String[] args = s.split(<span class="string">"-"</span>);</span><br><span class="line">        Student student = <span class="keyword">new</span> Student();</span><br><span class="line">        student.setId(Long.parseLong(args[<span class="number">0</span>]));</span><br><span class="line">        student.setName(args[<span class="number">1</span>]);</span><br><span class="line">        student.setAge(Integer.parseInt(args[<span class="number">2</span>]));</span><br><span class="line">        <span class="keyword">return</span> student;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>springmvc.xml</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®è‡ªå®šä¹‰è½¬æ¢å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"conversionService"</span> <span class="attr">class</span>=<span class="string">"org.springframework.context.support.ConversionServiceFactoryBean"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"converters"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.southwind.converter.DateConverter"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">"java.lang.String"</span> <span class="attr">value</span>=<span class="string">"yyyy-MM-dd"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.southwind.converter.StudentConverter"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">"conversionService"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ¶ˆæ¯è½¬æ¢å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:message-converters</span> <span class="attr">register-defaults</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.http.converter.StringHttpMessageConverter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"supportedMediaTypes"</span> <span class="attr">value</span>=<span class="string">"text/html;charset=UTF-8"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®fastjson --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter4"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>JSP</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: southwind</span><br><span class="line">  Date: <span class="number">2019</span>-<span class="number">03</span>-<span class="number">14</span></span><br><span class="line">  Time: <span class="number">15</span>:<span class="number">23</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">"/converter/student"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">        è¯·è¾“å…¥å­¦ç”Ÿä¿¡æ¯ï¼š&lt;input type=<span class="string">"text"</span> name=<span class="string">"student"</span>/&gt;(id-name-age)&lt;br/&gt;</span><br><span class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"æäº¤"</span>/&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>Handler</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/student"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">student</span><span class="params">(Student student)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> student.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="Spring-MVC-REST"><a href="#Spring-MVC-REST" class="headerlink" title="Spring MVC REST"></a>Spring MVC REST</h3><p>RESTï¼šRepresentational State Transferï¼Œèµ„æºè¡¨ç°å±‚çŠ¶æ€è½¬æ¢ï¼Œæ˜¯ç›®å‰æ¯”è¾ƒä¸»æµçš„ä¸€ç§äº’è”ç½‘è½¯ä»¶æ¶æ„ï¼Œå®ƒç»“æ„æ¸…æ™°ã€æ ‡å‡†è§„èŒƒã€æ˜“äºç†è§£ã€ä¾¿äºæ‰©å±•ã€‚</p>
<ul>
<li>èµ„æºï¼ˆResourceï¼‰</li>
</ul>
<p>ç½‘ç»œä¸Šçš„ä¸€ä¸ªå®ä½“ï¼Œæˆ–è€…è¯´ç½‘ç»œä¸­å­˜åœ¨çš„ä¸€ä¸ªå…·ä½“ä¿¡æ¯ï¼Œä¸€æ®µæ–‡æœ¬ã€ä¸€å¼ å›¾ç‰‡ã€ä¸€é¦–æ­Œæ›²ã€ä¸€æ®µè§†é¢‘ç­‰ç­‰ï¼Œæ€»ä¹‹å°±æ˜¯ä¸€ä¸ªå…·ä½“çš„å­˜åœ¨ã€‚å¯ä»¥ç”¨ä¸€ä¸ª URIï¼ˆç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰æŒ‡å‘å®ƒï¼Œæ¯ä¸ªèµ„æºéƒ½æœ‰å¯¹åº”çš„ä¸€ä¸ªç‰¹å®šçš„ URIï¼Œè¦è·å–è¯¥èµ„æºæ—¶ï¼Œåªéœ€è¦è®¿é—®å¯¹åº”çš„ URI å³å¯ã€‚</p>
<ul>
<li>è¡¨ç°å±‚ï¼ˆRepresentationï¼‰</li>
</ul>
<p>èµ„æºå…·ä½“<strong>å‘ˆç°å‡ºæ¥çš„å½¢å¼</strong>ï¼Œæ¯”å¦‚æ–‡æœ¬å¯ä»¥ç”¨ txt æ ¼å¼è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ç”¨ HTMLã€XMLã€JSONç­‰æ ¼å¼æ¥è¡¨ç¤ºã€‚</p>
<ul>
<li>çŠ¶æ€è½¬æ¢ï¼ˆState Transferï¼‰</li>
</ul>
<p>å®¢æˆ·ç«¯å¦‚æœå¸Œæœ›æ“ä½œæœåŠ¡å™¨ä¸­çš„æŸä¸ªèµ„æºï¼Œå°±éœ€è¦é€šè¿‡æŸç§æ–¹å¼è®©æœåŠ¡ç«¯å‘ç”ŸçŠ¶æ€è½¬æ¢ï¼Œè€Œè¿™ç§è½¬æ¢æ˜¯å»ºç«‹åœ¨è¡¨ç°å±‚ä¹‹ä¸Šçš„ï¼Œæ‰€æœ‰å«åšâ€è¡¨ç°å±‚çŠ¶æ€è½¬æ¢â€ã€‚</p>
<h4 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h4><ul>
<li>URL æ›´åŠ ç®€æ´ã€‚</li>
<li>æœ‰åˆ©äºä¸åŒç³»ç»Ÿä¹‹é—´çš„èµ„æºå…±äº«ï¼Œåªéœ€è¦éµå®ˆä¸€å®šçš„è§„èŒƒï¼Œä¸éœ€è¦è¿›è¡Œå…¶ä»–é…ç½®å³å¯å®ç°èµ„æºå…±äº«ã€‚</li>
</ul>
<h4 id="å¦‚ä½•ä½¿ç”¨"><a href="#å¦‚ä½•ä½¿ç”¨" class="headerlink" title="å¦‚ä½•ä½¿ç”¨"></a>å¦‚ä½•ä½¿ç”¨</h4><p>REST å…·ä½“æ“ä½œå°±æ˜¯ HTTP åè®®ä¸­å››ä¸ªè¡¨ç¤ºæ“ä½œæ–¹å¼çš„åŠ¨è¯åˆ†åˆ«å¯¹åº” CRUD åŸºæœ¬æ“ä½œã€‚</p>
<p>GET ç”¨æ¥è¡¨ç¤ºè·å–èµ„æºã€‚</p>
<p>POST ç”¨æ¥è¡¨ç¤ºæ–°å»ºèµ„æºã€‚</p>
<p>PUT ç”¨æ¥è¡¨ç¤ºä¿®æ”¹èµ„æºã€‚</p>
<p>DELETE ç”¨æ¥è¡¨ç¤ºåˆ é™¤èµ„æºã€‚</p>
<p>Handler</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.southwind.entity.Student;</span><br><span class="line"><span class="keyword">import</span> com.southwind.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.southwind.repository.StudentRepository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/rest"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RESTHandeler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StudentRepository studentRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection&lt;Student&gt; <span class="title">findAll</span><span class="params">(HttpServletResponse response)</span></span>&#123;</span><br><span class="line">        response.setContentType(<span class="string">"text/json;charset=UTF-8"</span>);</span><br><span class="line">        <span class="keyword">return</span> studentRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findById/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">findById</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> <span class="keyword">long</span> id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> studentRepository.findById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/save"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(@RequestBody Student student)</span></span>&#123;</span><br><span class="line">        studentRepository.saveOrUpdate(student);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping</span>(<span class="string">"/update"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(@RequestBody Student student)</span></span>&#123;</span><br><span class="line">        studentRepository.saveOrUpdate(student);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping</span>(<span class="string">"/deleteById/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteById</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> <span class="keyword">long</span> id)</span>&#123;</span><br><span class="line">        studentRepository.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>StudentRepository</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.southwind.entity.Student;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">StudentRepository</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection&lt;Student&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">findById</span><span class="params">(<span class="keyword">long</span> id)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveOrUpdate</span><span class="params">(Student student)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteById</span><span class="params">(<span class="keyword">long</span> id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>StudentRepositoryImpl</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.repository.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.southwind.entity.Student;</span><br><span class="line"><span class="keyword">import</span> com.southwind.repository.StudentRepository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentRepositoryImpl</span> <span class="keyword">implements</span> <span class="title">StudentRepository</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;Long,Student&gt; studentMap;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        studentMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        studentMap.put(<span class="number">1L</span>,<span class="keyword">new</span> Student(<span class="number">1L</span>,<span class="string">"å¼ ä¸‰"</span>,<span class="number">22</span>));</span><br><span class="line">        studentMap.put(<span class="number">2L</span>,<span class="keyword">new</span> Student(<span class="number">2L</span>,<span class="string">"æå››"</span>,<span class="number">23</span>));</span><br><span class="line">        studentMap.put(<span class="number">3L</span>,<span class="keyword">new</span> Student(<span class="number">3L</span>,<span class="string">"ç‹äº”"</span>,<span class="number">24</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection&lt;Student&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> studentMap.values();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">findById</span><span class="params">(<span class="keyword">long</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> studentMap.get(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveOrUpdate</span><span class="params">(Student student)</span> </span>&#123;</span><br><span class="line">        studentMap.put(student.getId(),student);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteById</span><span class="params">(<span class="keyword">long</span> id)</span> </span>&#123;</span><br><span class="line">        studentMap.remove(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="Spring-MVC-æ–‡ä»¶ä¸Šä¼ ä¸‹è½½"><a href="#Spring-MVC-æ–‡ä»¶ä¸Šä¼ ä¸‹è½½" class="headerlink" title="Spring MVC æ–‡ä»¶ä¸Šä¼ ä¸‹è½½"></a>Spring MVC æ–‡ä»¶ä¸Šä¼ ä¸‹è½½</h3><blockquote>
<p>å•æ–‡ä»¶ä¸Šä¼ </p>
</blockquote>
<p>åº•å±‚æ˜¯ä½¿ç”¨ Apache fileupload ç»„ä»¶å®Œæˆä¸Šä¼ ï¼ŒSpring MVC å¯¹è¿™ç§æ–¹å¼è¿›è¡Œäº†å°è£…ã€‚</p>
<ul>
<li>pom.xml</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>JSP</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: southwind</span><br><span class="line">  Date: <span class="number">2019</span>-<span class="number">03</span>-<span class="number">15</span></span><br><span class="line">  Time: <span class="number">09</span>:<span class="number">09</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;%@ page isELIgnored=<span class="string">"false"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">"/file/upload"</span> method=<span class="string">"post"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">"file"</span> name=<span class="string">"img"</span>/&gt;</span><br><span class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"ä¸Šä¼ "</span>/&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    &lt;img src=<span class="string">"$&#123;path&#125;"</span>&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><strong>1ã€input çš„ type è®¾ç½®ä¸º fileã€‚</strong></p>
<p><strong>2ã€form çš„ method è®¾ç½®ä¸º postï¼ˆget è¯·æ±‚åªèƒ½å°†æ–‡ä»¶åä¼ ç»™æœåŠ¡å™¨ï¼‰</strong></p>
<p><strong>3ã€from çš„ enctype è®¾ç½®ä¸º multipart-form-dataï¼ˆå¦‚æœä¸è®¾ç½®åªèƒ½å°†æ–‡ä»¶åä¼ ç»™æœåŠ¡å™¨ï¼‰</strong></p>
<ul>
<li>Handler</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/file"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/upload"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">upload</span><span class="params">(MultipartFile img, HttpServletRequest request)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(img.getSize()&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//è·å–ä¿å­˜ä¸Šä¼ æ–‡ä»¶çš„fileè·¯å¾„</span></span><br><span class="line">            String path = request.getServletContext().getRealPath(<span class="string">"file"</span>);</span><br><span class="line">            <span class="comment">//è·å–ä¸Šä¼ çš„æ–‡ä»¶å</span></span><br><span class="line">            String name = img.getOriginalFilename();</span><br><span class="line">            File file = <span class="keyword">new</span> File(path,name);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                img.transferTo(file);</span><br><span class="line">                <span class="comment">//ä¿å­˜ä¸Šä¼ ä¹‹åçš„æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">                request.setAttribute(<span class="string">"path"</span>,<span class="string">"/file/"</span>+name);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"upload"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>springmvc.xml</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®ä¸Šä¼ ç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"multipartResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.multipart.commons.CommonsMultipartResolver"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>web.xml æ·»åŠ å¦‚ä¸‹é…ç½®ï¼Œå¦åˆ™å®¢æˆ·ç«¯æ— æ³•è®¿é—® png</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>default<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.png<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>å¤šæ–‡ä»¶ä¸Šä¼ </p>
</blockquote>
<p>pom.xml</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>taglibs<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>standard<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>JSP</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: southwind</span><br><span class="line">  Date: <span class="number">2019</span>-<span class="number">03</span>-<span class="number">15</span></span><br><span class="line">  Time: <span class="number">09</span>:<span class="number">32</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;%@ page isELIgnored=<span class="string">"false"</span> %&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">"c"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">"/file/uploads"</span> method=<span class="string">"post"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">        file1:&lt;input type=<span class="string">"file"</span> name=<span class="string">"imgs"</span>/&gt;&lt;br/&gt;</span><br><span class="line">        file2:&lt;input type=<span class="string">"file"</span> name=<span class="string">"imgs"</span>/&gt;&lt;br/&gt;</span><br><span class="line">        file3:&lt;input type=<span class="string">"file"</span> name=<span class="string">"imgs"</span>&gt;&lt;br/&gt;</span><br><span class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"ä¸Šä¼ "</span>/&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    &lt;c:forEach items=<span class="string">"$&#123;files&#125;"</span> <span class="keyword">var</span>=<span class="string">"file"</span> &gt;</span><br><span class="line">        &lt;img src=<span class="string">"$&#123;file&#125;"</span> width=<span class="string">"300px"</span>&gt;</span><br><span class="line">    &lt;/c:forEach&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>Handler</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/uploads"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">uploads</span><span class="params">(MultipartFile[] imgs,HttpServletRequest request)</span></span>&#123;</span><br><span class="line">    List&lt;String&gt; files = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (MultipartFile img:imgs)&#123;</span><br><span class="line">        <span class="keyword">if</span>(img.getSize()&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//è·å–ä¿å­˜ä¸Šä¼ æ–‡ä»¶çš„fileè·¯å¾„</span></span><br><span class="line">            String path = request.getServletContext().getRealPath(<span class="string">"file"</span>);</span><br><span class="line">            <span class="comment">//è·å–ä¸Šä¼ çš„æ–‡ä»¶å</span></span><br><span class="line">            String name = img.getOriginalFilename();</span><br><span class="line">            File file = <span class="keyword">new</span> File(path,name);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                img.transferTo(file);</span><br><span class="line">                <span class="comment">//ä¿å­˜ä¸Šä¼ ä¹‹åçš„æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">                files.add(<span class="string">"/file/"</span>+name);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    request.setAttribute(<span class="string">"files"</span>,files);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"uploads"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<blockquote>
<p>ä¸‹è½½</p>
</blockquote>
<ul>
<li>JSP</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: southwind</span><br><span class="line">  Date: <span class="number">2019</span>-<span class="number">03</span>-<span class="number">15</span></span><br><span class="line">  Time: <span class="number">10</span>:<span class="number">36</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;a href="/file/download/1"&gt;1.png&lt;/a&gt;</span><br><span class="line">    &lt;a href="/file/download/2"&gt;2.png&lt;/a&gt;</span><br><span class="line">    &lt;a href="/file/download/3"&gt;3.png&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>Handler</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/download/&#123;name&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">download</span><span class="params">(@PathVariable(<span class="string">"name"</span>)</span> String name, HttpServletRequest request, HttpServletResponse response)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(name != <span class="keyword">null</span>)&#123;</span><br><span class="line">        name += <span class="string">".png"</span>;</span><br><span class="line">        String path = request.getServletContext().getRealPath(<span class="string">"file"</span>);</span><br><span class="line">        File file = <span class="keyword">new</span> File(path,name);</span><br><span class="line">        OutputStream outputStream = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(file.exists())&#123;</span><br><span class="line">            response.setContentType(<span class="string">"application/forc-download"</span>);</span><br><span class="line">            response.setHeader(<span class="string">"Content-Disposition"</span>,<span class="string">"attachment;filename="</span>+name);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                outputStream = response.getOutputStream();</span><br><span class="line">                outputStream.write(FileUtils.readFileToByteArray(file));</span><br><span class="line">                outputStream.flush();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(outputStream != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        outputStream.close();</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="Spring-MVC-è¡¨å•æ ‡ç­¾åº“"><a href="#Spring-MVC-è¡¨å•æ ‡ç­¾åº“" class="headerlink" title="Spring MVC è¡¨å•æ ‡ç­¾åº“"></a>Spring MVC è¡¨å•æ ‡ç­¾åº“</h3><ul>
<li>Handler</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/get"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">get</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView(<span class="string">"tag"</span>);</span><br><span class="line">    Student student = <span class="keyword">new</span> Student(<span class="number">1L</span>,<span class="string">"å¼ ä¸‰"</span>,<span class="number">22</span>);</span><br><span class="line">    modelAndView.addObject(<span class="string">"student"</span>,student);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>JSP</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: southwind</span><br><span class="line">  Date: <span class="number">2019</span>-<span class="number">03</span>-<span class="number">15</span></span><br><span class="line">  Time: <span class="number">10</span>:<span class="number">53</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;%@ page isELIgnored=<span class="string">"false"</span> %&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">"form"</span> uri=<span class="string">"http://www.springframework.org/tags/form"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;å­¦ç”Ÿä¿¡æ¯&lt;/h1&gt;</span><br><span class="line">    &lt;form:form modelAttribute=<span class="string">"student"</span>&gt;</span><br><span class="line">        å­¦ç”ŸIDï¼š&lt;form:input path=<span class="string">"id"</span>/&gt;&lt;br/&gt;</span><br><span class="line">        å­¦ç”Ÿå§“åï¼š&lt;form:input path=<span class="string">"name"</span>/&gt;&lt;br/&gt;</span><br><span class="line">        å­¦ç”Ÿå¹´é¾„ï¼š&lt;form:input path=<span class="string">"age"</span>/&gt;&lt;br/&gt;</span><br><span class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"æäº¤"</span>/&gt;</span><br><span class="line">    &lt;/form:form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>1ã€JSP é¡µé¢å¯¼å…¥ Spring MVC è¡¨å•æ ‡ç­¾åº“ï¼Œä¸å¯¼å…¥ JSTL æ ‡ç­¾åº“çš„è¯­æ³•éå¸¸ç›¸ä¼¼ï¼Œå‰ç¼€ prefix å¯ä»¥è‡ªå®šä¹‰ï¼Œé€šå¸¸å®šä¹‰ä¸º fromã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JSP"><figure class="iseeu highlight /jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">"form"</span> uri=<span class="string">"http://www.springframework.org/tags/form"</span> %&gt;</span><br></pre></td></tr></table></figure></div>

<p>2ã€å°† form è¡¨å•ä¸æ¨¡å‹æ•°æ®è¿›è¡Œç»‘å®šï¼Œé€šè¿‡ modelAttribute å±æ€§å®Œæˆç»‘å®šï¼Œå°† modelAttribute çš„å€¼è®¾ç½®ä¸ºæ¨¡å‹æ•°æ®å¯¹åº”çš„ key å€¼ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line">Handeler:modelAndView.addObject(<span class="string">"student"</span>,student);</span><br><span class="line">JSP:&lt;form:form modelAttribute=<span class="string">"student"</span>&gt;</span><br></pre></td></tr></table></figure></div>

<p>3ã€form è¡¨å•å®Œæˆç»‘å®šä¹‹åï¼Œå°†æ¨¡å‹æ•°æ®çš„å€¼å–å‡ºç»‘å®šåˆ°ä¸åŒçš„æ ‡ç­¾ä¸­ï¼Œé€šè¿‡è®¾ç½®æ ‡ç­¾çš„ path å±æ€§å®Œæˆï¼Œå°† path å±æ€§çš„å€¼è®¾ç½®ä¸ºæ¨¡å‹æ•°æ®å¯¹åº”çš„å±æ€§åå³å¯ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JSP"><figure class="iseeu highlight /jsp"><table><tr><td class="code"><pre><span class="line">å­¦ç”ŸIDï¼š&lt;form:input path=<span class="string">"id"</span>/&gt;&lt;br/&gt;</span><br><span class="line">å­¦ç”Ÿå§“åï¼š&lt;form:input path=<span class="string">"name"</span>/&gt;&lt;br/&gt;</span><br><span class="line">å­¦ç”Ÿå¹´é¾„ï¼š&lt;form:input path=<span class="string">"age"</span>/&gt;&lt;br/&gt;</span><br></pre></td></tr></table></figure></div>

<h4 id="å¸¸ç”¨çš„è¡¨å•æ ‡ç­¾"><a href="#å¸¸ç”¨çš„è¡¨å•æ ‡ç­¾" class="headerlink" title="å¸¸ç”¨çš„è¡¨å•æ ‡ç­¾"></a>å¸¸ç”¨çš„è¡¨å•æ ‡ç­¾</h4><ul>
<li>from</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JSP"><figure class="iseeu highlight /jsp"><table><tr><td class="code"><pre><span class="line">&lt;form:from modelAttribute=<span class="string">"student"</span>/&gt;</span><br></pre></td></tr></table></figure></div>

<p>æ¸²æŸ“çš„æ˜¯ HTML ä¸­çš„<code>&lt;form&gt;&lt;/from&gt;</code>ï¼Œé€šè¿‡ modelAttribute å±æ€§ç»‘å®šå…·ä½“çš„æ¨¡å‹æ•°æ®ã€‚</p>
<ul>
<li>input</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JSP"><figure class="iseeu highlight /jsp"><table><tr><td class="code"><pre><span class="line">&lt;form:input path=<span class="string">"name"</span>/&gt;</span><br></pre></td></tr></table></figure></div>

<p>æ¸²æŸ“çš„æ˜¯ HTML ä¸­çš„ <code>&lt;input type=&quot;text&quot;/&gt;</code>ï¼Œfrom æ ‡ç­¾ç»‘å®šçš„æ˜¯æ¨¡å‹æ•°æ®ï¼Œinput æ ‡ç­¾ç»‘å®šçš„æ˜¯æ¨¡å‹æ•°æ®ä¸­çš„å±æ€§å€¼ï¼Œé€šè¿‡ path å±æ€§å¯ä»¥ä¸æ¨¡å‹æ•°æ®ä¸­çš„å±æ€§åå¯¹åº”ï¼Œå¹¶ä¸”æ”¯æŒåŠè”æ“ä½œã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JSP"><figure class="iseeu highlight /jsp"><table><tr><td class="code"><pre><span class="line">&lt;from:input path=<span class="string">"address.name"</span>/&gt;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>password</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JSP"><figure class="iseeu highlight /jsp"><table><tr><td class="code"><pre><span class="line">&lt;form:password path=<span class="string">"password"</span>/&gt;</span><br></pre></td></tr></table></figure></div>

<p>æ¸²æŸ“çš„æ˜¯ HTML ä¸­çš„ <code>&lt;input type=&quot;password&quot;/&gt;</code>ï¼Œé€šè¿‡ path å±æ€§ä¸æ¨¡å‹æ•°æ®çš„å±æ€§å€¼è¿›è¡Œç»‘å®šï¼Œpassword æ ‡ç­¾çš„å€¼ä¸ä¼šåœ¨é¡µé¢æ˜¾ç¤ºã€‚</p>
<ul>
<li>checkbox</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JSP"><figure class="iseeu highlight /jsp"><table><tr><td class="code"><pre><span class="line">&lt;form:checkbox path=<span class="string">"hobby"</span> value=<span class="string">"è¯»ä¹¦"</span>/&gt;</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line">student.setFlag(<span class="keyword">false</span>);</span><br></pre></td></tr></table></figure></div>

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">checkboxï¼š&lt;form:checkbox path="flag" value="flag"&gt;&lt;/form:checkbox&gt;&lt;br/&gt;</span><br></pre></td></tr></table></figure>

<p>æ¸²æŸ“çš„æ˜¯ HTML ä¸­çš„ <code>&lt;input type=&quot;checkbox&quot;/&gt;</code>ï¼Œé€šè¿‡ path ä¸æ¨¡å‹æ•°æ®çš„å±æ€§å€¼è¿›è¡Œç»‘å®šï¼Œå¯ä»¥ç»‘å®š booleanã€æ•°ç»„å’Œé›†åˆã€‚</p>
<p>å¦‚æœç»‘å®š boolean å€¼ï¼Œè‹¥è¯¥å˜é‡çš„å€¼ä¸º trueï¼Œåˆ™è¡¨ç¤ºè¯¥å¤é€‰æ¡†é€‰ä¸­ï¼Œå¦åˆ™è¡¨ç¤ºä¸é€‰ä¸­ã€‚</p>
<p>å¦‚æœç»‘å®šæ•°ç»„æˆ–è€…é›†åˆï¼Œæ•°ç»„/é›†åˆä¸­çš„å…ƒç´ ç­‰äº checkbox çš„ value å€¼ï¼Œåˆ™é€‰ä¸­ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line">student.setHobby(Arrays.asList(<span class="string">"è¯»ä¹¦"</span>,<span class="string">"çœ‹ç”µå½±"</span>,<span class="string">"ç©æ¸¸æˆ"</span>));</span><br><span class="line">modelAndView.addObject(<span class="string">"student"</span>,student);</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JSP"><figure class="iseeu highlight /jsp"><table><tr><td class="code"><pre><span class="line">çˆ±å¥½ï¼š&lt;form:checkbox path="hobby" value="æ‘„å½±"&gt;&lt;/form:checkbox&gt;æ‘„å½±&lt;br/&gt;</span><br><span class="line">&lt;form:checkbox path="hobby" value="è¯»ä¹¦"&gt;&lt;/form:checkbox&gt;è¯»ä¹¦&lt;br/&gt;</span><br><span class="line">&lt;form:checkbox path="hobby" value="å¬éŸ³ä¹"&gt;&lt;/form:checkbox&gt;å¬éŸ³ä¹&lt;br/&gt;</span><br><span class="line">&lt;form:checkbox path="hobby" value="çœ‹ç”µå½±"&gt;&lt;/form:checkbox&gt;çœ‹ç”µå½±&lt;br/&gt;</span><br><span class="line">&lt;form:checkbox path="hobby" value="æ—…æ¸¸"&gt;&lt;/form:checkbox&gt;æ—…æ¸¸&lt;br/&gt;</span><br><span class="line">&lt;form:checkbox path="hobby" value="ç©æ¸¸æˆ"&gt;&lt;/form:checkbox&gt;ç©æ¸¸æˆ&lt;br/&gt;</span><br><span class="line">&lt;input type=<span class="string">"submit"</span> value=<span class="string">"æäº¤"</span>/&gt;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>checkboxes</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JSP"><figure class="iseeu highlight /jsp"><table><tr><td class="code"><pre><span class="line">&lt;form:checkboxes items=$&#123;student.hobby&#125; path=<span class="string">"selecHobby"</span>/&gt;</span><br></pre></td></tr></table></figure></div>

<p>æ¸²æŸ“çš„æ˜¯ HTML ä¸­çš„ä¸€ç»„ <code>&lt;input type=&quot;checkbox&quot;/&gt;</code>ï¼Œæ˜¯å¯¹ <code>&lt;form:checkbox/&gt;</code> çš„ä¸€ç§ç®€åŒ–ï¼Œéœ€è¦ç»“åˆ items å’Œ path å±æ€§æ¥ä½¿ç”¨ï¼Œitems ç»‘å®šè¢«éå†çš„é›†åˆæˆ–æ•°ç»„ï¼Œpath ç»‘å®šè¢«é€‰ä¸­çš„é›†åˆæˆ–æ•°ç»„ï¼Œå¯ä»¥è¿™æ ·ç†è§£ï¼Œitems ä¸ºå…¨éƒ¨å¯é€‰é›†åˆï¼Œpath ä¸ºé»˜è®¤çš„é€‰ä¸­é›†åˆã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span></span>&#123;</span><br><span class="line">	List&lt;String&gt; Hobby;</span><br><span class="line">    List&lt;String&gt; selectHobby;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">student.setHobby(Arrays.asList(<span class="string">"æ‘„å½±"</span>,<span class="string">"è¯»ä¹¦"</span>,<span class="string">"å¬éŸ³ä¹"</span>,<span class="string">"çœ‹ç”µå½±"</span>,<span class="string">"æ—…æ¸¸"</span>,<span class="string">"ç©æ¸¸æˆ"</span>));</span><br><span class="line">student.setSelectHobby(Arrays.asList(<span class="string">"æ‘„å½±"</span>,<span class="string">"è¯»ä¹¦"</span>,<span class="string">"å¬éŸ³ä¹"</span>));</span><br><span class="line">modelAndView.addObject(<span class="string">"student"</span>,student);</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JSP"><figure class="iseeu highlight /jsp"><table><tr><td class="code"><pre><span class="line">çˆ±å¥½ï¼š&lt;form:checkboxes path=<span class="string">"selectHobby"</span> items=<span class="string">"$&#123;student.hobby&#125;"</span>/&gt;&lt;br/&gt;</span><br></pre></td></tr></table></figure></div>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ <strong>path å¯ä»¥ç›´æ¥ç»‘å®šæ¨¡å‹æ•°æ®çš„å±æ€§å€¼</strong>ï¼Œ</p>
<p><strong>items åˆ™éœ€è¦é€šè¿‡ EL è¡¨è¾¾å¼</strong>çš„å½¢å¼ä»åŸŸå¯¹è±¡ä¸­è·å–æ•°æ®ï¼Œä¸èƒ½ç›´æ¥å†™å±æ€§åã€‚</p>
<ul>
<li>rabiobutton  å•é€‰æ¡†</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JSP"><figure class="iseeu highlight /jsp"><table><tr><td class="code"><pre><span class="line">&lt;from:radiobutton path=<span class="string">"radioId"</span> value=<span class="string">"0"</span>/&gt;</span><br></pre></td></tr></table></figure></div>

<p>æ¸²æŸ“çš„æ˜¯ HTML ä¸­çš„ä¸€ä¸ª <code>&lt;input type=&quot;radio&quot;/&gt;</code>ï¼Œç»‘å®šçš„æ•°æ®ä¸æ ‡ç­¾çš„ value å€¼ç›¸ç­‰åˆ™ä¸ºé€‰ä¸­ï¼Œå¦åˆ™ä¸é€‰ä¸­ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line">student.setRadioId(<span class="number">1</span>);</span><br><span class="line">modelAndView.addObject(<span class="string">"student"</span>,student);</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JSP"><figure class="iseeu highlight /jsp"><table><tr><td class="code"><pre><span class="line">radiobutton:&lt;form:radiobutton path=<span class="string">"radioId"</span> value=<span class="string">"1"</span>/&gt;radiobutton&lt;br/&gt;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>radiobuttons</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JSP"><figure class="iseeu highlight /jsp"><table><tr><td class="code"><pre><span class="line">&lt;form:radiobuttons itmes=<span class="string">"$&#123;student.grade&#125;"</span> path=<span class="string">"selectGrade"</span>/&gt;</span><br></pre></td></tr></table></figure></div>

<p>æ¸²æŸ“çš„æ˜¯ HTML ä¸­çš„ä¸€ç»„ <code>&lt;input type=&quot;radio&quot;/&gt;</code>ï¼Œè¿™é‡Œéœ€è¦é›†åˆ items å’Œ path ä¸¤ä¸ªå±æ€§æ¥ä½¿ç”¨ï¼Œitems ç»‘å®šè¢«éå†çš„é›†åˆæˆ–æ•°ç»„ï¼Œpath ç»‘å®šè¢«é€‰ä¸­çš„å€¼ï¼Œitems ä¸ºå…¨éƒ¨çš„å¯é€‰ç±»å‹ï¼Œpath ä¸ºé»˜è®¤é€‰ä¸­çš„é€‰é¡¹ï¼Œç”¨æ³•ä¸ <code>&lt;form:checkboxes/&gt;</code> ä¸€è‡´ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line">Map&lt;Integer,String&gt; gradeMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">gradeMap.put(<span class="number">1</span>,<span class="string">"ä¸€å¹´çº§"</span>);</span><br><span class="line">gradeMap.put(<span class="number">2</span>,<span class="string">"äºŒå¹´çº§"</span>);</span><br><span class="line">gradeMap.put(<span class="number">3</span>,<span class="string">"ä¸‰å¹´çº§"</span>);</span><br><span class="line">gradeMap.put(<span class="number">4</span>,<span class="string">"å››å¹´çº§"</span>);</span><br><span class="line">gradeMap.put(<span class="number">5</span>,<span class="string">"äº”å¹´çº§"</span>);</span><br><span class="line">gradeMap.put(<span class="number">6</span>,<span class="string">"å…­å¹´çº§"</span>);</span><br><span class="line">student.setGradeMap(gradeMap);</span><br><span class="line">student.setSelectGrade(<span class="number">3</span>);</span><br><span class="line">modelAndView.addObject(<span class="string">"student"</span>,student);</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JSP"><figure class="iseeu highlight /jsp"><table><tr><td class="code"><pre><span class="line">å­¦ç”Ÿå¹´çº§ï¼š&lt;form:radiobuttons items=<span class="string">"$&#123;student.gradeMap&#125;"</span> path=<span class="string">"selectGrade"</span>/&gt;&lt;br/&gt;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>select</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JSP"><figure class="iseeu highlight /jsp"><table><tr><td class="code"><pre><span class="line">&lt;form:select items=<span class="string">"$&#123;student.citys&#125;"</span> path=<span class="string">"selectCity"</span>/&gt;</span><br></pre></td></tr></table></figure></div>

<p>æ¸²æŸ“çš„æ˜¯ HTML ä¸­çš„ä¸€ä¸ª <code>&lt;select/&gt;</code> æ ‡ç­¾ï¼Œ</p>
<p>éœ€è¦ç»“åˆ items å’Œ path ä¸¤ä¸ªå±æ€§æ¥ä½¿ç”¨ï¼Œ</p>
<p>items ç»‘å®šè¢«éå†çš„é›†åˆæˆ–æ•°ç»„ï¼Œ</p>
<p>path ç»‘å®šè¢«é€‰ä¸­çš„å€¼ï¼Œç”¨æ³•ä¸ <code>&lt;from:radiobuttons/&gt;</code>ä¸€è‡´ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line">Map&lt;Integer,String&gt; cityMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">cityMap.put(<span class="number">1</span>,<span class="string">"åŒ—äº¬"</span>);</span><br><span class="line">cityMap.put(<span class="number">2</span>,<span class="string">"ä¸Šæµ·"</span>);</span><br><span class="line">cityMap.put(<span class="number">3</span>,<span class="string">"å¹¿å·"</span>);</span><br><span class="line">cityMap.put(<span class="number">4</span>,<span class="string">"æ·±åœ³"</span>);</span><br><span class="line">student.setCityMap(cityMap);</span><br><span class="line">student.setSelectCity(<span class="number">3</span>);</span><br><span class="line">modelAndView.addObject(<span class="string">"student"</span>,student);</span><br></pre></td></tr></table></figure></div>

<figure class="highlight"><table><tr><td class="code"><pre><span class="line">æ‰€åœ¨åŸå¸‚ï¼š&lt;form:select items="$&#123;student.cityMap&#125;" path="selectCity"&gt;&lt;/form:select&gt;&lt;br/&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>options</li>
</ul>
<p><code>form:select</code> ç»“åˆ <code>form:options</code> çš„ä½¿ç”¨ï¼Œ<code>from:select</code> åªå®šä¹‰ path å±æ€§ï¼Œåœ¨ <code>form:select</code> æ ‡ç­¾å†…éƒ¨æ·»åŠ ä¸€ä¸ªå­æ ‡ç­¾ <code>form:options</code> ï¼Œè®¾ç½® items å±æ€§ï¼Œè·å–è¢«éå†çš„é›†åˆã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">æ‰€åœ¨åŸå¸‚ï¼š&lt;form:select path=<span class="string">"selectCity"</span>&gt;</span><br><span class="line">  				&lt;form:options items="$&#123;student.cityMap&#125;"&gt;&lt;/form:options&gt;</span><br><span class="line">				&lt;/form:select&gt;&lt;br/&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>option</p>
<p><code>form:select</code> ç»“åˆ <code>form:option</code> çš„ä½¿ç”¨ï¼Œ<code>from:select</code> å®šä¹‰ path å±æ€§ï¼Œç»™æ¯ä¸€ä¸ª <code>form:option</code> è®¾ç½® value å€¼ï¼Œpath çš„å€¼ä¸å“ªä¸ª value å€¼ç›¸ç­‰ï¼Œè¯¥é¡¹é»˜è®¤é€‰ä¸­ã€‚</p>
</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">æ‰€åœ¨åŸå¸‚ï¼š&lt;form:select path=<span class="string">"selectCity"</span>&gt;</span><br><span class="line">            &lt;form:option value="1"&gt;æ­å·&lt;/form:option&gt;</span><br><span class="line">            &lt;form:option value="2"&gt;æˆéƒ½&lt;/form:option&gt;</span><br><span class="line">            &lt;form:option value="3"&gt;è¥¿å®‰&lt;/form:option&gt;</span><br><span class="line">        &lt;/form:select&gt;&lt;br/&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>textarea</li>
</ul>
<p>æ¸²æŸ“çš„æ˜¯ HTML ä¸­çš„ä¸€ä¸ª <code>&lt;textarea/&gt;</code> ï¼Œpath ç»‘å®šæ¨¡å‹æ•°æ®çš„å±æ€§å€¼ï¼Œä½œä¸ºæ–‡æœ¬è¾“å…¥åŸŸçš„é»˜è®¤å€¼ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line">student.setIntroduce(<span class="string">"ä½ å¥½ï¼Œæˆ‘æ˜¯..."</span>);</span><br><span class="line">modelAndView.addObject(<span class="string">"student"</span>,student);</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JSP"><figure class="iseeu highlight /jsp"><table><tr><td class="code"><pre><span class="line">ä¿¡æ¯ï¼š&lt;form:textarea path=<span class="string">"introduce"</span>/&gt;&lt;br/&gt;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>errors</li>
</ul>
<p>å¤„ç†é”™è¯¯ä¿¡æ¯ï¼Œä¸€èˆ¬ç”¨åœ¨æ•°æ®æ ¡éªŒï¼Œè¯¥æ ‡ç­¾éœ€è¦ç»“åˆ Spring MVC çš„<strong>éªŒè¯å™¨</strong>ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚</p>
<h3 id="Spring-MVC-æ•°æ®æ ¡éªŒ"><a href="#Spring-MVC-æ•°æ®æ ¡éªŒ" class="headerlink" title="Spring MVC æ•°æ®æ ¡éªŒ"></a>Spring MVC æ•°æ®æ ¡éªŒ</h3><p>Spring MVC æä¾›äº†ä¸¤ç§æ•°æ®æ ¡éªŒçš„æ–¹å¼ï¼š1ã€åŸºäº Validator æ¥å£ã€‚2ã€ä½¿ç”¨ Annotation JSR - 303 æ ‡å‡†è¿›è¡Œæ ¡éªŒã€‚</p>
<p>åŸºäº Validator æ¥å£çš„æ–¹å¼éœ€è¦è‡ªå®šä¹‰ Validator éªŒè¯å™¨ï¼Œæ¯ä¸€æ¡æ•°æ®çš„éªŒè¯è§„åˆ™éœ€è¦å¼€å‘è€…æ‰‹åŠ¨å®Œæˆï¼Œä½¿ç”¨ Annotation JSR - 303 æ ‡å‡†åˆ™ä¸éœ€è¦è‡ªå®šä¹‰éªŒè¯å™¨ï¼Œé€šè¿‡æ³¨è§£çš„æ–¹å¼å¯ä»¥ç›´æ¥åœ¨å®ä½“ç±»ä¸­æ·»åŠ æ¯ä¸ªå±æ€§çš„éªŒè¯è§„åˆ™ï¼Œè¿™ç§æ–¹å¼æ›´åŠ æ–¹ä¾¿ï¼Œå®é™…å¼€å‘ä¸­æ¨èä½¿ç”¨ã€‚</p>
<blockquote>
<p>åŸºäº Validator æ¥å£</p>
</blockquote>
<ul>
<li>å®ä½“ç±» Account</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>è‡ªå®šä¹‰éªŒè¯å™¨ AccountValidatorï¼Œå®ç° Validator æ¥å£ã€‚</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.validator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.southwind.entity.Account;</span><br><span class="line"><span class="keyword">import</span> org.springframework.validation.Errors;</span><br><span class="line"><span class="keyword">import</span> org.springframework.validation.ValidationUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.validation.Validator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountValidator</span> <span class="keyword">implements</span> <span class="title">Validator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç¡®å®šæ˜¯å¦éœ€è¦éªŒè¯</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">supports</span><span class="params">(Class&lt;?&gt; aClass)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Account<span class="class">.<span class="keyword">class</span>.<span class="title">equals</span>(<span class="title">aClass</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿›è¡Œæ•°æ®æ ¡éªŒ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">validate</span><span class="params">(Object o, Errors errors)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//Errorså­˜å‚¨é”™è¯¯ä¿¡æ¯ï¼Œ</span></span><br><span class="line">        ValidationUtils.rejectIfEmpty(errors,<span class="string">"name"</span>,<span class="keyword">null</span>,<span class="string">"å§“åä¸èƒ½ä¸ºç©º"</span>);</span><br><span class="line">        ValidationUtils.rejectIfEmpty(errors,<span class="string">"password"</span>,<span class="keyword">null</span>,<span class="string">"å¯†ç ä¸èƒ½ä¸ºç©º"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>æ§åˆ¶å™¨</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.southwind.entity.Account;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.validation.BindingResult;</span><br><span class="line"><span class="keyword">import</span> org.springframework.validation.annotation.Validated;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/validator"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ValidatorHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç»‘å®šå‰ç«¯æ•°æ®</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/login"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">"account"</span>,<span class="keyword">new</span> Account());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"login"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/login"</span>)</span><br><span class="line">    <span class="comment">//æ·»åŠ æ³¨è§£è‡ªåŠ¨ç»‘å®šéªŒè¯ ç»‘å®šç»“æœé›†</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(@Validated Account account, BindingResult bindingResult)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(bindingResult.hasErrors())&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"login"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>springmvc.xml é…ç½®éªŒè¯å™¨ã€‚</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountValidator"</span> <span class="attr">class</span>=<span class="string">"com.southwind.validator.AccountValidator"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">validator</span>=<span class="string">"accountValidator"</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>JSP</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: southwind</span><br><span class="line">  Date: <span class="number">2019</span>-<span class="number">03</span>-<span class="number">18</span></span><br><span class="line">  Time: <span class="number">10</span>:<span class="number">31</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;%@ page isELIgnored=<span class="string">"false"</span> %&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">"form"</span> uri=<span class="string">"http://www.springframework.org/tags/form"</span> %&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">"from"</span> uri=<span class="string">"http://www.springframework.org/tags/form"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form:form modelAttribute=<span class="string">"account"</span> action=<span class="string">"/validator/login"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">        å§“åï¼š&lt;form:input path="name"/&gt;&lt;from:errors path="name"&gt;&lt;/from:errors&gt;&lt;br/&gt;</span><br><span class="line">        å¯†ç ï¼š&lt;form:input path="password"/&gt;&lt;from:errors path="password"&gt;&lt;/from:errors&gt;&lt;br/&gt;</span><br><span class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"ç™»å½•"</span>/&gt;</span><br><span class="line">    &lt;/form:form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Annotation JSR - 303 æ ‡å‡†</p>
</blockquote>
<p>ä½¿ç”¨ Annotation JSR - 303 æ ‡å‡†è¿›è¡ŒéªŒè¯ï¼Œéœ€è¦å¯¼å…¥æ”¯æŒè¿™ç§æ ‡å‡†çš„ä¾èµ– jar æ–‡ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ Hibernate Validatorã€‚</p>
<ul>
<li>pom.xml</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- JSR-303 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-validator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.6.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.validation<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>validation-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.jboss.logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jboss-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.2.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>é€šè¿‡æ³¨è§£çš„æ–¹å¼ç›´æ¥åœ¨å®ä½“ç±»ä¸­æ·»åŠ ç›¸å…³çš„éªŒè¯è§„åˆ™ã€‚</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.southwind.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.validator.constraints.Email;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.validator.constraints.NotEmpty;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.Pattern;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.Size;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="meta">@NotEmpty</span>(message = <span class="string">"ç”¨æˆ·åä¸èƒ½ä¸ºç©º"</span>)</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="meta">@Size</span>(min = <span class="number">6</span>,max = <span class="number">12</span>,message = <span class="string">"å¯†ç 6-12ä½"</span>)</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="meta">@Email</span>(regexp = <span class="string">"^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\\\\.[a-zA-Z0-9-]+)*\\\\.[a-zA-Z0-9]&#123;2,6&#125;$"</span>,message = <span class="string">"è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±æ ¼mrå¼"</span>)</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="meta">@Pattern</span>(regexp = <span class="string">"^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\\\\\\\\d&#123;8&#125;$"</span>,message = <span class="string">"è¯·è¾“å…¥æ­£ç¡®çš„ç”µè¯"</span>)</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>ValidatorHandler</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/register"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">register</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">"person"</span>,<span class="keyword">new</span> Person());</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"register"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/register"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">register</span><span class="params">(@Valid Person person, BindingResult bindingResult)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(bindingResult.hasErrors())&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"register"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>springmvc.xml</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>JSP</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: southwind</span><br><span class="line">  Date: <span class="number">2019</span>-<span class="number">03</span>-<span class="number">18</span></span><br><span class="line">  Time: <span class="number">11</span>:<span class="number">29</span></span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;%@ page isELIgnored=<span class="string">"false"</span> %&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">"form"</span> uri=<span class="string">"http://www.springframework.org/tags/form"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form:form modelAttribute=<span class="string">"person"</span> action=<span class="string">"/validator/register2"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">        ç”¨æˆ·åï¼š&lt;form:input path="username"&gt;&lt;/form:input&gt;&lt;form:errors path="username"/&gt;&lt;br/&gt;</span><br><span class="line">        å¯†ç ï¼š&lt;form:password path="password"&gt;&lt;/form:password&gt;&lt;form:errors path="password"/&gt;&lt;br/&gt;</span><br><span class="line">        é‚®ç®±ï¼š&lt;form:input path="email"&gt;&lt;/form:input&gt;&lt;form:errors path="email"/&gt;&lt;br/&gt;</span><br><span class="line">        ç”µè¯ï¼š&lt;form:input path="phone"&gt;&lt;/form:input&gt;&lt;form:errors path="phone"/&gt;&lt;br/&gt;</span><br><span class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"æäº¤"</span>/&gt;</span><br><span class="line">    &lt;/form:form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>æ ¡éªŒè§„åˆ™è¯¦è§£ï¼š</p>
<p>@Null                    è¢«æ³¨è§£çš„å…ƒç´ å¿…é¡»ä¸ºnull</p>
<p>@NotNull                  è¢«æ³¨è§£çš„å…ƒç´ ä¸èƒ½ä¸ºnull</p>
<p>@Min(value)                 è¢«æ³¨è§£çš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºç­‰äºæŒ‡å®šçš„æœ€å°å€¼</p>
<p>@Max(value)                è¢«æ³¨è§£çš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å°äºäºç­‰äºæŒ‡å®šçš„æœ€å¤§å€¼    </p>
<p>@Email                     è¢«æ³¨è§£çš„å…ƒç´ å¿…é¡»æ˜¯ç”µå­é‚®ç®±åœ°å€</p>
<p>@Pattern                  è¢«æ³¨è§£çš„å…ƒç´ å¿…é¡»ç¬¦åˆå¯¹åº”çš„æ­£åˆ™è¡¨è¾¾å¼</p>
<p>@Length                   è¢«æ³¨è§£çš„å…ƒç´ çš„å¤§å°å¿…é¡»åœ¨æŒ‡å®šçš„èŒƒå›´å†…</p>
<p>@NotEmpty                  è¢«æ³¨è§£çš„å­—ç¬¦ä¸²çš„å€¼å¿…é¡»éç©º</p>
<p>Null å’Œ Empty æ˜¯ä¸åŒçš„ç»“æœï¼ŒString str = nullï¼Œstr æ˜¯ nullï¼ŒString str = â€œâ€ï¼Œstr ä¸æ˜¯ nullï¼Œå…¶å€¼ä¸ºç©ºã€‚</p>
]]></content>
      <categories>
        <category>æ–‡ç« ç±»å‹</category>
      </categories>
      <tags>
        <tag>Spring MVC</tag>
      </tags>
  </entry>
  <entry>
    <title>å•ä¾‹è®¾è®¡æ¨¡å¼</title>
    <url>/kawyang/cd333c07.html</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡æ€»ç»“äº†å•ä¾‹è®¾è®¡æ¨¡å¼çš„åŸºæœ¬å†…å®¹ï¼Œå¹¶ğŸ“Enumã€åºåˆ—åŒ–ç­‰å†…å®¹ã€‚</p>
</blockquote>
<a id="more"></a>

<h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä¸”æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹</p>
<h3 id="æ‡’æ±‰å¼"><a href="#æ‡’æ±‰å¼" class="headerlink" title="æ‡’æ±‰å¼"></a>æ‡’æ±‰å¼</h3><p>1ï¼‰çº¿ç¨‹å®‰å…¨<br>2ï¼‰åŠ é”ä¼˜åŒ–=&gt; double check<br>3ï¼‰ç¼–è¯‘å™¨ï¼ˆJITï¼‰ï¼ŒCPU æœ‰å¯èƒ½å¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºï¼Œå¯¼è‡´ä½¿ç”¨åˆ°å°šæœªåˆå§‹åŒ–çš„å®ä¾‹ã€‚</p>
<ul>
<li>å¯¹è±¡åˆ›å»ºçš„æ­¥éª¤: åˆ†é…ç©ºé—´ =&gt; åˆå§‹åŒ– =&gt; å¼•ç”¨èµ‹å€¼ åœ¨ç¼–è¯‘æ—¶ ç¬¬2ã€3æ­¥æ˜¯å¯ä»¥äº’æ¢çš„</li>
<li>å½“æ­¥éª¤äº’æ¢ï¼Œå…ˆè¿›è¡Œå¼•ç”¨èµ‹å€¼ï¼Œå½“å¦ä¸€ä¸ªéœ€è¦è·å–æ—¶ï¼Œç”±äºè¿˜æœªè¿›è¡Œåˆå§‹åŒ–ï¼Œæ‰€ä»¥ä¼šäº§ç”Ÿ<code>ç©ºæŒ‡é’ˆå¼‚å¸¸</code>ã€‚</li>
<li>æ‰€ä»¥éœ€è¦ é€šè¿‡æ·»åŠ  <code>volatile</code>å…³é”®å­—è¿›è¡Œä¿®é¥°ï¼Œé˜²æ­¢æŒ‡ä»¤é‡æ’ã€‚</li>
</ul>
<h4 id="ä¼˜åŒ–è¿‡ç¨‹"><a href="#ä¼˜åŒ–è¿‡ç¨‹" class="headerlink" title="ä¼˜åŒ–è¿‡ç¨‹"></a>ä¼˜åŒ–è¿‡ç¨‹</h4><ul>
<li>åŸºæœ¬</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LazySingleton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> LazySingleton instance;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»ºç§æœ‰æ„é€ å‡½æ•°ï¼Œé˜²æ­¢ä½¿ç”¨ new åˆ›å»º</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">LazySingleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LazySingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">20</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            instance = <span class="keyword">new</span> LazySingleton();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<ul>
<li>é—®é¢˜</li>
</ul>
<p>å½“ä¸¤ä¸ªçº¿ç¨‹å‡ ä¹åŒæ—¶è¿›å…¥ if ï¼Œå°±ä¼šåˆ›å»ºä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ã€‚</p>
<ul>
<li><p>è§£å†³ï¼šæ·»åŠ ç¨‹åºğŸ”’</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> LazySingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">20</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            instance = <span class="keyword">new</span> LazySingleton();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>é—®é¢˜ : å½“åˆ›å»ºå®ä¾‹å¯¹è±¡åï¼Œä¸æ–­è·å–ä¼šé™ä½è·å–æ•ˆç‡(ä¸æ–­åŠ é”)ã€‚</p>
</li>
<li><p>è§£å†³ : åªéœ€è¦åœ¨ if å†…éƒ¨æ·»åŠ ç¨‹åºğŸ”’ï¼Œä»¥æé«˜ç¨‹åºçš„æ•ˆç‡</p>
</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LazySingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (LazySingleton<span class="class">.<span class="keyword">class</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">                    instance = <span class="keyword">new</span> LazySingleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>

<h4 id="æœ€ç»ˆä»£ç "><a href="#æœ€ç»ˆä»£ç " class="headerlink" title="æœ€ç»ˆä»£ç "></a>æœ€ç»ˆä»£ç </h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LazySingletion</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> LazySingletion instance;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="title">LazySingletion</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LazySingletion <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">			<span class="keyword">synchronized</span> (LazySingletion<span class="class">.<span class="keyword">class</span>)</span>&#123;</span><br><span class="line">				<span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">					instance = <span class="keyword">new</span> LazySingletion();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> instance;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="é¥¿æ±‰å¼"><a href="#é¥¿æ±‰å¼" class="headerlink" title="é¥¿æ±‰å¼"></a>é¥¿æ±‰å¼</h3><blockquote>
<p>JVM ä¿è¯çº¿ç¨‹å®‰å…¨çš„ï¼Œç¨‹åºåœ¨ç¼–è¯‘æ—¶å°±åˆ›å»ºäº†å¯¹è±¡ï¼Œæ‰€ä»¥ä¸å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HangrySingleton</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> HangrySingleton instance = <span class="keyword">new</span> HangrySingleton();</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">HangrySingleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HangrySingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> instance;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="é™æ€å†…éƒ¨ç±»"><a href="#é™æ€å†…éƒ¨ç±»" class="headerlink" title="é™æ€å†…éƒ¨ç±»"></a>é™æ€å†…éƒ¨ç±»</h3><blockquote>
<p>æ‡’åŠ è½½çš„æ–¹å¼: å°†å•ä¾‹å¯¹è±¡ æ”¾ç½®åœ¨å†…éƒ¨ç±»ä¸­ï¼Œå½“è°ƒç”¨ getInstance æ–¹æ³•æ—¶ï¼Œéœ€è¦å†…éƒ¨ç±»çš„å±æ€§ï¼Œè¿™æ—¶ä¼šåˆ›å»º å®ä¾‹å¯¹è±¡ï¼Œæ˜¯æ‡’åŠ è½½çš„æ–¹å¼ã€‚</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">InnerClassSingleton</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">InnerClass</span></span>&#123;</span><br><span class="line">		<span class="keyword">private</span> <span class="keyword">static</span> InnerClassSingleton instance = <span class="keyword">new</span> InnerClassSingleton();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">InnerClassSingleton</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="comment">// é˜²æ­¢ä½¿ç”¨åå°„æœºåˆ¶è¿›è¡Œåˆ›å»º</span></span><br><span class="line">		<span class="comment">// æ‡’æ±‰æ¨¡å¼ä¸èƒ½è¿›è¡Œé˜²æŠ¤</span></span><br><span class="line">		<span class="keyword">if</span>(Inner.instance != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"å·²ç»åˆ›å»ºè¿‡å®ä¾‹ï¼ï½"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> InnerClassSingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> InnerClass.instance;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="Enum-å•ä¾‹æ¨¡å¼"><a href="#Enum-å•ä¾‹æ¨¡å¼" class="headerlink" title="Enum å•ä¾‹æ¨¡å¼"></a>Enum å•ä¾‹æ¨¡å¼</h3><blockquote>
<p>åå°„å®‰å…¨ã€çº¿ç¨‹å®‰å…¨</p>
</blockquote>
<h3 id="åå°„æ”»å‡»"><a href="#åå°„æ”»å‡»" class="headerlink" title="åå°„æ”»å‡»"></a>åå°„æ”»å‡»</h3><blockquote>
<p>ä½¿ç”¨åå°„æœºåˆ¶ï¼Œå¯ä»¥è°ƒç”¨ç§æœ‰æ„é€ å‡½æ•°ï¼Œå¯èƒ½é€ æˆæ‰“ç ´å•ä¾‹çš„è§„åˆ™ã€‚</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">InnerClassSingleton</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">// é˜²æ­¢ä½¿ç”¨åå°„æœºåˆ¶è¿›è¡Œåˆ›å»º</span></span><br><span class="line">	<span class="comment">// æ‡’æ±‰æ¨¡å¼ä¸èƒ½è¿›è¡Œé˜²æŠ¤</span></span><br><span class="line">	<span class="keyword">if</span>(Inner.instance != <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"å·²ç»åˆ›å»ºè¿‡å®ä¾‹ï¼ï½"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="åºåˆ—åŒ–çš„å•ä¾‹æ¨¡å¼"><a href="#åºåˆ—åŒ–çš„å•ä¾‹æ¨¡å¼" class="headerlink" title="åºåˆ—åŒ–çš„å•ä¾‹æ¨¡å¼"></a>åºåˆ—åŒ–çš„å•ä¾‹æ¨¡å¼</h2><blockquote>
<p>å°†å¯¹è±¡å­˜å…¥ç¡¬ç›˜ï¼Œè¯»å–çš„å¯¹è±¡å’Œè°ƒç”¨æ–¹æ³•è·å–çš„å¯¹è±¡ä¸ä¸€è‡´ã€‚</p>
</blockquote>
<ul>
<li>è§£å†³:</li>
</ul>
<ol>
<li>å¯¹è±¡ä¸­ç»§æ‰¿åºåˆ—åŒ–æ¥å£ <code>Serializable</code></li>
<li>æ·»åŠ æ–¹æ³• :  <code>Object readResolve() throws ObjectStreamException;</code></li>
<li>æ·»åŠ ç‰ˆæœ¬ğŸ†” : <code>static final long serialVersionUID = 43L;</code></li>
</ol>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InnerSingleton</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">43L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Inner</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> InnerSingleton instance = <span class="keyword">new</span> InnerSingleton();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">InnerSingleton</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(Inner.instance != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"å·²ç»åˆ›å»ºè¿‡å®ä¾‹ï¼ï½"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> InnerSingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Inner.instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Object <span class="title">readResolve</span><span class="params">()</span> <span class="keyword">throws</span> ObjectStreamException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Inner.instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ul>
<li>æµ‹è¯•</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    InnerSingleton instance = InnerSingleton.getInstance();</span><br><span class="line">    ObjectOutputStream out = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">"InnerSingleton"</span>));</span><br><span class="line">    out.writeObject(instance);</span><br><span class="line">    out.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> <span class="keyword">throws</span> IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">    ObjectInputStream in = <span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"InnerSingleton"</span>));</span><br><span class="line">    InnerSingleton innerSingleton = (InnerSingleton) in.readObject();</span><br><span class="line">    in.close();</span><br><span class="line">    Assert.assertEquals(<span class="keyword">true</span>, InnerSingleton.getInstance() == innerSingleton);</span><br><span class="line">    <span class="comment">//é€šè¿‡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Enumç±»å‹åºåˆ—åŒ–"><a href="#Enumç±»å‹åºåˆ—åŒ–" class="headerlink" title="Enumç±»å‹åºåˆ—åŒ–"></a>Enumç±»å‹åºåˆ—åŒ–</h2><blockquote>
<p>Enum ç±»å‹å¯ç›´æ¥è¿›è¡Œåºåˆ—åŒ–ï¼Œä¸éœ€è¦è¿›è¡Œä»¥ä¸Šæ“ä½œã€‚</p>
</blockquote>
<h2 id="å…¶ä»–ç¤ºä¾‹"><a href="#å…¶ä»–ç¤ºä¾‹" class="headerlink" title="å…¶ä»–ç¤ºä¾‹"></a>å…¶ä»–ç¤ºä¾‹</h2><ul>
<li>Spring &amp; JDK<ul>
<li>java.lang.Runtime =&gt; é¥¿æ±‰å¼</li>
<li>java.util.Currency  =&gt; double check</li>
<li>org.springframework.aop.framework.ProxyFactoryBean</li>
<li>org.springframework.beans.factory.support.DefaultSingletonBeanRegistry</li>
</ul>
</li>
<li>Tomcat<ul>
<li>org.apache.catalina.webresources.TomcatURLStreamHandlerFactory</li>
</ul>
</li>
</ul>
<hr>
<h2 id="å‚è€ƒå†…å®¹"><a href="#å‚è€ƒå†…å®¹" class="headerlink" title="å‚è€ƒå†…å®¹"></a>å‚è€ƒå†…å®¹</h2><p><a href="https://www.bilibili.com/video/BV18a4y147dB?p=1" target="_blank" rel="noopener">ç¨‹åºå‘˜å¿…å¤‡çš„13ç§è®¾è®¡æ¨¡å¼ä½ çœŸçš„æŒæ¡äº†å—ï¼Ÿå…¨å¥—æ•™å­¦è§†é¢‘è®©ä½ å½»åº•å¼„æ‡‚</a></p>
]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>å•ä¾‹æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¾è®¡æ¨¡å¼-å·¥å‚æ¨¡å¼</title>
    <url>/kawyang/ccff2b22.html</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡è®°å½•äº†å·¥å‚è®¾è®¡æ¨¡å¼çš„åŸºæœ¬å®ç°æ–¹æ³•ã€‚</p>
</blockquote>
<a id="more"></a>

<h2 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h2><blockquote>
<p>åœ¨æ˜ç¡®åœ°è®¡åˆ’ä¸åŒæ¡ä»¶ä¸‹åˆ›å»ºä¸åŒå®ä¾‹æ—¶ï¼Œä½¿ç”¨å·¥å‚æ¨¡å¼</p>
</blockquote>
<h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><ol>
<li>å°†å®ä½“ç±»è¿›è¡ŒæŠ½è±¡</li>
<li>å®ä½“ç±»å®ç°æ¥å£</li>
<li>åˆ›å»ºå·¥å‚ç±»</li>
<li>æ ¹æ®ä¸åŒå‚æ•°ï¼Œè¿”å›ä¸åŒå¯¹è±¡</li>
</ol>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"Inside Rectangle::draw() method."</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"Inside Square::draw() method."</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ShapeFactory</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">   <span class="comment">//ä½¿ç”¨ getShape æ–¹æ³•è·å–å½¢çŠ¶ç±»å‹çš„å¯¹è±¡</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Shape <span class="title">getShape</span><span class="params">(String shapeType)</span></span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(shapeType == <span class="keyword">null</span>)&#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span>(shapeType.equalsIgnoreCase(<span class="string">"RECTANGLE"</span>))&#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">new</span> Rectangle();</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span>(shapeType.equalsIgnoreCase(<span class="string">"SQUARE"</span>))&#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">new</span> Square();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FactoryPatternDemo</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">      ShapeFactory shapeFactory = <span class="keyword">new</span> ShapeFactory();</span><br><span class="line"> </span><br><span class="line">      <span class="comment">//è·å– Rectangle çš„å¯¹è±¡ï¼Œå¹¶è°ƒç”¨å®ƒçš„ draw æ–¹æ³•</span></span><br><span class="line">      Shape shape2 = shapeFactory.getShape(<span class="string">"RECTANGLE"</span>);</span><br><span class="line"> </span><br><span class="line">      <span class="comment">//è°ƒç”¨ Rectangle çš„ draw æ–¹æ³•</span></span><br><span class="line">      shape2.draw();</span><br><span class="line"> </span><br><span class="line">      <span class="comment">//è·å– Square çš„å¯¹è±¡ï¼Œå¹¶è°ƒç”¨å®ƒçš„ draw æ–¹æ³•</span></span><br><span class="line">      Shape shape3 = shapeFactory.getShape(<span class="string">"SQUARE"</span>);</span><br><span class="line"> </span><br><span class="line">      <span class="comment">//è°ƒç”¨ Square çš„ draw æ–¹æ³•</span></span><br><span class="line">      shape3.draw();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="æŠ½è±¡å·¥å‚"><a href="#æŠ½è±¡å·¥å‚" class="headerlink" title="æŠ½è±¡å·¥å‚"></a>æŠ½è±¡å·¥å‚</h2><blockquote>
<p>å°†å¤šä¸ªğŸ­è¿›è¡Œ<code>æŠ½è±¡</code>ï¼Œä½¿ç”¨ä¸åŒçš„å®ç°ç±»ï¼Œå®Œæˆä¸åŒ <code>äº§å“æ—</code> ğŸ­çš„åˆ›å»ºï¼Œå†ä½¿ç”¨ğŸ­ç”Ÿäº§å¯¹è±¡ã€‚</p>
</blockquote>
<ul>
<li>ä½¿ç”¨æŠ½è±¡ç±»çš„æ–¹å¼å°†å¤šä¸ªğŸ­è¿›è¡ŒæŠ½è±¡</li>
<li>ä½¿ç”¨å·¥å‚çš„æ–¹å¼å®ç°ğŸ­ç±»</li>
<li>æ ¹æ®ä¸åŒçš„éœ€è¦ä½¿ç”¨ğŸ­çš„ğŸ­åˆ›å»ºğŸ­</li>
<li>ç„¶åä½¿ç”¨ğŸ­ç”Ÿäº§å¯¹è±¡</li>
</ul>
<p><img src="https://gitee.com/KawYang/image/raw/master/img/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E7%B1%BB%E5%9B%BE.png" alt="æŠ½è±¡ğŸ­ç±»å›¾"></p>
<h2 id="å‚è€ƒå†…å®¹"><a href="#å‚è€ƒå†…å®¹" class="headerlink" title="å‚è€ƒå†…å®¹"></a>å‚è€ƒå†…å®¹</h2><p><a href="https://www.runoob.com/design-pattern/design-pattern-tutorial.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹</a></p>
]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>å·¥å‚æ¨¡å¼</tag>
        <tag>æŠ½è±¡å·¥å‚</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¾è®¡æ¨¡å¼-å»ºé€ è€…æ¨¡å¼</title>
    <url>/kawyang/2a48474d.html</url>
    <content><![CDATA[<blockquote>
<p>å½“å•ä¸ªå¯¹è±¡åŒ…å«å¤šä¸ªå†…éƒ¨æˆå‘˜ï¼Œå¹¶ä¸”æˆå‘˜åˆ›å»ºè¾ƒä¸ºå¤æ‚ï¼Œç”šè‡³æˆå‘˜åˆ›å»ºæœ‰ä¸€å®šé¡ºåºæ—¶ï¼Œéœ€è¦<code>Builder</code>è®¾è®¡æ¨¡å¼ã€‚</p>
</blockquote>
<a id="more"></a>


<h2 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹ 1"></a>ç¤ºä¾‹ 1</h2><p>æˆ‘ä»¬å‡è®¾ä¸€ä¸ªå¿«é¤åº—çš„å•†ä¸šæ¡ˆä¾‹ï¼Œå…¶ä¸­ï¼Œä¸€ä¸ªå…¸å‹çš„å¥—é¤å¯ä»¥æ˜¯ä¸€ä¸ªæ±‰å ¡ï¼ˆBurgerï¼‰å’Œä¸€æ¯å†·é¥®ï¼ˆCold drinkï¼‰ã€‚</p>
<p>æ±‰å ¡ï¼ˆBurgerï¼‰å¯ä»¥æ˜¯ç´ é£Ÿæ±‰å ¡ï¼ˆVeg Burgerï¼‰æˆ–é¸¡è‚‰æ±‰å ¡ï¼ˆChicken Burgerï¼‰ï¼Œå®ƒä»¬æ˜¯åŒ…åœ¨çº¸ç›’ä¸­ã€‚</p>
<p>å†·é¥®ï¼ˆCold drinkï¼‰å¯ä»¥æ˜¯å¯å£å¯ä¹ï¼ˆcokeï¼‰æˆ–ç™¾äº‹å¯ä¹ï¼ˆpepsiï¼‰ï¼Œå®ƒä»¬æ˜¯è£…åœ¨ç“¶å­ä¸­ã€‚</p>
<p>æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªè¡¨ç¤ºé£Ÿç‰©æ¡ç›®ï¼ˆæ¯”å¦‚æ±‰å ¡å’Œå†·é¥®ï¼‰çš„ Item æ¥å£å’Œå®ç° Item æ¥å£çš„å®ä½“ç±»ï¼Œä»¥åŠä¸€ä¸ªè¡¨ç¤ºé£Ÿç‰©åŒ…è£…çš„ Packing æ¥å£å’Œå®ç° Packing æ¥å£çš„å®ä½“ç±»ï¼Œæ±‰å ¡æ˜¯åŒ…åœ¨çº¸ç›’ä¸­ï¼Œå†·é¥®æ˜¯è£…åœ¨ç“¶å­ä¸­ã€‚</p>
<p>ç„¶åæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª Meal ç±»ï¼Œå¸¦æœ‰ Item çš„ ArrayList å’Œä¸€ä¸ªé€šè¿‡ç»“åˆ Item æ¥åˆ›å»ºä¸åŒç±»å‹çš„ Meal å¯¹è±¡çš„ MealBuilderã€‚BuilderPatternDemoï¼Œæˆ‘ä»¬çš„æ¼”ç¤ºç±»ä½¿ç”¨ MealBuilder æ¥åˆ›å»ºä¸€ä¸ª Mealã€‚</p>
<p><img src="https://gitee.com/KawYang/image/raw/master/img/20200712155953.png" alt=""></p>
<h2 id="ç¤ºä¾‹-2"><a href="#ç¤ºä¾‹-2" class="headerlink" title="ç¤ºä¾‹ 2"></a>ç¤ºä¾‹ 2</h2><p>Computer æ„å»ºéœ€è¦ ä¸»æ¿ã€æ˜¾å¡ã€æ“ä½œç³»ç»Ÿã€‚</p>
<h3 id="arrow-double-up-Computer-æŠ½è±¡ç±»"><a href="#arrow-double-up-Computer-æŠ½è±¡ç±»" class="headerlink" title=":arrow_double_up: Computer æŠ½è±¡ç±»"></a>:arrow_double_up: Computer æŠ½è±¡ç±»</h3><p>åŒ…æ‹¬ <code>mBoard</code>ã€<code>mDisplay</code>ã€<code>mOS</code> ä¸‰ä¸ªæˆå‘˜å˜é‡ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> è®¾è®¡æ¨¡å¼.åˆ›é€ è€…æ¨¡å¼.computer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Computer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> String mBoard;</span><br><span class="line">    <span class="keyword">protected</span> String mDisplay;</span><br><span class="line">    <span class="keyword">protected</span> String mOs;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="title">Computer</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setmBoard</span><span class="params">(String mBoard)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mBoard = mBoard;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setmDisplay</span><span class="params">(String mDisplay)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mDisplay = mDisplay;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">setOs</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Computer&#123;"</span> +</span><br><span class="line">                <span class="string">"mBoard='"</span> + mBoard + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", mDisplay='"</span> + mDisplay + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", mOs='"</span> + mOs + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="ğŸ’»å®ç°ç±»"><a href="#ğŸ’»å®ç°ç±»" class="headerlink" title="ğŸ’»å®ç°ç±»"></a>ğŸ’»å®ç°ç±»</h3><blockquote>
<p>å®ç°æŠ½è±¡ç±»ä¸­çš„æ–¹æ³•</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> è®¾è®¡æ¨¡å¼.åˆ›é€ è€…æ¨¡å¼.computer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MacBook</span> <span class="keyword">extends</span> <span class="title">Computer</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOs</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        mOs = <span class="string">"Mac OS X 12.x"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="building-construction-Builder"><a href="#building-construction-Builder" class="headerlink" title=":building_construction: Builder"></a>:building_construction: Builder</h3><blockquote>
<p>å®šä¹‰ <code>Computer</code> éƒ¨ä»¶åˆ›å»ºæ–¹æ³•</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> è®¾è®¡æ¨¡å¼.åˆ›é€ è€…æ¨¡å¼.computer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LiYang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Project</span> Name: Javaè®¾è®¡æ¨¡å¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Package</span> Name: è®¾è®¡æ¨¡å¼.åˆ›é€ è€…æ¨¡å¼.computer</span></span><br><span class="line"><span class="comment"> * Created by MacBook Air on 2020/07/12.</span></span><br><span class="line"><span class="comment"> * Copyright Â© 2020 LiYang. All rights reserved.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"all"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">buildBoard</span><span class="params">(String board)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">buildDisplay</span><span class="params">(String display)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">buildOs</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> Computer <span class="title">build</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="factory-ComputerBuilder"><a href="#factory-ComputerBuilder" class="headerlink" title=":factory: ComputerBuilder"></a>:factory: ComputerBuilder</h3><blockquote>
<p>æ ¹æ®ä¸åŒçš„ç”µè„‘ç±»å‹å®Œæˆä¸åŒçš„åˆ›å»º</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> è®¾è®¡æ¨¡å¼.åˆ›é€ è€…æ¨¡å¼.computer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MacBookBuilder</span> <span class="keyword">extends</span> <span class="title">Builder</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> MacBook macBook = <span class="keyword">new</span> MacBook();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">buildBoard</span><span class="params">(String board)</span> </span>&#123;</span><br><span class="line">        macBook.setmBoard(board);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">buildDisplay</span><span class="params">(String display)</span> </span>&#123;</span><br><span class="line">        macBook.setmDisplay(display);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">buildOs</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        macBook.setOs();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function">Computer <span class="title">build</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> macBook;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="diamond-shape-with-a-dot-inside-Director"><a href="#diamond-shape-with-a-dot-inside-Director" class="headerlink" title=":diamond_shape_with_a_dot_inside: Director"></a>:diamond_shape_with_a_dot_inside: Director</h3><blockquote>
<p>æ§åˆ¶éƒ¨ä»¶åˆ›å»ºé¡ºåº</p>
</blockquote>
<blockquote>
<p>æ„é€ å‚æ•°éœ€è¦ <code>Builder</code> å¯¹è±¡</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> è®¾è®¡æ¨¡å¼.åˆ›é€ è€…æ¨¡å¼.computer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Director</span> </span>&#123;</span><br><span class="line">    Builder builder;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="title">Director</span><span class="params">(Builder builder)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.builder = builder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºå†…éƒ¨éƒ¨ä»¶</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Computer <span class="title">construct</span><span class="params">(String board, String disPlay)</span></span>&#123;</span><br><span class="line">        builder.buildBoard(board);</span><br><span class="line">        builder.buildDisplay(disPlay);</span><br><span class="line">        builder.buildOs();</span><br><span class="line">        <span class="comment">// è¿”å› Builder å¯¹è±¡ä¸­ç”µè„‘å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">return</span> builder.build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="white-check-mark-æµ‹è¯•ç±»"><a href="#white-check-mark-æµ‹è¯•ç±»" class="headerlink" title=":white_check_mark: æµ‹è¯•ç±»"></a>:white_check_mark: æµ‹è¯•ç±»</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="meta">@org</span>.junit.Test</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Builder builder = <span class="keyword">new</span> MacBookBuilder();</span><br><span class="line">        Director director = <span class="keyword">new</span> Director(builder);</span><br><span class="line">        Computer construct = director.construct(<span class="string">"ä¸»æ¿"</span>, <span class="string">"Inter"</span>);</span><br><span class="line">        System.out.println(construct.toString());</span><br><span class="line"></span><br><span class="line">        builder = <span class="keyword">new</span> HonerComputerBuilder();</span><br><span class="line">        director = <span class="keyword">new</span> Director(builder);</span><br><span class="line">        Computer computer = director.construct(<span class="string">"ä¸»æ¿CN"</span>, <span class="string">"Inter"</span>);</span><br><span class="line">        System.out.println(computer.toString());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p><img src="https://raw.githubusercontent.com/LYgithub/image/master/img/20200717174853.png" alt=""></p>
]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaWeb-Servlet</title>
    <url>/kawyang/3dd30874.html</url>
    <content><![CDATA[<blockquote>
<p>Servlet ç¬”è®°</p>
</blockquote>
<a id="more"></a>

<h2 id="B-S-æµè§ˆå™¨-æœåŠ¡å™¨"><a href="#B-S-æµè§ˆå™¨-æœåŠ¡å™¨" class="headerlink" title="B/S æµè§ˆå™¨/æœåŠ¡å™¨"></a>B/S æµè§ˆå™¨/æœåŠ¡å™¨</h2><h3 id="ç½‘ç»œé€šä¿¡"><a href="#ç½‘ç»œé€šä¿¡" class="headerlink" title="ç½‘ç»œé€šä¿¡"></a>ç½‘ç»œé€šä¿¡</h3><ol>
<li>IP</li>
<li>ç«¯å£</li>
<li>ä¼ è¾“åè®®<ol>
<li>åŸºæœ¬åè®®<ol>
<li>TCPï¼šå®‰å…¨åè®®ï¼Œä¸‰æ¬¡æ¡æ‰‹ï¼Œé€Ÿåº¦æ…¢</li>
<li>UDPï¼šä¸å®‰å…¨ï¼Œé€Ÿåº¦å¿«</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="C-S-å®¢æˆ·ç«¯-æœåŠ¡å™¨"><a href="#C-S-å®¢æˆ·ç«¯-æœåŠ¡å™¨" class="headerlink" title="C/S å®¢æˆ·ç«¯/æœåŠ¡å™¨"></a>C/S å®¢æˆ·ç«¯/æœåŠ¡å™¨</h2><hr>
<h2 id="æœåŠ¡å™¨-Tomcat"><a href="#æœåŠ¡å™¨-Tomcat" class="headerlink" title="æœåŠ¡å™¨(Tomcat)"></a>æœåŠ¡å™¨(Tomcat)</h2><ul>
<li><p>å®‰è£…äº†æœåŠ¡å™¨è½¯ä»¶çš„è®¡ç®—æœº</p>
</li>
<li><p>æœåŠ¡å™¨è½¯ä»¶ï¼šæ¥æ”¶è¯·æ±‚ï¼Œå¤„ç†è¯·æ±‚ï¼Œåšå‡ºå“åº”</p>
</li>
<li><p>webæœåŠ¡å™¨è½¯ä»¶</p>
<ul>
<li><p>åœ¨webæœåŠ¡å™¨è½¯ä»¶ï¼Œéƒ¨ç½²é¡¹ç›®ï¼Œæµè§ˆå™¨è®¿é—® ï¼ˆwebå®¹å™¨ï¼‰</p>
<p>å¸¸è§çš„Javaç›¸å…³webæœåŠ¡å™¨ï¼š</p>
<ol>
<li><p>webLogic ï¼š oracle</p>
<ol start="2">
<li>webSphere ï¼š IBM</li>
</ol>
</li>
</ol>
</li>
</ul>
<ol start="3">
<li><p>JBOSS ï¼š JBOSS</p>
</li>
<li><p>TomCat : ApacheåŸºé‡‘ç»„ç»‡</p>
</li>
</ol>
</li>
</ul>
<h3 id="download"><a href="#download" class="headerlink" title="download"></a>download</h3><ol>
<li><p>ä¸‹è½½</p>
</li>
<li><p>è§£å‹</p>
<ul>
<li>å®‰è£…è·¯å¾„æ— ä¸­æ–‡</li>
</ul>
</li>
<li><p>å¯åŠ¨</p>
<blockquote>
<p> ä¿®æ”¹ç«¯å£å·ï¼š<code>conf/server.xml</code></p>
</blockquote>
</li>
<li><p>å…³é—­</p>
<blockquote>
<p><code>ctrl + c</code></p>
</blockquote>
</li>
</ol>
<h3 id="é…ç½®éƒ¨ç½²"><a href="#é…ç½®éƒ¨ç½²" class="headerlink" title="é…ç½®éƒ¨ç½²"></a>é…ç½®éƒ¨ç½²</h3><ol>
<li><p>æ”¾åˆ° <code>webapps</code>ç›®å½•ä¸‹</p>
<blockquote>
<p>/hello : è™šæ‹Ÿç›®å½•/è®¿é—®ç›®å½•</p>
<p>ç®€åŒ–éƒ¨ç½²ï¼šæ‰“åŒ…ä¸º waråŒ…ï¼Œè‡ªåŠ¨è§£å‹å’Œåˆ é™¤</p>
</blockquote>
</li>
<li><p>é…ç½®è·¯å¾„</p>
<p>Server.xml -&gt; TomCatçš„æ•´ä½“é…ç½®æ–‡ä»¶</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Host</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">Context</span> <span class="attr">docBase</span>=<span class="string">"D:\\"</span>  <span class="attr">path</span>=<span class="string">"\"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Host</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>çƒ­éƒ¨ç½²</p>
<p>/conf/Catalina/localhost</p>
<p>ä¸‹åˆ›å»º<code>xxx.xml</code> æ–‡ä»¶</p>
</li>
</ol>
<h3 id="åŠ¨æ€é¡¹ç›®ä¸é™æ€é¡¹ç›®"><a href="#åŠ¨æ€é¡¹ç›®ä¸é™æ€é¡¹ç›®" class="headerlink" title="åŠ¨æ€é¡¹ç›®ä¸é™æ€é¡¹ç›®"></a>åŠ¨æ€é¡¹ç›®ä¸é™æ€é¡¹ç›®</h3><p>åŠ¨æ€ï¼š</p>
<pre><code>-- æ ¹ç›®å½•
    -- WEB-INF ç›®å½•
        --classes : å­—èŠ‚ç æ–‡ä»¶
        --lib ï¼š jaråŒ…
        -- web.xml ï¼š é…ç½®</code></pre><h2 id="Servlet-ï¼š-server-applet"><a href="#Servlet-ï¼š-server-applet" class="headerlink" title="Servlet ï¼š server applet"></a>Servlet ï¼š server applet</h2><blockquote>
<p>ä¸€ä¸ªæ¥å£</p>
<p>è¢«æµè§ˆå™¨è®¿é—®åˆ°ï¼ˆTomCatè¯†åˆ«ï¼‰</p>
</blockquote>
<h3 id="å¿«é€Ÿå…¥é—¨"><a href="#å¿«é€Ÿå…¥é—¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h3><ol>
<li><p>åˆ›å»ºJavaEEé¡¹ç›®</p>
</li>
<li><p>å®ç°Servletæ¥å£</p>
<ul>
<li>Servletæ¥å£ service æ–¹æ³•ï¼Œæä¾›æœåŠ¡</li>
</ul>
</li>
<li><p>å®ç°æŠ½è±¡æ–¹æ³•</p>
</li>
<li><p>é…ç½®</p>
<blockquote>
<p>Web.xml</p>
</blockquote>
</li>
</ol>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>add_servlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.servlet.AddServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>add_servlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/page/æ±‚å’Œ/hello<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></div>



<h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p><img src="https://gitee.com/KawYang/image/raw/master/img/image-20200607181108630.png" alt="image-20200607181108630"></p>
<h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h2 id="Servlet-æ–¹æ³•"><a href="#Servlet-æ–¹æ³•" class="headerlink" title="Servlet æ–¹æ³•"></a>Servlet æ–¹æ³•</h2><blockquote>
<p>æ³¨æ„é…ç½®Servlet </p>
</blockquote>
<ol>
<li><p>init ï¼š åˆå§‹åŒ–æ–¹æ³• åœ¨Servletåˆ›å»ºæ—¶æ‰§è¡Œï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡</p>
<ul>
<li><p>ä½•æ—¶åˆ›å»º</p>
<ul>
<li><p>é»˜è®¤ç¬¬ä¸€æ¬¡è¢«è®¿é—®</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XML"><figure class="iseeu highlight /xml"><table><tr><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Demo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.KawYang.Servlet.Demo1Test<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        1. ç¬¬ä¸€æ¬¡è®¿é—®æ—¶ è´Ÿæ•° -1</span></span><br><span class="line"><span class="comment">            2. æœåŠ¡å™¨å¯åŠ¨æ—¶ æ­£æ•° 0 æˆ– 1--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>-1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
</li>
</ul>
</li>
<li><p>Servlet æ˜¯å•ä¾‹çš„</p>
<ul>
<li>å¤šä¸ªç”¨æˆ·è®¿é—®<code>å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜</code></li>
<li>è§£å†³ï¼šå°½é‡ä¸åœ¨Servletå®šä¹‰æˆå‘˜å˜é‡ï¼Œå³ä½¿å®šä¹‰äº†æˆå‘˜å˜é‡ï¼Œä¸è¦å¯¹å…¶ä¿®æ”¹å€¼</li>
</ul>
</li>
</ul>
</li>
<li><p>Service ï¼š æä¾›æœåŠ¡çš„æ–¹æ³•ï¼Œæ¯æ¬¡Servletè¢«è®¿é—®æ—¶æ‰§è¡Œ</p>
</li>
<li><p>destroy ï¼š é”€æ¯æ–¹æ³•ï¼Œåœ¨Servlet<code>æ­£å¸¸å…³é—­</code>æ—¶æ‰§è¡Œ</p>
<ul>
<li>æœåŠ¡å™¨è¢«å…³é—­æ—¶æ‰§è¡Œ</li>
<li>Servlet ç»“æŸä¹‹å‰</li>
</ul>
</li>
<li><p>ServletConfig ï¼š Servleté…ç½®</p>
</li>
<li><p>getServletInfo : è·å–ç‰ˆæœ¬ï¼Œä½œè€…â€¦</p>
</li>
</ol>
<h2 id="Servlet-ç”Ÿå‘½å‘¨æœŸ"><a href="#Servlet-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Servlet ç”Ÿå‘½å‘¨æœŸ"></a>Servlet ç”Ÿå‘½å‘¨æœŸ</h2><p>åˆ›å»º -&gt; æä¾›æœåŠ¡ -&gt; è¢«é”€æ¯</p>
<h2 id="Servlet-3-0"><a href="#Servlet-3-0" class="headerlink" title="Servlet 3.0"></a>Servlet 3.0</h2><blockquote>
<p>æ”¯æŒæ³¨è§£é…ç½®ï¼Œä¸éœ€è¦ xml</p>
</blockquote>
<h3 id="æ³¨è§£é…ç½®"><a href="#æ³¨è§£é…ç½®" class="headerlink" title="æ³¨è§£é…ç½®"></a>æ³¨è§£é…ç½®</h3><p>é…ç½®èµ„æºè·¯å¾„</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(urlPatterns = <span class="string">"/Demo1"</span>) </span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/Demo1"</span>) <span class="comment">//value å¯ä»¥çœç•¥ </span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo1Test</span> <span class="keyword">implements</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="IDEAä¸Tomcat"><a href="#IDEAä¸Tomcat" class="headerlink" title="IDEAä¸Tomcat"></a>IDEAä¸Tomcat</h2><ol>
<li><p>IDEAä¼šä¸º æ¯ä¸ªwebé¡¹ç›®åˆ›å»ºä¸€ä»½é…ç½®æ–‡ä»¶</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SHELL"><figure class="iseeu highlight /shell"><table><tr><td class="code"><pre><span class="line">08-Jun-2020 15:32:33.041 ä¿¡æ¯ [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_BASE:         /Users/mac/Library/Caches/IntelliJIdea2019.3/tomcat/_Demo1</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>å·¥ä½œç©ºé—´é¡¹ç›® å’Œ TomCatéƒ¨ç½²çš„æ–‡æœ¬é¡¹ç›®</p>
<ol>
<li>çœŸæ­£è®¿é—®çš„æ˜¯ <code>éƒ¨ç½²</code> é¡¹ç›®ï¼Œå¯¹åº”<strong>å·¥ä½œç©ºé—´</strong>ä¸‹ webæ–‡ä»¶çš„æ‰€æœ‰å†…å®¹</li>
<li>WEB-INF ä¸‹æ–‡ä»¶<strong>ä¸èƒ½</strong>è¢«è®¿é—®</li>
</ol>
</li>
<li><p>æ–­ç‚¹è°ƒè¯•</p>
<p>Debug è¿è¡Œ</p>
</li>
</ol>
<h2 id="Servletä½“ç³»ç»“æ„"><a href="#Servletä½“ç³»ç»“æ„" class="headerlink" title="Servletä½“ç³»ç»“æ„"></a>Servletä½“ç³»ç»“æ„</h2><p>Servlet (æ¥å£) -&gt; GenericServlet (ç±»)-&gt; HttpServlet (ç±»)</p>
<h3 id="GenericServlet"><a href="#GenericServlet" class="headerlink" title="GenericServlet"></a>GenericServlet</h3><blockquote>
<p> å…¶ä»–æ–¹æ³•é»˜è®¤ç©ºå®ç°ï¼Œåªå°†<strong>Service</strong>è¿›è¡ŒæŠ½è±¡</p>
</blockquote>
<h3 id="HttpServlet"><a href="#HttpServlet" class="headerlink" title="HttpServlet"></a>HttpServlet</h3><blockquote>
<p>å¯¹Httpåè®® ç®€åŒ–æ“ä½œ å’Œ Webçš„å°è£…</p>
</blockquote>
<p><img src="https://gitee.com/KawYang/image/raw/master/img/image-20200608160714672.png" alt="image-20200608160714672"></p>
<ol>
<li>ç»§æ‰¿HttpServlet</li>
<li>å¤å†™ <code>doGetã€doPost</code></li>
</ol>
<h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><ol>
<li>urlPatterns : è®¿é—®è·¯å¾„ å¯ä»¥å®šä¹‰å¤šä¸ªï¼Œåä¸ºvalue å¯ä»¥çœç•¥ <ol>
<li>/xx</li>
<li>/xx/xx<ul>
<li>ç›®å½•ç»“æ„</li>
<li>/* ä¼˜å…ˆçº§æœ€ä½</li>
</ul>
</li>
<li><strong><code>* .do</code></strong><ul>
<li>ä¸èƒ½ç”¨<strong>/</strong></li>
</ul>
</li>
</ol>
</li>
</ol>
<hr>
<h1 id="Http"><a href="#Http" class="headerlink" title="Http"></a>Http</h1><h2 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2><ul>
<li><p>åŸºäº TCP/IP çš„é«˜çº§åè®®</p>
</li>
<li><p>é»˜è®¤ç«¯å£ 80</p>
</li>
<li><p>åŸºäºè¯·æ±‚å“åº”æ¨¡å‹çš„ã€‚ä¸€æ¬¡è¯·æ±‚å¯¹åº”ä¸€ä¸ªå“åº”</p>
</li>
<li><p>æ— çŠ¶æ€åè®®ï¼šæ¯æ¬¡è¯·æ±‚ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œä¸èƒ½äº¤äº’æ•°æ®</p>
</li>
</ul>
<h2 id="å†å²ç‰ˆæœ¬"><a href="#å†å²ç‰ˆæœ¬" class="headerlink" title="å†å²ç‰ˆæœ¬"></a>å†å²ç‰ˆæœ¬</h2><p>1.0 ï¼š æ¯æ¬¡è¯·æ±‚éƒ½å»ºç«‹æ–°çš„è¿æ¥</p>
<p>1.1ï¼šå¤ç”¨è¿æ¥</p>
<h2 id="è¯·æ±‚æ¶ˆæ¯æ•°æ®æ ¼å¼"><a href="#è¯·æ±‚æ¶ˆæ¯æ•°æ®æ ¼å¼" class="headerlink" title="è¯·æ±‚æ¶ˆæ¯æ•°æ®æ ¼å¼"></a>è¯·æ±‚æ¶ˆæ¯æ•°æ®æ ¼å¼</h2><ol>
<li><p>è¯·æ±‚è¡Œ ï¼š è¯·æ±‚æ–¹å¼  è¯·æ±‚url è¯·æ±‚åè®®/ç‰ˆæœ¬</p>
<ul>
<li>GET : åœ¨è¯·æ±‚è¡Œä¸­ï¼Œurlä¸­ ï¼Œé•¿åº¦æœ‰é™ï¼Œä¸å®‰å…¨</li>
<li>POST ï¼š æ•°æ®åœ¨è¯·æ±‚ä½“ä¸­ï¼Œé•¿åº¦æ— é™åˆ¶ï¼Œå®‰å…¨</li>
</ul>
</li>
<li><p>è¯·æ±‚å¤´ ï¼š åç§° ï¼š å€¼</p>
<ul>
<li><p>Referer ï¼šä»å“ªé‡Œæ¥ï¼Œ</p>
<ul>
<li>é˜²ç›—é“¾</li>
<li>ç»Ÿè®¡</li>
</ul>
<p><img src="https://gitee.com/KawYang/image/raw/master/img/image-20200608163915586.png" alt="image-20200608163915586"></p>
</li>
<li><p>Connection ï¼š keep-alone å¤ç”¨</p>
</li>
</ul>
</li>
<li><p>è¯·æ±‚ç©ºè¡Œ ï¼š ç©ºè¡Œï¼Œåˆ†å‰²ä½œç”¨</p>
</li>
<li><p>è¯·æ±‚ä½“ ï¼š userName=Jary</p>
</li>
</ol>
<h3 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h3><p><img src="https://gitee.com/KawYang/image/raw/master/img/image-20200608164323934.png" alt="image-20200608164323934"></p>
<ol>
<li>æœåŠ¡å™¨åˆ›å»º Request å’Œ response</li>
<li>Request è·å–è¯·æ±‚æ¶ˆæ¯ï¼Œresponse è®¾ç½®å“åº”æ¶ˆæ¯</li>
</ol>
<h3 id="Request-ç»§æ‰¿ç»“æ„"><a href="#Request-ç»§æ‰¿ç»“æ„" class="headerlink" title="Request ç»§æ‰¿ç»“æ„"></a>Request ç»§æ‰¿ç»“æ„</h3><p>ã€‚ã€‚ã€‚</p>
<h3 id="RequeståŠŸèƒ½"><a href="#RequeståŠŸèƒ½" class="headerlink" title="RequeståŠŸèƒ½"></a>RequeståŠŸèƒ½</h3><ol>
<li><p>è¯·æ±‚è¡Œæ•°æ®</p>
<ul>
<li>GET /test/Demo1?name=zhangsan HTTP/1.1</li>
<li>æ–¹æ³•<ol>
<li>String getMethod() : GET</li>
<li><strong>String getContextPath() : è™šæ‹Ÿè·¯å¾„ /test</strong></li>
<li>String getServletPath() : Servlet è·¯å¾„  /Demo1</li>
<li>String getQueryString() : å‚æ•°name=zhangsan </li>
<li><strong>String getRequestURI() ï¼š/test/Demo1</strong></li>
<li>String getRequestURL()  : <a href="http://loaclhost/test/Demo1" target="_blank" rel="noopener">http://loaclhost/test/Demo1</a></li>
<li>String getProtocol() : HTTP/1.1 ç‰ˆæœ¬</li>
<li>String getRemoteAddr() : å®¢æˆ·IP</li>
</ol>
</li>
<li>URL : ç»Ÿä¸€èµ„æºå®šä½ç¬¦ <code>http://loaclhost/test/Demo1</code></li>
<li>URI ï¼šç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ <code>/test/Demo1</code></li>
</ul>
</li>
<li><p>è¯·æ±‚å¤´æ•°æ®</p>
<ul>
<li>æ–¹æ³•<ol>
<li>String getHeader(String name) ï¼š è·å–è¯·æ±‚å¤´ä¿¡æ¯</li>
<li>Enumeration<String> getHeaderNames() : è·å–è¯·æ±‚å¤´åç§°</li>
</ol>
</li>
</ul>
</li>
<li><p>è¯·æ±‚ä½“æ•°æ®</p>
<ul>
<li>è¿˜æœ‰POSTæ–¹å¼ï¼Œæ‰æœ‰è¯·æ±‚ä½“</li>
<li>æ­¥éª¤ï¼š<ol>
<li>è·å–æµå¯¹è±¡<ul>
<li>getReader() : è·å–å­—ç¬¦è¾“å…¥æµï¼Œæ™ºèƒ½æ“ä½œå­—ç¬¦</li>
<li>ServletInputStream getInputStreamï¼ˆï¼‰ ï¼š è·å–å­—èŠ‚è¾“å…¥æµï¼Œå¯æ“ä½œæ‰€æœ‰ç±»å‹æ•°æ®</li>
</ul>
</li>
<li>å†ä»æµå¯¹è±¡ä¸­æ‹¿å‡ºæ•°æ®</li>
</ol>
</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line">BufferedReader br = req.getReader();</span><br><span class="line">String line = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">while</span>((line = br.readerLine()) != <span class="keyword">null</span>)&#123;</span><br><span class="line">    System.out.println(line);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



</li>
</ol>
<h3 id="å…¶ä»–æ–¹æ³•"><a href="#å…¶ä»–æ–¹æ³•" class="headerlink" title="å…¶ä»–æ–¹æ³•"></a>å…¶ä»–æ–¹æ³•</h3><ol>
<li><p>è·å–è¯·æ±‚å‚æ•° </p>
<ol>
<li>String  getParameter(String name) =&gt; è·å–å€¼</li>
<li>String  getParameterValues(String name)   =&gt; hobby=xx&amp;hobby=game</li>
<li>Enumeration<String> GetParameterNames() =&gt;  è·å–åç§°</li>
<li>Map&lt;String, String[]&gt; getParameterMap() =&gt; è·å–æ‰€æœ‰å‚æ•°çš„é›†åˆ</li>
</ol>
<ul>
<li><p>ä¸­æ–‡ä¹±ç </p>
<ul>
<li><p>Tomcat8 è§£å†³getä¸­æ–‡ä¹±ç </p>
</li>
<li><pre><code class="java">req.setCharacterEncoding(<span class="string">"utf-8"</span>);
&lt;!--ï¿¼<span class="number">7</span>--&gt;

**ç‰¹ç‚¹**

<span class="number">1</span>. æµè§ˆå™¨**åœ°å€æ **æ²¡æœ‰å˜
<span class="number">2</span>. æœåŠ¡å™¨**å†…éƒ¨**èµ„æº
<span class="number">3</span>. è½¬å‘ä½¿ç”¨**ä¸€æ¬¡è¯·æ±‚**</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li><p>å…±äº«</p>
<ol>
<li>åŸŸå¯¹è±¡ ï¼š ä¸€ä¸ªæœ‰ä½œç”¨èŒƒå›´çš„å¯¹è±¡<ul>
<li>requeståŸŸï¼šä¸€æ¬¡è¯·æ±‚çš„èŒƒå›´ï¼Œä¸€èˆ¬ç”¨äºè¯·æ±‚è½¬å‘çš„å¤šä¸ªèµ„æºä¸­å…±äº«æ•°æ®</li>
</ul>
</li>
<li>æ–¹æ³•<ul>
<li>setAttribute(String name, Object obj) : å­˜å‚¨æ•°æ®</li>
<li>getAttribute(String name) : å–å€¼</li>
<li>removeAttribute(String name) : åˆ é™¤</li>
</ul>
</li>
</ol>
</li>
<li><p>è·å–ServletContext</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line">ServletContext servletContext = request.getServletContext();</span><br><span class="line">System.out.println(servletContext);</span><br></pre></td></tr></table></figure></div>

</li>
</ol>
<h2 id="ç™»å½•ç»ƒä¹ -exclamation"><a href="#ç™»å½•ç»ƒä¹ -exclamation" class="headerlink" title="ç™»å½•ç»ƒä¹  :exclamation:"></a>ç™»å½•ç»ƒä¹  :exclamation:</h2><p><a href="https://www.bilibili.com/video/BV1aE411L7XV?p=256" target="_blank" rel="noopener">ç”¨æˆ·ç™»å½•</a></p>
<hr>
<h2 id="å“åº”æ¶ˆæ¯æ•°æ®æ ¼å¼"><a href="#å“åº”æ¶ˆæ¯æ•°æ®æ ¼å¼" class="headerlink" title="å“åº”æ¶ˆæ¯æ•°æ®æ ¼å¼"></a>å“åº”æ¶ˆæ¯æ•°æ®æ ¼å¼</h2><h3 id="å“åº”æ¶ˆæ¯"><a href="#å“åº”æ¶ˆæ¯" class="headerlink" title="å“åº”æ¶ˆæ¯"></a>å“åº”æ¶ˆæ¯</h3><ol>
<li><p>å“åº”è¡Œ </p>
<ul>
<li>æ ¼å¼ ï¼š åè®®/ç‰ˆæœ¬ å“åº”çŠ¶æ€ç  çŠ¶æ€ç æè¿°</li>
<li>çŠ¶æ€ç ï¼šä¸‰ä½<ul>
<li>1xx ï¼š æœåŠ¡å™¨æ¥æ”¶å®¢æˆ·ç«¯æ¶ˆæ¯ï¼Œæ²¡æœ‰æ¥æ”¶å®Œæˆ</li>
<li>2xx ï¼š OK</li>
<li>3xx :  é‡å®šå‘ 302 ï¼Œèµ„æºè·³è½¬ï¼›304 è®¿é—®ç¼“å­˜</li>
<li>4xx ï¼šå®¢æˆ·ç«¯é”™è¯¯ï¼Œ 404 ï¼› 405 æ— Post/Getæ–¹æ³•</li>
<li>5xx ï¼šæœåŠ¡å™¨é”™è¯¯ </li>
</ul>
</li>
</ul>
<p><img src="https://gitee.com/KawYang/image/raw/master/img/image-20200609164456185.png" alt="image-20200609164456185"></p>
</li>
<li><p>å“åº”å¤´</p>
<ul>
<li>å¤´åç§° ï¼š å€¼</li>
<li>Content-Type ï¼š å“åº”ä½“æ•°æ®ç¼–ç æ ¼å¼</li>
<li>Content-disposition ï¼š æ‰“å¼€å“åº”ä½“æ ¼å¼<ul>
<li>é»˜è®¤ ï¼š in-line å½“å‰é¡µé¢ä¸­å±•ç¤º</li>
<li>attachmentï¼›filename=xxx ï¼š é™„ä»¶æ ¼å¼æ‰“å¼€ï¼Œæ–‡ä»¶ä¸‹è½½ </li>
</ul>
</li>
</ul>
</li>
<li><p>å“åº”ç©ºè¡Œ</p>
</li>
<li><p>å“åº”ä½“ </p>
<ul>
<li>ä¼ é€çš„æ•°æ®</li>
</ul>
</li>
</ol>
<h3 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h3><p>çŠ¶æ€ç ï¼šsetStatus(int c)</p>
<p>å“åº”å¤´ ï¼š setHeaderï¼ˆString name, String value)</p>
<p>å“åº”ä½“ ï¼š</p>
<ol>
<li><p>æ­¥éª¤</p>
<ol>
<li>è·å»è¾“å‡ºæµ<ol>
<li>å­—ç¬¦è¾“å‡ºæµ<ul>
<li>PrintWriter getWriter()</li>
</ul>
</li>
<li>å­—èŠ‚è¾“å‡ºæµ<ul>
<li>ServletOutputStream getOutputStream()</li>
</ul>
</li>
</ol>
</li>
<li>ä½¿ç”¨è¾“å‡ºæµè¾“å‡ºåˆ°æµè§ˆå™¨ä¸­</li>
</ol>
</li>
</ol>
<h3 id="ç»ƒä¹ -exclamation"><a href="#ç»ƒä¹ -exclamation" class="headerlink" title="ç»ƒä¹ :exclamation:"></a>ç»ƒä¹ :exclamation:</h3><ol>
<li><p>é‡å®šå‘</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è‡ªåŠ¨è·³è½¬åˆ°Demo2  é‡å®šå‘</span></span><br><span class="line"><span class="comment">//è®¾ç½®çŠ¶æ€ç </span></span><br><span class="line">resp.setStatus(<span class="number">302</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®å¤´</span></span><br><span class="line">resp.setHeader(<span class="string">"location"</span>, <span class="string">"/HomeWork/responseDemo2"</span>);</span><br><span class="line"></span><br><span class="line">resp.sendRedirect(<span class="string">"/HomeWork/responseDemo2"</span>);</span><br></pre></td></tr></table></figure></div>

<ul>
<li><p><strong>$ \color {red}{ forword å’Œ   Redirect åŒºåˆ«}$</strong></p>
</li>
<li><p>ç‰¹ç‚¹</p>
<ul>
<li>åœ°å€æ å‘ç”Ÿå˜åŒ–</li>
<li>å¯è®¿é—®å…¶ä»–æœåŠ¡å™¨çš„èµ„æº</li>
<li>ä¸¤æ¬¡è¯·æ±‚</li>
<li>ä¸èƒ½å…±äº«æ•°æ®</li>
</ul>
</li>
<li><p>è·¯å¾„ </p>
<ul>
<li><p>ç»å¯¹è·¯å¾„ï¼š ç¡®å®šå”¯ä¸€èµ„æº</p>
<p>è§„åˆ™ï¼š åˆ¤æ–­å®šä¹‰çš„è·¯å¾„æ˜¯ç»™è°ç”¨çš„</p>
<p>â€‹    å®¢æˆ·ç«¯ï¼š <strong>æ·»åŠ è™šæ‹Ÿç›®å½•</strong>ï¼ˆé¡¹ç›®è®¿é—®è·¯å¾„ï¼‰ =&gt; é‡å®šå‘  ï¼š å»ºè®®<strong>åŠ¨æ€è·å–</strong> <code>String contextPath = req.getContextPath();</code></p>
<p>â€‹    æœåŠ¡å™¨ï¼š<strong>ä¸éœ€è¦åŠ è™šæ‹Ÿç›®å½•</strong> =&gt; è½¬å‘</p>
<blockquote>
<p>â€œ/HomeWork/responseDemo2â€ çœç•¥ <a href="http://loaclhost:8080" target="_blank" rel="noopener">http://loaclhost:8080</a> </p>
</blockquote>
</li>
<li><p>ç›¸å¯¹è·¯å¾„ ï¼š ä¸å¯ä»¥ç¡®å®šå”¯ä¸€èµ„æº , <strong>ä¸</strong> ä»¥<code>/</code> å¼€å¤´ï¼Œæˆ– <code>./</code>å¼€å¤´ <strong>å¯ä»¥ä¸å†™</strong></p>
<blockquote>
<p> <strong>æ‰¾åˆ°å½“å‰è·¯å¾„å’Œç›®æ ‡èµ„æºä¹‹é—´çš„ç›¸å¯¹å…³ç³»</strong></p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
<li><p>æœåŠ¡å™¨è¾“å‡ºå­—ç¬¦æ•°æ®</p>
</li>
<li><p>æœåŠ¡å™¨è¾“å‡ºå­—èŠ‚æµ</p>
</li>
<li><p>éªŒè¯ç </p>
</li>
</ol>
<h1 id="ServletContextå¯¹è±¡"><a href="#ServletContextå¯¹è±¡" class="headerlink" title="ServletContextå¯¹è±¡"></a>ServletContextå¯¹è±¡</h1><ol>
<li>ä»£è¡¨æ•´ä¸ªwebåº”ç”¨ï¼Œå¯ä»¥å’Œç¨‹åºçš„å®¹å™¨<code>tomcat</code>è¿›è¡Œé€šè®¯</li>
<li>åŠŸèƒ½<ol>
<li>è·å– MIMEç±»å‹ï¼š</li>
<li>åŸŸå¯¹è±¡ ï¼š å…±äº«æ•°æ® </li>
<li>è·å–æ–‡ä»¶çš„çœŸå®<code>æœåŠ¡å™¨</code>è·¯å¾„</li>
</ol>
</li>
</ol>
<h2 id="è·å–"><a href="#è·å–" class="headerlink" title="è·å–"></a>è·å–</h2><p>request.getServletContext</p>
<p>httpServlet.getServletContext -&gt; this.geServletContext</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.doPost(req, resp);</span><br><span class="line">        <span class="keyword">this</span>.getServletContext();</span><br><span class="line">        req.getServletContext();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<ol>
<li><p>è·å– MIMEç±»å‹ï¼š</p>
<ul>
<li><p>MIME ,æˆ–è”ç½‘é€šä¿¡è¿‡ç¨‹ä¸­å®šä¹‰çš„ä¸€ç§æ–‡ä»¶æ•°æ®ç±»å‹</p>
<ul>
<li>æ ¼å¼ ï¼š å¤§ç±»å‹/å°ç±»å‹  text/ html  image/jpeg</li>
</ul>
</li>
<li><p><strong>String  getMimeType(String file)</strong></p>
</li>
<li><p>tomcatä¸‹çš„<code>web.xml</code> </p>
</li>
<li><pre><code class="java">ServletContext servletContext = req.getServletContext();
String file = <span class="string">"a.jpg"</span>;
String mimeType = servletContext.getMimeType(file);
System.out.println(mimeType);</code></pre>
</li>
</ul>
</li>
<li><p>åŸŸå¯¹è±¡ ï¼š å…±äº«æ•°æ® </p>
<ul>
<li>setAttribute(String name, Object value)</li>
<li>getAttribute(String name)</li>
<li>removeAttrivute(String name)</li>
<li>èŒƒå›´ ï¼š<strong>å…±äº«æ‰€æœ‰ç”¨æˆ·çš„è¯·æ±‚æ•°æ®</strong></li>
</ul>
</li>
<li><p>è·å–æ–‡ä»¶çš„çœŸå®<code>æœåŠ¡å™¨</code>è·¯å¾„</p>
<ul>
<li>String getRealPath(String path)</li>
<li>é…ç½®æ–‡ä»¶  src  web WEB-INF<ul>
<li>web =&gt; /xxx</li>
<li>WEB-INF =&gt; /WEB-INF/xx</li>
<li>src<code>å·²ç»é…ç½®åˆ°æœåŠ¡å™¨</code>  =&gt;  /WEB-INF/classes/xx</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="æ¡ˆä¾‹-ï¼š-æ–‡ä»¶ä¸‹è½½"><a href="#æ¡ˆä¾‹-ï¼š-æ–‡ä»¶ä¸‹è½½" class="headerlink" title="æ¡ˆä¾‹   ï¼š æ–‡ä»¶ä¸‹è½½"></a>æ¡ˆä¾‹   ï¼š æ–‡ä»¶ä¸‹è½½</h2><ol>
<li><p>é¡µé¢æ˜¾ç¤ºä¸‹è½½é“¾æ¥</p>
</li>
<li><p>ç‚¹å‡»é“¾æ¥å¼¹å‡ºä¸‹è½½æç¤ºæ¡†</p>
<ol>
<li><p>ä½¿ç”¨å“åº”å¤´è®¾ç½®èµ„æºçš„æ‰“å¼€æ–¹å¼</p>
<p><code>Content-dispostion:attachment;filename=xxx</code></p>
</li>
</ol>
</li>
<li><p>ä¸‹è½½</p>
</li>
</ol>
<p>æ­¥éª¤ï¼š</p>
<ul>
<li>å®šä¹‰é¡µé¢ï¼Œç¼–è¾‘è¶…é“¾æ¥hrefå±æ€§ ï¼ŒæŒ‡å‘Servlet ï¼Œä¼ é€’èµ„æºå</li>
<li>å®šä¹‰Servlet<ul>
<li>è·å–æ–‡ä»¶å</li>
<li>åŠ è½½è¿›å†…å­˜</li>
<li>æŒ‡å®šå“åº”å¤´</li>
<li>å†™å‡ºåˆ°responseå¯¹è±¡ä¸­</li>
</ul>
</li>
</ul>
<h2 id="ä¸­æ–‡ä¹±ç "><a href="#ä¸­æ–‡ä¹±ç " class="headerlink" title="ä¸­æ–‡ä¹±ç "></a>ä¸­æ–‡ä¹±ç </h2><ol>
<li>è·å–æµè§ˆå™¨</li>
<li>è¿”å›ä¸åŒçš„ç¼–ç æ–¹å¼è®¾ç½®filename</li>
</ol>
]]></content>
      <categories>
        <category>JavaWeb</category>
      </categories>
      <tags>
        <tag>Servlet</tag>
        <tag>JavaWeb</tag>
      </tags>
  </entry>
  <entry>
    <title>archives</title>
    <url>/archives/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>tags</title>
    <url>/tags/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
</search>
